<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.78.2"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Generic invoke of Dubbo | Apache Dubbo</title><meta property="og:title" content="Generic invoke of Dubbo"><meta property="og:description" content="This article introduces you when and how to use generic invoke of Dubbo."><meta property="og:type" content="article"><meta property="og:url" content="/blog/2018/08/14/generic-invoke-of-dubbo/"><meta property="article:published_time" content="2018-08-14T00:00:00+00:00"><meta property="article:modified_time" content="2020-11-18T12:47:54+08:00"><meta property="og:site_name" content="Apache Dubbo"><meta itemprop=name content="Generic invoke of Dubbo"><meta itemprop=description content="This article introduces you when and how to use generic invoke of Dubbo."><meta itemprop=datePublished content="2018-08-14T00:00:00+00:00"><meta itemprop=dateModified content="2020-11-18T12:47:54+08:00"><meta itemprop=wordCount content="777"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Generic invoke of Dubbo"><meta name=twitter:description content="This article introduces you when and how to use generic invoke of Dubbo."><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-112489517-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preload href=/scss/main.min.8b180b4f9c3e92478ac4794f7583d0b2a7c043e9717486d0407c2dfdf725043f.css as=style><link href=/scss/main.min.8b180b4f9c3e92478ac4794f7583d0b2a7c043e9717486d0407c2dfdf725043f.css rel=stylesheet integrity><script src=/js/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 321.39 78.54"><title id="title19">DUBBO LOGO</title><path class="cls-1" d="M68.46 50.38c0 14.06 11.39 22.11 25.45 22.11s25.45-8.05 25.45-22.11V7.25H68.46zm21.24-28h8.6V31H89.7zm0 22.25h8.6v8.6H89.7zM33.24 7.25H4.06v64H33.24c10.95.0 19.3-7.18 23.29-17.15a45.12 45.12.0 002.38-14.87A45.12 45.12.0 0056.53 24.4C52.84 14.62 44.19 7.25 33.24 7.25zm.43 14.63H30.34a3.44 3.44.0 00-3.44 3.44V53.23a3.44 3.44.0 003.44 3.44h3.33v4.63h-8.3a6.87 6.87.0 01-6.87-6.87V24.12a6.87 6.87.0 016.87-6.87h8.3zM285.51 6.06c-17.05.0-30.88 10.28-30.88 33.21s13.83 33.21 30.88 33.21 30.88-10.28 30.88-33.21S302.56 6.06 285.51 6.06zm7.59 48.36a6.87 6.87.0 01-6.87 6.87h-8.3V56.67h3.33a3.44 3.44.0 003.44-3.44V25.31a3.44 3.44.0 00-3.44-3.44h-3.33V17.25h8.3a6.87 6.87.0 016.87 6.87zm-53.4-17.56A17.39 17.39.0 00227.31 7.25H195.1v64h32.21a19.44 19.44.0 0012.38-34.44zM211.63 61.29h-6.08l18.68-44h6.08zM177 36.85A17.39 17.39.0 00164.65 7.25H132.43v64h32.21A19.44 19.44.0 00177 36.85zM149 61.29h-6.08l18.68-44h6.08z" style="fill:#fff;fill-opacity:1"/></svg></span><span class="text-uppercase font-weight-bold">Apache Dubbo</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/docs/><span>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/blog/><span class=active>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/blog/2018/08/14/dubbo%E7%9A%84%E6%B3%9B%E5%8C%96%E8%B0%83%E7%94%A8/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/blog/2018/08/14/dubbo%E7%9A%84%E6%B3%9B%E5%8C%96%E8%B0%83%E7%94%A8/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/blog/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Blog</a></li><ul><li class="collapse show" id=blog><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/blog/news/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Articles</a></li><ul><li class="collapse show" id=blognews><a class="td-sidebar-link td-sidebar-link__page" id=m-blog20190826service-test href=/blog/2019/08/26/service-test/>Service test in dubbo admin</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20190811tracing-dubbo-service-with-apache-skywalking href=/blog/2019/08/11/tracing-dubbo-service-with-apache-skywalking/>Use apache skywalking in dubbo</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20190502dubbo-extensible-mechanism-source-code-analysis-part-2 href=/blog/2019/05/02/dubbo-extensible-mechanism-source-code-analysis-part-2/>Dubbo extensible mechanism - part 2</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20190425dubbo-extensible-mechanism-source-code-analysis-part-1 href=/blog/2019/04/25/dubbo-extensible-mechanism-source-code-analysis-part-1/>Dubbo extensible mechanism - part 1</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20190220implementation-background-and-practice-of-dubbo-client-asynchronous-interface href=/blog/2019/02/20/implementation-background-and-practice-of-dubbo-client-asynchronous-interface/>Dubbo Async Client</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20190220implementation-background-and-practice-of-dubbo-server-asynchronous-interface href=/blog/2019/02/20/implementation-background-and-practice-of-dubbo-server-asynchronous-interface/>Dubbo Async Server</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20190117how-to-use-fescar-to-ensure-consistency-between-dubbo-microservices href=/blog/2019/01/17/how-to-use-fescar-to-ensure-consistency-between-dubbo-microservices/>Use Fescar in Dubbo</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20181210the-fifth-dubbo-meetup-has-been-held-in-hangzhou href=/blog/2018/12/10/the-fifth-dubbo-meetup-has-been-held-in-hangzhou/>The fifth Dubbo meetup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20181107dubbo-integrates-with-nacos-to-become-a-registry href=/blog/2018/11/07/dubbo-integrates-with-nacos-to-become-a-registry/>Use Dubbo with Nacos</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20181005introduction-to-the-dubbo-protocol href=/blog/2018/10/05/introduction-to-the-dubbo-protocol/>Introduction to the Dubbo protocol</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180930integrate-dubbo-with-kubernetes href=/blog/2018/09/30/integrate-dubbo-with-kubernetes/>Integrate Dubbo with Kubernetes</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180902how-to-prepare-an-apache-release href=/blog/2018/09/02/how-to-prepare-an-apache-release/>How to prepare an Apache Release</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180902how-to-implement-a-fully-asynchronous-calls-chain-based-on-dubbo href=/blog/2018/09/02/how-to-implement-a-fully-asynchronous-calls-chain-based-on-dubbo/>New Async Call</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180826the-fourth-dubbo-meetup-has-been-held-in-chengdu href=/blog/2018/08/26/the-fourth-dubbo-meetup-has-been-held-in-chengdu/>The fourth Dubbo meetup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180814dubbo-basic-usage-dubbo-consumer-configuration href=/blog/2018/08/14/dubbo-basic-usage-dubbo-consumer-configuration/>Dubbo Consumer Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180814dubbo-several-ways-about-synchronousasynchronous-invoke href=/blog/2018/08/14/dubbo-several-ways-about-synchronous/asynchronous-invoke/>Dubbo Invoke</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180814dubbo-basic-usage-dubbo-provider-configuration href=/blog/2018/08/14/dubbo-basic-usage-dubbo-provider-configuration/>Dubbo Provider Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180814manipulating-services-dynamically-via-qos href=/blog/2018/08/14/manipulating-services-dynamically-via-qos/>Dubbo QoS Introduction</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180814source-code-analysis-of-spring-boot-dubbo-app-start-and-stop href=/blog/2018/08/14/source-code-analysis-of-spring-boot-dubbo-app-start-and-stop/>Dubbo start/stop in spring boot</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180814implementation-of-cross-language-calls-by-dubbo2js href=/blog/2018/08/14/implementation-of-cross-language-calls-by-dubbo2.js/>dubbo2.js introduction</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-blog20180814generic-invoke-of-dubbo href=/blog/2018/08/14/generic-invoke-of-dubbo/>Generic invoke</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180810dubbos-load-balance href=/blog/2018/08/10/dubbos-load-balance/>Dubbo's Load Balance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180807use-annotations-in-dubbo href=/blog/2018/08/07/use-annotations-in-dubbo/>Use Annotations In Dubbo</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180807using-zookeeper-in-dubbo href=/blog/2018/08/07/using-zookeeper-in-dubbo/>Using Zookeeper in Dubbo</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180807dubbo-101 href=/blog/2018/08/07/dubbo-101/>Your First Dubbo Demo</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180730the-third-dubbo-meetup-has-been-held-in-shenzhen href=/blog/2018/07/30/the-third-dubbo-meetup-has-been-held-in-shenzhen/>The third Dubbo meetup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180727sentinel-the-flow-sentinel-of-dubbo-services href=/blog/2018/07/27/sentinel-the-flow-sentinel-of-dubbo-services/>Introduce sentinel</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180712tracking-with-pinpoint href=/blog/2018/07/12/tracking-with-pinpoint/>Tracking with Pinpoint</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180701your-first-dubbo-filter href=/blog/2018/07/01/your-first-dubbo-filter/>Your First Dubbo Filter</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180623the-second-dubbo-shanghai-meetup-has-been-held-successfully href=/blog/2018/06/23/the-second-dubbo-shanghai-meetup-has-been-held-successfully/>The second Dubbo meetup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180512the-first-dubbo-meetup-has-been-held-in-beijing href=/blog/2018/05/12/the-first-dubbo-meetup-has-been-held-in-beijing/>The first Dubbo meetup</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180502the-apachecon-na-schedule-has-been-announced href=/blog/2018/05/02/the-apachecon-na-schedule-has-been-announced/>ApacheCon NA</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180425the-gsocgoogle-summer-of-code-2018 href=/blog/2018/04/25/the-gsocgoogle-summer-of-code-2018/>GSoC 2018</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-blog20180422dubbo-roadmap-is-announced-in-qcon-beijing-2018 href=/blog/2018/04/22/dubbo-roadmap-is-announced-in-qcon-beijing-2018/>QCon Beijing 2018</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/blog/releases/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Releases</a></li><ul><li class=collapse id=blogreleases><a class="td-sidebar-link td-sidebar-link__page" id=m-blog20200518past-releases href=/blog/2020/05/18/past-releases/>Past Releases</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/apache/dubbo-website/edit/master/content/en/blog/news/dubbo-generic-invoke.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/apache/dubbo-website/new/master/content/en/blog/news/dubbo-generic-invoke.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i>Create child page</a>
<a href="https://github.com/apache/dubbo-website/issues/new?title=Generic%20invoke%20of%20Dubbo" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/apache/dubbo/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#generic-invoke-through-spring-xml-configuration>Generic invoke through Spring XML configuration</a></li><li><a href=#generic-invoke-through-api-programming>Generic invoke through API programming</a></li><li><a href=#the-case-where-parameters-or-return-values-are-pojos>The case where parameters or return values are POJOs</a></li><li><a href=#generic-interface-implementation>Generic interface implementation</a><ul><li><a href=#implementation-genericservice-on-the-server>Implementation GenericService on the server</a></li><li><a href=#server-exposed-service>Server exposed service</a></li><li><a href=#service-invoke-on-the-consumer>Service invoke on the consumer</a></li></ul></li><li><a href=#others>Others</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><a class="btn btn-lg -bg-orange td-rss-button d-none d-lg-block" href=/blog/news/index.xml target=_blank>RSS <i class="fa fa-rss ml-2"></i></a><div class=td-content><h1>Generic invoke of Dubbo</h1><div class=lead>This article introduces you when and how to use generic invoke of Dubbo.</div><div class="td-byline mb-4"><time datetime=2018-08-14 class=text-muted>Tuesday, August 14, 2018</time></div><h1 id=generic-invoke-of-dubbo>Generic invoke of Dubbo</h1><p>The generic invoke could be considered to be used in the following cases:</p><ul><li>Service test platform</li><li>API service gateway</li></ul><p>The generic invoke is mainly used when the consumer does not have an API interface;
instead of depending the interface jar package, the service call is initiated directly through the GenericService interface, and all POJOs in the parameters and return values are represented by a <code>Map</code>.
Generic invoke does not require attention on the server and can be exposed as normal services.</p><p>Next, let&rsquo;s take a look at how the consumer uses generic invoke for service call.</p><h2 id=generic-invoke-through-spring-xml-configuration>Generic invoke through Spring XML configuration</h2><p>Declare <code>generic="true"</code> in Spring configuration, such as</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml>&#34;userService&#34; interface=&#34;com.alibaba.dubbo.samples.generic.api.IUserService&#34; generic=&#34;true&#34;/&gt;
</code></pre></div><p>Where you need to use it, you can call it by forcing a type cast to GenericService.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>GenericService userService <span style=color:#719e07>=</span> <span style=color:#719e07>(</span>GenericService<span style=color:#719e07>)</span> context<span style=color:#719e07>.</span>getBean<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;userService&#34;</span><span style=color:#719e07>);</span>
<span style=color:#586e75>// primary param and return value
</span><span style=color:#586e75></span>String name <span style=color:#719e07>=</span> <span style=color:#719e07>(</span>String<span style=color:#719e07>)</span> userService<span style=color:#719e07>.</span>$invoke<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;delete&#34;</span><span style=color:#719e07>,</span> <span style=color:#719e07>new</span> String<span style=color:#719e07>[]{</span><span style=color:#dc322f>int</span><span style=color:#719e07>.</span>class<span style=color:#719e07>.</span>getName<span style=color:#719e07>()},</span> <span style=color:#719e07>new</span> Object<span style=color:#719e07>[]{</span>1<span style=color:#719e07>});</span>
System<span style=color:#719e07>.</span>out<span style=color:#719e07>.</span>println<span style=color:#719e07>(</span>name<span style=color:#719e07>);</span>
</code></pre></div><p>Among them,</p><ol><li><p>The interface GenericService has only one method, named $invoke, which takes three arguments, a method name, an array of method parameter types, and an array of parameter values.</p></li><li><p>For arrays of method parameter types</p><p>i. If it is a basic type, such as int or long, use <code>int.class.getName()</code> to get its type;</p><p>ii. If it is a basic type array, such as int[], use <code>int[].class.getName()</code>;</p><p>iii. If it is a POJO, use the full class name directly, such as <code>com.alibaba.dubbo.samples.generic.api.Params</code>.</p></li></ol><h2 id=generic-invoke-through-api-programming>Generic invoke through API programming</h2><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>ApplicationConfig application <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ApplicationConfig<span style=color:#719e07>()</span>ApplicationConfig application <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ApplicationConfig<span style=color:#719e07>();</span>
application<span style=color:#719e07>.</span>setName<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;api-generic-consumer&#34;</span><span style=color:#719e07>);</span>

RegistryConfig registry <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> RegistryConfig<span style=color:#719e07>();</span>
registry<span style=color:#719e07>.</span>setAddress<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;zookeeper://127.0.0.1:2181&#34;</span><span style=color:#719e07>);</span>

application<span style=color:#719e07>.</span>setRegistry<span style=color:#719e07>(</span>registry<span style=color:#719e07>);</span>

ReferenceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;</span> reference <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ReferenceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;();</span>
<span style=color:#586e75>// weak type interface name
</span><span style=color:#586e75></span>reference<span style=color:#719e07>.</span>setInterface<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.generic.api.IUserService&#34;</span><span style=color:#719e07>);</span>
<span style=color:#586e75>// declared as a generalized interface
</span><span style=color:#586e75></span>reference<span style=color:#719e07>.</span>setGeneric<span style=color:#719e07>(</span><span style=color:#cb4b16>true</span><span style=color:#719e07>);</span>

reference<span style=color:#719e07>.</span>setApplication<span style=color:#719e07>(</span>application<span style=color:#719e07>);</span>

<span style=color:#586e75>// replace all interface references with com.alibaba.dubbo.rpc.service.GenericService
</span><span style=color:#586e75></span>GenericService genericService <span style=color:#719e07>=</span> reference<span style=color:#719e07>.</span>get<span style=color:#719e07>();</span>

String name <span style=color:#719e07>=</span> <span style=color:#719e07>(</span>String<span style=color:#719e07>)</span> genericService<span style=color:#719e07>.</span>$invoke<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;delete&#34;</span><span style=color:#719e07>,</span> <span style=color:#719e07>new</span> String<span style=color:#719e07>[]{</span><span style=color:#dc322f>int</span><span style=color:#719e07>.</span>class<span style=color:#719e07>.</span>getName<span style=color:#719e07>()},</span> <span style=color:#719e07>new</span> Object<span style=color:#719e07>[]{</span>1<span style=color:#719e07>});</span>
System<span style=color:#719e07>.</span>out<span style=color:#719e07>.</span>println<span style=color:#719e07>(</span>name<span style=color:#719e07>);</span>
</code></pre></div><p>Through the API, you don&rsquo;t need to configure the service in advance like XML. You can dynamically construct ReferenceConfig; the API is more common than XML.</p><h2 id=the-case-where-parameters-or-return-values-are-pojos>The case where parameters or return values are POJOs</h2><p>For example, the method signature is <code>User get(Params params)</code>, where <code>User</code> has two attributes, id and name, and <code>Params</code> has one attribute, query.</p><p>The following is the code of the consumer:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>String<span style=color:#719e07>[]</span> parameterTypes <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> String<span style=color:#719e07>[]{</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.generic.api.Params&#34;</span><span style=color:#719e07>};</span>
Map<span style=color:#719e07>&lt;</span>String<span style=color:#719e07>,</span> Object<span style=color:#719e07>&gt;</span> params <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> HashMap<span style=color:#719e07>&lt;</span>String<span style=color:#719e07>,</span> Object<span style=color:#719e07>&gt;();</span>
param<span style=color:#719e07>.</span>put<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;class&#34;</span><span style=color:#719e07>,</span> <span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.generic.api.Params&#34;</span><span style=color:#719e07>);</span>
param<span style=color:#719e07>.</span>put<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;query&#34;</span><span style=color:#719e07>,</span> <span style=color:#2aa198>&#34;a=b&#34;</span><span style=color:#719e07>);</span>
Object user <span style=color:#719e07>=</span> userService<span style=color:#719e07>.</span>$invoke<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;get&#34;</span><span style=color:#719e07>,</span> parameterTypes<span style=color:#719e07>,</span> <span style=color:#719e07>new</span> Object<span style=color:#719e07>[]{</span>param<span style=color:#719e07>});</span>
System<span style=color:#719e07>.</span>out<span style=color:#719e07>.</span>println<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;sample one result: &#34;</span> <span style=color:#719e07>+</span> user<span style=color:#719e07>);</span>
</code></pre></div><p>The output of the above code is:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>sample one result: {name=charles, id=1, class=com.alibaba.dubbo.samples.generic.api.User}
</code></pre></div><p>Here, the Dubbo framework will automatically convert the return value from POJO to Map.
It can be seen that the return value <code>user</code> is a HashMap, which stores three k/vs, name, id, and class.</p><h2 id=generic-interface-implementation>Generic interface implementation</h2><p>The implementation of the generic interface is mainly used when the server does not have an API interface. All POJOs in the parameters and return values are represented by Map, which is usually used for framework integration. For example, to implement a generic remote service Mock framework, all service requests can be handled by implementing the interface GenericService.</p><h3 id=implementation-genericservice-on-the-server>Implementation GenericService on the server</h3><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#268bd2>public</span> <span style=color:#268bd2>class</span> <span style=color:#268bd2>GenericServiceImpl</span> <span style=color:#268bd2>implements</span> GenericService <span style=color:#719e07>{</span>
    <span style=color:#268bd2>@Override</span>
    <span style=color:#268bd2>public</span> Object <span style=color:#268bd2>$invoke</span><span style=color:#719e07>(</span>String method<span style=color:#719e07>,</span> String<span style=color:#719e07>[]</span> parameterTypes<span style=color:#719e07>,</span> Object<span style=color:#719e07>[]</span> args<span style=color:#719e07>)</span> <span style=color:#268bd2>throws</span> GenericException <span style=color:#719e07>{</span>
        <span style=color:#719e07>if</span> <span style=color:#719e07>(</span>method<span style=color:#719e07>.</span>equals<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;hi&#34;</span><span style=color:#719e07>))</span> <span style=color:#719e07>{</span>
            <span style=color:#719e07>return</span> <span style=color:#2aa198>&#34;hi, &#34;</span> <span style=color:#719e07>+</span> args<span style=color:#719e07>[</span>0<span style=color:#719e07>];</span>
        <span style=color:#719e07>}</span> <span style=color:#719e07>else</span> <span style=color:#719e07>if</span> <span style=color:#719e07>(</span>method<span style=color:#719e07>.</span>equals<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;hello&#34;</span><span style=color:#719e07>))</span> <span style=color:#719e07>{</span>
            <span style=color:#719e07>return</span> <span style=color:#2aa198>&#34;hello, &#34;</span> <span style=color:#719e07>+</span> args<span style=color:#719e07>[</span>0<span style=color:#719e07>];</span>
        <span style=color:#719e07>}</span>

        <span style=color:#719e07>return</span> <span style=color:#2aa198>&#34;welcome&#34;</span><span style=color:#719e07>;</span>
    <span style=color:#719e07>}</span>
<span style=color:#719e07>}</span>
</code></pre></div><h3 id=server-exposed-service>Server exposed service</h3><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>ApplicationConfig application <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ApplicationConfig<span style=color:#719e07>();</span>
application<span style=color:#719e07>.</span>setName<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;api-generic-provider&#34;</span><span style=color:#719e07>);</span>

RegistryConfig registry <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> RegistryConfig<span style=color:#719e07>();</span>
registry<span style=color:#719e07>.</span>setAddress<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;zookeeper://127.0.0.1:2181&#34;</span><span style=color:#719e07>);</span>

application<span style=color:#719e07>.</span>setRegistry<span style=color:#719e07>(</span>registry<span style=color:#719e07>);</span>

GenericService genericService <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> GenericServiceImpl<span style=color:#719e07>();</span>

ServiceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;</span> service <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ServiceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;();</span>
service<span style=color:#719e07>.</span>setApplication<span style=color:#719e07>(</span>application<span style=color:#719e07>);</span>
service<span style=color:#719e07>.</span>setInterface<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.generic.api.HelloService&#34;</span><span style=color:#719e07>);</span>
service<span style=color:#719e07>.</span>setRef<span style=color:#719e07>(</span>genericService<span style=color:#719e07>);</span>
service<span style=color:#719e07>.</span>export<span style=color:#719e07>();</span>

ServiceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;</span> service2 <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ServiceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;();</span>
service2<span style=color:#719e07>.</span>setApplication<span style=color:#719e07>(</span>application<span style=color:#719e07>);</span>
service2<span style=color:#719e07>.</span>setInterface<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;com.alibaba.dubbo.samples.generic.api.HiService&#34;</span><span style=color:#719e07>);</span>
service2<span style=color:#719e07>.</span>setRef<span style=color:#719e07>(</span>genericService<span style=color:#719e07>);</span>
service2<span style=color:#719e07>.</span>export<span style=color:#719e07>();</span>
</code></pre></div><p>Similarly, you can expose the service using XML configuration; in this case, the server does not depend on the two interfaces HiService and HelloService.</p><h3 id=service-invoke-on-the-consumer>Service invoke on the consumer</h3><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>ApplicationConfig application <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ApplicationConfig<span style=color:#719e07>();</span>
application<span style=color:#719e07>.</span>setName<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;api-generic-consumer&#34;</span><span style=color:#719e07>);</span>

RegistryConfig registry <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> RegistryConfig<span style=color:#719e07>();</span>
registry<span style=color:#719e07>.</span>setAddress<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;zookeeper://127.0.0.1:2181&#34;</span><span style=color:#719e07>);</span>

application<span style=color:#719e07>.</span>setRegistry<span style=color:#719e07>(</span>registry<span style=color:#719e07>);</span>

ReferenceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;</span> reference <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ReferenceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;();</span>
<span style=color:#586e75>// weak type interface name
</span><span style=color:#586e75></span>reference<span style=color:#719e07>.</span>setInterface<span style=color:#719e07>(</span>HiService<span style=color:#719e07>.</span>class<span style=color:#719e07>);</span>
reference<span style=color:#719e07>.</span>setApplication<span style=color:#719e07>(</span>application<span style=color:#719e07>);</span>

HiService hiService <span style=color:#719e07>=</span> <span style=color:#719e07>(</span>HiService<span style=color:#719e07>)</span> reference<span style=color:#719e07>.</span>get<span style=color:#719e07>();</span>
System<span style=color:#719e07>.</span>out<span style=color:#719e07>.</span>println<span style=color:#719e07>(</span>hiService<span style=color:#719e07>.</span>hi<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;dubbo&#34;</span><span style=color:#719e07>));</span>

ReferenceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;</span> reference2 <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ReferenceConfig<span style=color:#719e07>&lt;</span>GenericService<span style=color:#719e07>&gt;();</span>
<span style=color:#586e75>// weak type interface name
</span><span style=color:#586e75></span>reference2<span style=color:#719e07>.</span>setInterface<span style=color:#719e07>(</span>HelloService<span style=color:#719e07>.</span>class<span style=color:#719e07>);</span>
reference2<span style=color:#719e07>.</span>setApplication<span style=color:#719e07>(</span>application<span style=color:#719e07>);</span>

HelloService helloService <span style=color:#719e07>=</span> <span style=color:#719e07>(</span>HelloService<span style=color:#719e07>)</span> reference2<span style=color:#719e07>.</span>get<span style=color:#719e07>();</span>
System<span style=color:#719e07>.</span>out<span style=color:#719e07>.</span>println<span style=color:#719e07>(</span>helloService<span style=color:#719e07>.</span>hello<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;community&#34;</span><span style=color:#719e07>));</span>
</code></pre></div><p>Similarly, the consumer can also reference the service using an XML configuration and then make the call. Here you can see that the calling method is a normal service call, not a generic call. Of course, it is also possible to use generic calls.</p><p>So far, a simple service Mock platform has been successfully launched!</p><h2 id=others>Others</h2><ul><li>The generic invoke and generic interface implementations introduced in this article are all based on the native Dubbo protocol. Prior to version 2.6.2, other protocols such as http/hessian don&rsquo;t support generic invoke. Version 2.6.3 will support the generic invoke of these two protocols.</li><li>The relevant sample codes mentioned in this article can be found in dubbo-samples: <a href=https://github.com/apache/dubbo-samples/tree/master/java/dubbo-samples-generic>https://github.com/apache/dubbo-samples/tree/master/java/dubbo-samples-generic</a></li></ul><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/blog/2018/08/10/dubbos-load-balance/ class="btn btn-primary"><span class=mr-1>←</span> Previous</a></li><a href=/blog/2018/08/14/implementation-of-cross-language-calls-by-dubbo2.js/ class="btn btn-primary">Next <span class=ml-1>→</span></a></li></ul></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Dubbo mailing list archive" aria-label="Dubbo mailing list archive"><a class=text-white target=_blank rel="noopener noreferrer" href=https://lists.apache.org/list.html?dev@dubbo.apache.org><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/ApacheDubbo><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/apache/dubbo><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Subscribe to mailing list" aria-label="Subscribe to mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=mailto://dev-subscribe@dubbo.apache.org><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2020 The Apache Software Foundation. Apache and the Apache feather logo are trademarks of The Apache Software Foundation. All Rights Reserved</small></div></div></div></footer><div class="row pt-2 pb-2"><div class="container-fluid mx-sm-5"><div class=text-center id=my-footer><img style=float:left src=/imgs/apache_logo.png><ul><li><a href=http://www.apache.org>Foundation</a></li><li><a href=http://www.apache.org/licenses/>License</a></li><li><a href=https://www.apache.org/security/>Security</a></li><li><a href=http://www.apache.org/events/current-event>Events</a></li><li><a href=http://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li><li><a href=http://www.apache.org/foundation/thanks.html>Thanks</a></li></ul></div></div></div></div><script src=/js/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.b5fc1b29d2465835844254bd4d804738eaf24c0cec53009b4c6899989be55a47.js integrity="sha256-tfwbKdJGWDWEQlS9TYBHOOryTAzsUwCbTGiZmJvlWkc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><script>docsearch({apiKey:'38eff7758162fbf70f2b8484932e62ae',indexName:'apache_dubbo',inputSelector:'.td-search-input',debug:false,});</script></body></html>