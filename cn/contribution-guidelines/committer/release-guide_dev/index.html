<!doctype html><html lang=cn class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.97.3"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/incubator-dubbo-website/favicons/favicon.ico><link rel=apple-touch-icon href=/incubator-dubbo-website/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/incubator-dubbo-website/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/incubator-dubbo-website/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/incubator-dubbo-website/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/incubator-dubbo-website/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/incubator-dubbo-website/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/incubator-dubbo-website/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/incubator-dubbo-website/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/incubator-dubbo-website/favicons/android-192x192.png sizes=192x192><title>如何准备 Apache Release | Apache Dubbo</title><meta property="og:title" content="如何准备 Apache Release"><meta property="og:description" content="理解 Apache 发布的内容和流程 总的来说，Source Release 是 Apache 关注的重点，也是发布的必须内容；而 Binary Release 是可选项，Dubbo 可以选择是否发布二进制包到 Apache 仓库或者发布到 Maven 中央仓库。
请参考以下链接，找到更多关于 ASF 的发布指南:
 Apache Release Guide Apache Release Policy Maven Release Info  本地构建环境准备 主要包括签名工具、Maven 仓库认证相关准备
安装GPG 详细文档请参见这里, Mac OS 下配置如下
$ brew install gpg $ gpg --version #检查版本，应该为2.x 用gpg生成key 根据提示，生成 key
$ gpg --full-gen-key gpg (GnuPG) 2.0.12; Copyright (C) 2009 Free Software Foundation, Inc. This is free software: you are free to change and redistribute it."><meta property="og:type" content="article"><meta property="og:url" content="https://chickenlj.github.io/incubator-dubbo-website/cn/contribution-guidelines/committer/release-guide_dev/"><meta property="article:section" content="contribution-guidelines"><meta property="article:modified_time" content="2022-04-25T09:40:39+08:00"><meta property="og:site_name" content="Apache Dubbo"><meta itemprop=name content="如何准备 Apache Release"><meta itemprop=description content="理解 Apache 发布的内容和流程 总的来说，Source Release 是 Apache 关注的重点，也是发布的必须内容；而 Binary Release 是可选项，Dubbo 可以选择是否发布二进制包到 Apache 仓库或者发布到 Maven 中央仓库。
请参考以下链接，找到更多关于 ASF 的发布指南:
 Apache Release Guide Apache Release Policy Maven Release Info  本地构建环境准备 主要包括签名工具、Maven 仓库认证相关准备
安装GPG 详细文档请参见这里, Mac OS 下配置如下
$ brew install gpg $ gpg --version #检查版本，应该为2.x 用gpg生成key 根据提示，生成 key
$ gpg --full-gen-key gpg (GnuPG) 2.0.12; Copyright (C) 2009 Free Software Foundation, Inc. This is free software: you are free to change and redistribute it."><meta itemprop=dateModified content="2022-04-25T09:40:39+08:00"><meta itemprop=wordCount content="1214"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="如何准备 Apache Release"><meta name=twitter:description content="理解 Apache 发布的内容和流程 总的来说，Source Release 是 Apache 关注的重点，也是发布的必须内容；而 Binary Release 是可选项，Dubbo 可以选择是否发布二进制包到 Apache 仓库或者发布到 Maven 中央仓库。
请参考以下链接，找到更多关于 ASF 的发布指南:
 Apache Release Guide Apache Release Policy Maven Release Info  本地构建环境准备 主要包括签名工具、Maven 仓库认证相关准备
安装GPG 详细文档请参见这里, Mac OS 下配置如下
$ brew install gpg $ gpg --version #检查版本，应该为2.x 用gpg生成key 根据提示，生成 key
$ gpg --full-gen-key gpg (GnuPG) 2.0.12; Copyright (C) 2009 Free Software Foundation, Inc. This is free software: you are free to change and redistribute it.">
<link rel=preload href=/incubator-dubbo-website/scss/main.min.852d6009d14696a1459da05640f22ebf287239f9f7b676f2d2402427b3ea980d.css as=style><link href=/incubator-dubbo-website/scss/main.min.852d6009d14696a1459da05640f22ebf287239f9f7b676f2d2402427b3ea980d.css rel=stylesheet integrity><script src=/js/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script>
<link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/incubator-dubbo-website/cn/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 321.39 78.54"><title id="title19">DUBBO LOGO</title><path class="cls-1" d="M68.46 50.38c0 14.06 11.39 22.11 25.45 22.11s25.45-8.05 25.45-22.11V7.25H68.46zm21.24-28h8.6V31H89.7zm0 22.25h8.6v8.6H89.7zM33.24 7.25H4.06v64H33.24c10.95.0 19.3-7.18 23.29-17.15a45.12 45.12.0 002.38-14.87A45.12 45.12.0 0056.53 24.4C52.84 14.62 44.19 7.25 33.24 7.25zm.43 14.63H30.34a3.44 3.44.0 00-3.44 3.44V53.23a3.44 3.44.0 003.44 3.44h3.33v4.63h-8.3a6.87 6.87.0 01-6.87-6.87V24.12a6.87 6.87.0 016.87-6.87h8.3zM285.51 6.06c-17.05.0-30.88 10.28-30.88 33.21s13.83 33.21 30.88 33.21 30.88-10.28 30.88-33.21S302.56 6.06 285.51 6.06zm7.59 48.36a6.87 6.87.0 01-6.87 6.87h-8.3V56.67h3.33a3.44 3.44.0 003.44-3.44V25.31a3.44 3.44.0 00-3.44-3.44h-3.33V17.25h8.3a6.87 6.87.0 016.87 6.87zm-53.4-17.56A17.39 17.39.0 00227.31 7.25H195.1v64h32.21a19.44 19.44.0 0012.38-34.44zM211.63 61.29h-6.08l18.68-44h6.08zM177 36.85A17.39 17.39.0 00164.65 7.25H132.43v64h32.21A19.44 19.44.0 00177 36.85zM149 61.29h-6.08l18.68-44h6.08z" style="fill:#fff;fill-opacity:1"/></svg></span><span class="text-uppercase font-weight-bold">Apache Dubbo</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/incubator-dubbo-website/cn/facade-docs/><span>文档</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/incubator-dubbo-website/cn/download/><span>下载</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/incubator-dubbo-website/cn/community/><span>社区</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/incubator-dubbo-website/cn/contribution-guidelines/><span class=active>贡献指南</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/incubator-dubbo-website/cn/notices/><span>公告</span></a></li><li class="nav-item dropdown mr-4 d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/incubator-dubbo-website/en/contribution-guidelines/committer/release-guide_dev/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><aside class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002; Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>中文</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/incubator-dubbo-website/en/contribution-guidelines/committer/release-guide_dev/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3 ul-0"><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-incubator-dubbo-websitecncontribution-guidelines-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/ title="为 Dubbo 做贡献" class="align-left pl-0 td-sidebar-link td-sidebar-link__section tree-root" id=m-incubator-dubbo-websitecncontribution-guidelines><span>贡献指南</span></a><ul class=ul-1><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child" id=m-incubator-dubbo-websitecncontribution-guidelinescontributor-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-incubator-dubbo-websitecncontribution-guidelinescontributor><span>Contributor 指南</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-incubator-dubbo-websitecncontribution-guidelinescontributorbecome-a-committer_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/become-a-committer_dev/ title="如何成为 Dubbo Committer" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescontributorbecome-a-committer_dev><span>成为 Committer</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-incubator-dubbo-websitecncontribution-guidelinescontributorcla-signing-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/cla-signing-guide_dev/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescontributorcla-signing-guide_dev><span>CLA 签署向导</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-incubator-dubbo-websitecncontribution-guidelinescontributornew-contributor-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/new-contributor-guide_dev/ title=新贡献者向导 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescontributornew-contributor-guide_dev><span>新手向导</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-incubator-dubbo-websitecncontribution-guidelinescontributormailing-list-subscription-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/mailing-list-subscription-guide_dev/ title=邮件列表订阅向导 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescontributormailing-list-subscription-guide_dev><span>邮件组向导</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-incubator-dubbo-websitecncontribution-guidelinescontributorreporting-security-issues_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/reporting-security-issues_dev/ title=报告安全问题 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescontributorreporting-security-issues_dev><span>反馈漏洞</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-incubator-dubbo-websitecncontribution-guidelinescontributorsoftware-donation-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/software-donation-guide_dev/ title=软件捐献向导 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescontributorsoftware-donation-guide_dev><span>捐献向导</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-incubator-dubbo-websitecncontribution-guidelinescontributordubbo-extension-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/dubbo-extension-guide_dev/ title="扩展 Dubbo 向导" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescontributordubbo-extension-guide_dev><span>扩展 Dubbo</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child collapse" id=m-incubator-dubbo-websitecncontribution-guidelinescontributortest-coverage-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/contributor/test-coverage-guide_dev/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescontributortest-coverage-guide_dev><span>测试覆盖率向导</span></a></li></ul></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section with-child active-path" id=m-incubator-dubbo-websitecncontribution-guidelinescommitter-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/committer/ class="align-left pl-0 td-sidebar-link td-sidebar-link__section" id=m-incubator-dubbo-websitecncontribution-guidelinescommitter><span>Committer 指南</span></a><ul class="ul-2 foldable"><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-incubator-dubbo-websitecncontribution-guidelinescommitternew-committer-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/committer/new-committer-guide_dev/ title="Apache 提交者注册流程" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescommitternew-committer-guide_dev><span>注册流程</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child active-path" id=m-incubator-dubbo-websitecncontribution-guidelinescommitterrelease-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/committer/release-guide_dev/ title="如何准备 Apache Release" class="align-left pl-0 active td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescommitterrelease-guide_dev><span class=td-sidebar-nav-active-item>发版准备</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-incubator-dubbo-websitecncontribution-guidelinescommitterwebsite-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/committer/website-guide_dev/ class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescommitterwebsite-guide_dev><span>网站向导</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-incubator-dubbo-websitecncontribution-guidelinescommitterlabel-an-issue-guide_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/committer/label-an-issue-guide_dev/ title=给问题打标签 class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescommitterlabel-an-issue-guide_dev><span>问题标签</span></a></li><li class="td-sidebar-nav__section-title td-sidebar-nav__section without-child" id=m-incubator-dubbo-websitecncontribution-guidelinescommitterapache-dubbo-page_dev-li><a href=/incubator-dubbo-website/cn/contribution-guidelines/committer/apache-dubbo-page_dev/ title="官方 Dubbo 主页的维护" class="align-left pl-0 td-sidebar-link td-sidebar-link__page" id=m-incubator-dubbo-websitecncontribution-guidelinescommitterapache-dubbo-page_dev><span>官方主页</span></a></li></ul></li></ul></li></ul></nav></div></aside><aside class="d-none d-xl-block col-xl-2 td-sidebar-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"></div><div class=td-toc><nav id=TableOfContents><ul><li><a href=#理解-apache-发布的内容和流程>理解 Apache 发布的内容和流程</a></li><li><a href=#本地构建环境准备>本地构建环境准备</a><ul><li><a href=#安装gpg>安装GPG</a></li><li><a href=#用gpg生成key>用gpg生成key</a></li><li><a href=#查看-key-id>查看 key id</a></li><li><a href=#设置-apache-中央仓库>设置 Apache 中央仓库</a></li></ul></li><li><a href=#打包上传>打包&上传</a><ul><li><a href=#准备分支>准备分支</a></li><li><a href=#编译打包>编译打包</a></li><li><a href=#用maven-release-plugin发布-废弃参考后一步>用maven-release-plugin发布 (<code>废弃</code>，参考后一步)</a></li><li><a href=#使用mvn-deploy进行deploy>使用mvn deploy进行deploy</a></li></ul></li><li><a href=#准备apache发布>准备Apache发布</a></li><li><a href=#验证release-candidates>验证Release Candidates</a><ul><li><a href=#检查签名和hash等信息>检查签名和hash等信息</a></li><li><a href=#检查源码包的文件内容>检查源码包的文件内容</a></li><li><a href=#检查三方依赖的合规性>检查三方依赖的合规性</a></li><li><a href=#检查二进制包的文件内容>检查二进制包的文件内容</a></li></ul></li><li><a href=#进入投票>进入投票</a></li><li><a href=#正式发布>正式发布</a></li><li><a href=#完成maven-convenient-binary发布可选>完成Maven Convenient Binary发布（可选）</a></li><li><a href=#faq>FAQ</a><ul><li></li></ul></li></ul></nav></div></aside><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=https://chickenlj.github.io/incubator-dubbo-website/cn/contribution-guidelines/>贡献指南</a></li><li class=breadcrumb-item><a href=https://chickenlj.github.io/incubator-dubbo-website/cn/contribution-guidelines/committer/>Committer 指南</a></li><li class="breadcrumb-item active" aria-current=page><a href=https://chickenlj.github.io/incubator-dubbo-website/cn/contribution-guidelines/committer/release-guide_dev/>发版准备</a></li></ol></nav><div class=td-content><h1>如何准备 Apache Release</h1><header class=article-meta></header><h2 id=理解-apache-发布的内容和流程>理解 Apache 发布的内容和流程</h2><p>总的来说，Source Release 是 Apache 关注的重点，也是发布的必须内容；而 Binary Release 是可选项，Dubbo 可以选择是否发布二进制包到 Apache 仓库或者发布到 Maven 中央仓库。</p><p>请参考以下链接，找到更多关于 ASF 的发布指南:</p><ul><li><a href=http://www.apache.org/dev/release-publishing>Apache Release Guide</a></li><li><a href=http://www.apache.org/dev/release.html>Apache Release Policy</a></li><li><a href=http://www.apache.org/dev/publishing-maven-artifacts.html>Maven Release Info</a></li></ul><h2 id=本地构建环境准备>本地构建环境准备</h2><p>主要包括签名工具、Maven 仓库认证相关准备</p><h3 id=安装gpg>安装GPG</h3><p>详细文档请参见<a href=https://www.gnupg.org/download/index.html>这里</a>, Mac OS 下配置如下</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ brew install gpg
</span></span><span style=display:flex><span>$ gpg --version <span style=color:#586e75>#检查版本，应该为2.x</span>
</span></span></code></pre></div><h3 id=用gpg生成key>用gpg生成key</h3><p>根据提示，生成 key</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ gpg --full-gen-key
</span></span><span style=display:flex><span>gpg <span style=color:#719e07>(</span>GnuPG<span style=color:#719e07>)</span> 2.0.12; Copyright <span style=color:#719e07>(</span>C<span style=color:#719e07>)</span> <span style=color:#2aa198>2009</span> Free Software Foundation, Inc.
</span></span><span style=display:flex><span>This is free software: you are free to change and redistribute it.
</span></span><span style=display:flex><span>There is NO WARRANTY, to the extent permitted by law.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Please <span style=color:#719e07>select</span> what kind of key you want:
</span></span><span style=display:flex><span>  <span style=color:#719e07>(</span>1<span style=color:#719e07>)</span> RSA and RSA <span style=color:#719e07>(</span>default<span style=color:#719e07>)</span>
</span></span><span style=display:flex><span>  <span style=color:#719e07>(</span>2<span style=color:#719e07>)</span> DSA and Elgamal
</span></span><span style=display:flex><span>  <span style=color:#719e07>(</span>3<span style=color:#719e07>)</span> DSA <span style=color:#719e07>(</span>sign only<span style=color:#719e07>)</span>
</span></span><span style=display:flex><span>  <span style=color:#719e07>(</span>4<span style=color:#719e07>)</span> RSA <span style=color:#719e07>(</span>sign only<span style=color:#719e07>)</span>
</span></span><span style=display:flex><span>Your selection? <span style=color:#2aa198>1</span>
</span></span><span style=display:flex><span>RSA keys may be between <span style=color:#2aa198>1024</span> and <span style=color:#2aa198>4096</span> bits long.
</span></span><span style=display:flex><span>What keysize <span style=color:#719e07>do</span> you want? <span style=color:#719e07>(</span>2048<span style=color:#719e07>)</span> <span style=color:#2aa198>4096</span>
</span></span><span style=display:flex><span>Requested keysize is <span style=color:#2aa198>4096</span> bits
</span></span><span style=display:flex><span>Please specify how long the key should be valid.
</span></span><span style=display:flex><span>        <span style=color:#268bd2>0</span> <span style=color:#719e07>=</span> key does not expire
</span></span><span style=display:flex><span>     &lt;n&gt;  <span style=color:#719e07>=</span> key expires in n days
</span></span><span style=display:flex><span>     &lt;n&gt;w <span style=color:#719e07>=</span> key expires in n weeks
</span></span><span style=display:flex><span>     &lt;n&gt;m <span style=color:#719e07>=</span> key expires in n months
</span></span><span style=display:flex><span>     &lt;n&gt;y <span style=color:#719e07>=</span> key expires in n years
</span></span><span style=display:flex><span>Key is valid <span style=color:#719e07>for</span>? <span style=color:#719e07>(</span>0<span style=color:#719e07>)</span> 
</span></span><span style=display:flex><span>Key does not expire at all
</span></span><span style=display:flex><span>Is this correct? <span style=color:#719e07>(</span>y/N<span style=color:#719e07>)</span> y
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>GnuPG needs to construct a user ID to identify your key.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Real name: Robert Burrell Donkin
</span></span><span style=display:flex><span>Email address: rdonkin@apache.org
</span></span><span style=display:flex><span>Comment: CODE SIGNING KEY
</span></span><span style=display:flex><span>You selected this USER-ID:
</span></span><span style=display:flex><span>   <span style=color:#2aa198>&#34;Robert Burrell Donkin (CODE SIGNING KEY) &lt;rdonkin@apache.org&gt;&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Change <span style=color:#719e07>(</span>N<span style=color:#719e07>)</span>ame, <span style=color:#719e07>(</span>C<span style=color:#719e07>)</span>omment, <span style=color:#719e07>(</span>E<span style=color:#719e07>)</span>mail or <span style=color:#719e07>(</span>O<span style=color:#719e07>)</span>kay/<span style=color:#719e07>(</span>Q<span style=color:#719e07>)</span>uit? O
</span></span><span style=display:flex><span>You need a Passphrase to protect your secret key. <span style=color:#586e75># 填入密码，以后打包过程中会经常用到</span>
</span></span></code></pre></div><h3 id=查看-key-id>查看 key id</h3><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ gpg --list-keys
</span></span><span style=display:flex><span>pub   rsa4096/28681CB1 2018-04-26 <span style=color:#586e75># 28681CB1就是key id</span>
</span></span><span style=display:flex><span>uid       <span style=color:#719e07>[</span>ultimate<span style=color:#719e07>]</span> liujun <span style=color:#719e07>(</span>apache-dubbo<span style=color:#719e07>)</span> &lt;liujun@apache.org&gt;
</span></span><span style=display:flex><span>sub   rsa4096/D3D6984B 2018-04-26
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75># 通过key id发送public key到keyserver</span>
</span></span><span style=display:flex><span>$ gpg --keyserver pgpkeys.mit.edu --send-key 28681CB1
</span></span><span style=display:flex><span><span style=color:#586e75># 其中，pgpkeys.mit.edu为随意挑选的keyserver，keyserver列表为：https://sks-keyservers.net/status/，为相互之间是自动同步的，选任意一个都可以。</span>
</span></span></code></pre></div><p>如果有多个 public key，设置默认 key。修改<code>~/.gnupg/gpg.conf</code></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#586e75># If you have more than 1 secret key in your keyring, you may want to</span>
</span></span><span style=display:flex><span><span style=color:#586e75># uncomment the following option and set your preferred keyid.</span>
</span></span><span style=display:flex><span>default-key 28681CB1
</span></span></code></pre></div><p>如果有多个 public key, 也可以删除无用的 key：</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#586e75>### 先删除私钥，再删除公钥</span>
</span></span><span style=display:flex><span>$ gpg --yes --delete-secret-keys shenglicao2@gmail.com   <span style=color:#586e75>###老的私钥，指明邮箱即可</span>
</span></span><span style=display:flex><span>$ gpg --delete-keys 1808C6444C781C0AEA0AAD4C4D6A8007D20DB8A4
</span></span></code></pre></div><blockquote><p>PS: 最新版本经过实测，本地没有gpg.conf这个文件，因此如果在执行过程中遇到签名失败，可以参考这个文章：https://blog.csdn.net/wenbo20182/article/details/72850810 或 <a href=https://d.sb/2016/11/gpg-inappropriate-ioctl-for-device-errors>https://d.sb/2016/11/gpg-inappropriate-ioctl-for-device-errors</a></p></blockquote><p>由于公钥服务器没有检查机制，任何人都可以用你的名义上传公钥，所以没有办法保证服务器上的公钥的可靠性。
通常，你可以在网站上公布一个公钥指纹，让其他人核对下载到的公钥是否为真。</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span><span style=color:#586e75># fingerprint参数生成公钥指纹：</span>
</span></span><span style=display:flex><span>$ gpg --fingerprint liujun
</span></span><span style=display:flex><span>pub   rsa4096 2019-10-17 <span style=color:#719e07>[</span>SC<span style=color:#719e07>]</span>
</span></span><span style=display:flex><span>      <span style=color:#2aa198>1376</span> A2FF 67E4 C477 <span style=color:#2aa198>5739</span>  09BD 7DB6 <span style=color:#2aa198>8550</span> D366 E4C0
</span></span><span style=display:flex><span>uid           <span style=color:#719e07>[</span>ultimate<span style=color:#719e07>]</span> liujun <span style=color:#719e07>(</span>CODE SIGNING KEY<span style=color:#719e07>)</span> &lt;liujun@apache.org&gt;
</span></span><span style=display:flex><span>sub   rsa4096 2019-10-17 <span style=color:#719e07>[</span>E<span style=color:#719e07>]</span>
</span></span></code></pre></div><p>登录 <a href=https://id.apache.org>https://id.apache.org</a>, 将上面的 fingerprint （即 1376 A2FF 67E4 C477 5739 09BD 7DB6 8550 D366 E4C0）
粘贴到自己的用户信息中 OpenPGP Public Key Primary Fingerprint</p><h3 id=设置-apache-中央仓库>设置 Apache 中央仓库</h3><p>Dubbo 项目的父 pom 为 Apache pom(2.7.0 以上版本需要，2.6.x 发布版本不需要此操作)</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#268bd2>&lt;parent&gt;</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>&lt;groupId&gt;</span>org.apache<span style=color:#268bd2>&lt;/groupId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>&lt;artifactId&gt;</span>apache<span style=color:#268bd2>&lt;/artifactId&gt;</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>&lt;version&gt;</span>19<span style=color:#268bd2>&lt;/version&gt;</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>&lt;/parent&gt;</span>
</span></span></code></pre></div><p>添加以下内容到 .m2/settings.xml
所有密码请使用 <a href=http://maven.apache.org/guides/mini/guide-encryption.html>maven-encryption-plugin</a>加密后再填入</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=display:flex><span><span style=color:#268bd2>&lt;settings&gt;</span>
</span></span><span style=display:flex><span>...
</span></span><span style=display:flex><span> <span style=color:#268bd2>&lt;servers&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#586e75>&lt;!-- To publish a snapshot of some part of Maven --&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#268bd2>&lt;server&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#268bd2>&lt;id&gt;</span>apache.snapshots.https<span style=color:#268bd2>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#268bd2>&lt;username&gt;</span> <span style=color:#586e75>&lt;!-- YOUR APACHE LDAP USERNAME --&gt;</span> <span style=color:#268bd2>&lt;/username&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#268bd2>&lt;password&gt;</span> <span style=color:#586e75>&lt;!-- YOUR APACHE LDAP PASSWORD (encrypted) --&gt;</span> <span style=color:#268bd2>&lt;/password&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#268bd2>&lt;/server&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#586e75>&lt;!-- To stage a release of some part of Maven --&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#268bd2>&lt;server&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#268bd2>&lt;id&gt;</span>apache.releases.https<span style=color:#268bd2>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#268bd2>&lt;username&gt;</span> <span style=color:#586e75>&lt;!-- YOUR APACHE LDAP USERNAME --&gt;</span> <span style=color:#268bd2>&lt;/username&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#268bd2>&lt;password&gt;</span> <span style=color:#586e75>&lt;!-- YOUR APACHE LDAP PASSWORD (encrypted) --&gt;</span> <span style=color:#268bd2>&lt;/password&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#268bd2>&lt;/server&gt;</span>
</span></span><span style=display:flex><span>  ...
</span></span><span style=display:flex><span>     <span style=color:#586e75>&lt;!-- gpg passphrase used when generate key --&gt;</span>
</span></span><span style=display:flex><span>    <span style=color:#268bd2>&lt;server&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#268bd2>&lt;id&gt;</span>gpg.passphrase<span style=color:#268bd2>&lt;/id&gt;</span>
</span></span><span style=display:flex><span>     <span style=color:#268bd2>&lt;passphrase&gt;</span><span style=color:#586e75>&lt;!-- yourKeyPassword --&gt;</span><span style=color:#268bd2>&lt;/passphrase&gt;</span>
</span></span><span style=display:flex><span>   <span style=color:#268bd2>&lt;/server&gt;</span>
</span></span><span style=display:flex><span> <span style=color:#268bd2>&lt;/servers&gt;</span>
</span></span><span style=display:flex><span><span style=color:#268bd2>&lt;/settings&gt;</span>
</span></span></code></pre></div><h2 id=打包上传>打包&上传</h2><h3 id=准备分支>准备分支</h3><p>从主干分支拉取新分支作为发布分支，如现在要发布$<code>{release_version}</code>版本，则从2.6.x拉出新分支<code>${release_version}-release</code>，此后<code>${release_version}</code> Release Candidates涉及的修改及打标签等都在<code>${release_version}-release</code>分支进行，最终发布完成后合入主干分支。</p><h3 id=编译打包>编译打包</h3><p>首先，在<code>${release_version}-release</code>分支验证maven组件打包、source源码打包、签名等是否都正常工作。<strong>2.6.x记得要使用1.6进行编译打包</strong></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mvn clean install -Prelease
</span></span><span style=display:flex><span>$ mvn deploy
</span></span></code></pre></div><p>上述命令将snapshot包推送到maven中央仓库</p><h3 id=用maven-release-plugin发布-废弃参考后一步><del>用maven-release-plugin发布</del> (<code>废弃</code>，参考后一步)</h3><p><del>先用dryRun验证是否ok</del></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mvn release:prepare -Prelease -Darguments<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;-DskipTests&#34;</span> -DautoVersionSubmodules<span style=color:#719e07>=</span><span style=color:#b58900>true</span> -Dusername<span style=color:#719e07>=</span>YOUR GITHUB ID-DdryRun<span style=color:#719e07>=</span><span style=color:#b58900>true</span>
</span></span></code></pre></div><p><del>验证通过后，执行release:prepare</del></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mvn release:clean
</span></span><span style=display:flex><span>$ mvn release:prepare -Prelease -Darguments<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;-DskipTests&#34;</span> -DautoVersionSubmodules<span style=color:#719e07>=</span><span style=color:#b58900>true</span> -Dusername<span style=color:#719e07>=</span>YOUR GITHUB ID -DpushChanges<span style=color:#719e07>=</span><span style=color:#b58900>false</span>
</span></span></code></pre></div><blockquote><p>执行release插件时，如果指定了<code>-DpushChanges=true</code>, 插件会自动提交到远端的GitHub仓库中，此时就需要输入GitHub的密码，注意不是输入web页面的登录密码，而是一个<code>Personal access tokens</code>，获取方式详见<a href=https://help.github.com/articles/creating-a-personal-access-token-for-the-command-line>这里</a></p></blockquote><blockquote><p>这里有一点要注意的是tag， 在执行过程中，需要选择发布的artifactId, 下一个版本artifactId以及发布版本的tag, tag默认的是dubbo-parent-xxxx，需要改成dubbo-xxxx</p></blockquote><p>执行完上述步骤后，你会发现：</p><ol><li><code>source-release.zip</code> 和 <code>bin-release.zip</code>包已经生成在<code>dubbo-distribution</code>目录下，请解压并检查文件是否完整</li><li>本地已经打出相应的tag，同时新增一个commit，名叫<code>[maven-release-plugin] prepare release dubbo-x.x.x</code></li><li>分支版本自动升级为<code>${release_version+1}-SNAPSHOT</code>，同时新增一个commit，名叫<code>[[maven-release-plugin] prepare for next development iteration</code></li></ol><blockquote><p>如果指定了<code>-DpushChanges=true</code>, 则本地提交会自动推送到远端的GitHub仓库。根据经验，建议不要指定为true，请设置为false，待本地检查通过之后再手动提交</p></blockquote><p><del>执行release:perform，做staging发布</del></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mvn -Prelease release:perform -Darguments<span style=color:#719e07>=</span><span style=color:#2aa198>&#34;-DskipTests&#34;</span> -DautoVersionSubmodules<span style=color:#719e07>=</span><span style=color:#b58900>true</span> -Dusername<span style=color:#719e07>=</span>YOUR GITHUB ID
</span></span></code></pre></div><p>此时插件会自动下载远端的tag对应的源码，编译后，将所有Artifacts发布到配置的远程<a href=http://repository.apache.org>maven仓库</a>，处于staging状态。</p><h3 id=使用mvn-deploy进行deploy>使用mvn deploy进行deploy</h3><blockquote><p>要求：maven 3.5+</p></blockquote><p>修改pom文件中的版本号，从2.7.x-SNAPSHOT改为2.7.x， 目前有3个地方需要修改。建议全文搜索。</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ mvn clean install -Prelease
</span></span><span style=display:flex><span>$ mvn deploy -Prelease -DskipTests
</span></span></code></pre></div><p>所有被deploy到远程<a href=http://repository.apache.org>maven仓库</a>的Artifacts都会处于staging状态</p><h4 id=注意点>注意点</h4><ul><li>在deploy执行过程中，有可能因为网络等原因被中断，如果是这样，可以重新开始执行。</li><li>deploy执行到maven仓库的时候，请确认下包的总量是否正确。多次出现了包丢失的情况，特别是dubbo-parent包。</li></ul><h2 id=准备apache发布>准备Apache发布</h2><ol><li><p>准备svn本机环境（Apache使用svn托管项目的发布内容）</p></li><li><p>将dubbo checkout到本地目录</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ svn checkout https://dist.apache.org/repos/dist/dev/dubbo
</span></span><span style=display:flex><span><span style=color:#586e75># 假定本地目录为 ~/apache/dubbo</span>
</span></span></code></pre></div></li><li><p>当前发布版本为${release_version}，新建目录</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ <span style=color:#b58900>cd</span> ~/apache/dubbo <span style=color:#586e75># dubbo svn根目录</span>
</span></span><span style=display:flex><span>$ mkdir <span style=color:#2aa198>${</span><span style=color:#268bd2>release_version</span><span style=color:#2aa198>}</span>
</span></span></code></pre></div></li><li><p>添加public key到<a href=https://dist.apache.org/repos/dist/dev/dubbo/KEYS>KEYS</a>文件并提交到SVN仓库（第一次做发布的人需要做这个操作，具体操作参考KEYS文件里的说明）。KEYS主要是让参与投票的人在本地导入，用来校验sign的正确性</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ <span style=color:#719e07>(</span>gpg --list-sigs &lt;your name&gt; <span style=color:#719e07>&amp;&amp;</span> gpg --armor --export &lt;your name&gt;<span style=color:#719e07>)</span> &gt;&gt; KEYS
</span></span></code></pre></div></li><li><p>拷贝<code>dubbo-distribution/dubbo-apache-release/target</code>下的source相关的包到svn本地仓库<code>dubbo/${release_version}</code></p></li><li><p>生成sha512签名</p><p>针对<code>src.zip</code></p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ shasum -a <span style=color:#2aa198>512</span> apache-dubbo-<span style=color:#2aa198>${</span><span style=color:#268bd2>release_version</span><span style=color:#2aa198>}</span>-src.zip &gt;&gt; apache-dubbo-<span style=color:#2aa198>${</span><span style=color:#268bd2>release_version</span><span style=color:#2aa198>}</span>-src.zip.sha512
</span></span></code></pre></div><p>针对<code>bin-release.zip</code>，需要增加<code>-b</code>参数，表明是一个二进制文件</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ shasum -b -a <span style=color:#2aa198>512</span> apache-dubbo-<span style=color:#2aa198>${</span><span style=color:#268bd2>release_version</span><span style=color:#2aa198>}</span>-bin.zip &gt;&gt; apache-dubbo-<span style=color:#2aa198>${</span><span style=color:#268bd2>release_version</span><span style=color:#2aa198>}</span>-bin.zip.sha512
</span></span></code></pre></div></li><li><p>如果有binary release要同时发布</p><p>在<code>dubbo-distribution/dubbo-apache-release/target</code>目录下，拷贝<code>bin.zip</code>以及<code>bin.zip.asc</code>到svn本地仓库<code>dubbo/${release_version}</code>，参考第6步，生成sha512签名。</p></li><li><p>提交到Apache svn</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=display:flex><span>$ svn status
</span></span><span style=display:flex><span>$ svn commit -m <span style=color:#2aa198>&#39;prepare for ${release_version} RC1&#39;</span>
</span></span></code></pre></div></li><li><p>关闭Maven的staging仓库</p><p>此步骤为发布2.7.0及以上版本必须要的步骤。在此之前请先确保所有的artifact都是ok的。登录http://repository.apache.org，点击左侧的<code>Staging repositories</code>，然后搜索Dubbo关键字，会出现一系列的仓库，选择你最近上传的仓库，然后点击上方的Close按钮，这个过程会进行一系列检查，检查通过以后，在下方的Summary标签页上出现一个连接，请保存好这个链接，需要放在接下来的投票邮件当中。链接应该是类似这样的: <a href=https://repository.apache.org/content/repositories/orgapachedubbo-1015>https://repository.apache.org/content/repositories/orgapachedubbo-1015</a></p><blockquote><p>请注意点击Close可能会出现失败，通常是网络原因，只要重试几次就可以了。可以点击Summary旁边的Activity标签来确认。</p></blockquote></li></ol><h2 id=验证release-candidates>验证Release Candidates</h2><p>详细的检查列表请参考官方的<a href=https://wiki.apache.org/incubator/IncubatorReleaseChecklist>check list</a></p><p>首先，从一下地址下载要发布的Release Candidate到本地环境：</p><pre>
https://dist.apache.org/repos/dist/dev/dubbo/${release_version}/
</pre><p>然后，开始验证环节，验证包含但不限于以下内容和形式</p><h3 id=检查签名和hash等信息>检查签名和hash等信息</h3><h4 id=检查sha512哈希>检查sha512哈希</h4><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>$ shasum -c apache-dubbo-<span style=color:#2aa198>${</span><span style=color:#268bd2>release_version</span><span style=color:#2aa198>}</span>-src.zip.sha512
</span></span><span style=display:flex><span>$ shasum -c apache-dubbo-<span style=color:#2aa198>${</span><span style=color:#268bd2>release_version</span><span style=color:#2aa198>}</span>-bin.zip.sha512
</span></span></code></pre></div><h4 id=检查gpg签名>检查gpg签名</h4><p>如果是第一次检查，需要首先导入公钥。</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span> $ curl https://dist.apache.org/repos/dist/dev/dubbo/KEYS &gt;&gt; KEYS <span style=color:#586e75># download public keys to local directory</span>
</span></span><span style=display:flex><span> $ gpg --import KEYS <span style=color:#586e75># import keys</span>
</span></span><span style=display:flex><span> $ gpg —-edit-key liujun
</span></span><span style=display:flex><span>   &gt; trust <span style=color:#586e75># type trust command</span>
</span></span></code></pre></div><p>然后使用如下命令检查签名</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>gpg --verify apache-dubbo-3.0.4-src.zip.asc apache-dubbo-3.0.4-src.zip
</span></span><span style=display:flex><span>gpg --verify apache-dubbo-3.0.4-bin.zip.asc apache-dubbo-3.0.4-bin.zip
</span></span></code></pre></div><h3 id=检查源码包的文件内容>检查源码包的文件内容</h3><p>解压缩<code>apache-dubbo-${release_version}-src.zip</code>，进行如下检查:</p><ul><li>DISCLAIMER exists</li><li>LICENSE and NOTICE exists and contents are good</li><li>All files and no binary files exist</li><li>All files has standard ASF License header</li><li>Can compile from source</li><li>All unit tests can pass<div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mvn clean <span style=color:#b58900>test</span> <span style=color:#586e75># This will run all unit tests</span>
</span></span><span style=display:flex><span><span style=color:#586e75># you can also open rat and style plugin to check if every file meets requirements.</span>
</span></span><span style=display:flex><span>mvn clean <span style=color:#b58900>test</span> -Drat.skip<span style=color:#719e07>=</span><span style=color:#b58900>false</span> -Dcheckstyle.skip<span style=color:#719e07>=</span><span style=color:#b58900>false</span>
</span></span></code></pre></div></li><li>Release candidates match with corresponding tags, you can find tag link and hash in vote email.<ul><li>check the version number in pom.xml are the same</li><li>check there are no extra files or directories in the source package, for example, no empty directories or useless log files，这里需要注意换行符是否一致<br><code>diff -r a rc_dir tag_dir</code></li><li>check the top n tag commits, dive into the related files and check if the source package has the same changes</li></ul></li></ul><h3 id=检查三方依赖的合规性>检查三方依赖的合规性</h3><p>按照Apache基金会合规性规定，源码或者是二进制分发包中均不能包含Category X的依赖，其中就常见的是包含了GPL/LGPL的依赖，即使是传递依赖也不行。因此在发版的时候需要通过以下的命令进行检查：</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh><span style=display:flex><span>mvn license:add-third-party -Dlicense.useMissingFile
</span></span><span style=display:flex><span>find . -name THIRD-PARTY.txt | xargs grep -E <span style=color:#2aa198>&#39;GPL|General Public License&#39;</span> | grep -v Apache | grep -v MIT | grep -v CDDL
</span></span></code></pre></div><p>如果一个依赖提供了双协议或多重协议，可以选择与Apache最兼容的一个协议。</p><p>你可以参考此文章：<a href=https://apache.org/legal/resolved.html>ASF第三方许可证策</a></p><h3 id=检查二进制包的文件内容>检查二进制包的文件内容</h3><p>解压缩<code>apache-dubbo-${release_version}-bin.zip</code>，进行如下检查:</p><ul><li>Check signatures are good</li><li>LICENSE and NOTICE exists and contents are good</li></ul><p>注意，如果二进制包里面引入了第三方依赖，则需要更新LICENSE，加入第三方依赖的LICENSE，如果第三方依赖的LICENSE是Apache 2.0，并且对应的项目中包含了NOTICE，还需要更新NOTICE文件</p><h2 id=进入投票>进入投票</h2><p>dubbo毕业之后，投票分只需要一次：</p><ol><li>Dubbo社区投票，发起投票邮件到dev@dubbo.apache.org。在社区开发者Review，经过至少72小时并统计到3个同意发版的binding票后（只有PMC的票才是binding），即可进入下一阶段的投票。</li></ol><p>Dubbo社区投票邮件模板：</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Hello Dubbo Community,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>This is a call for vote to release Apache Dubbo version 2.7.2.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The release candidates:
</span></span><span style=display:flex><span>https://dist.apache.org/repos/dist/dev/dubbo/2.7.2/
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The staging repo:
</span></span><span style=display:flex><span>https://repository.apache.org/content/repositories/orgapachedubbo-1005
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Git tag for the release:
</span></span><span style=display:flex><span>https://github.com/apache/dubbo/tree/dubbo-2.7.2
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Hash for the release tag:
</span></span><span style=display:flex><span>afab04c53edab38d52275d2a198ea1aff7a4f41e
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Release Notes:
</span></span><span style=display:flex><span>https://github.com/apache/dubbo/releases/tag/untagged-4775c0a22c60fca55118
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The artifacts have been signed with Key : 28681CB1, which can be found in the keys file:
</span></span><span style=display:flex><span>https://dist.apache.org/repos/dist/dev/dubbo/KEYS
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The vote will be open for at least 72 hours or until necessary number of votes are reached.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Please vote accordingly:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[ ] +1 approve 
</span></span><span style=display:flex><span>[ ] +0 no opinion 
</span></span><span style=display:flex><span>[ ] -1 disapprove with the reason
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Thanks,
</span></span><span style=display:flex><span>The Apache Dubbo Team
</span></span></code></pre></div><p>宣布投票结果模板：</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>We’ve received 3 +1 binding votes and one +1 non-binding vote:
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>+1 binding, Ian Luo
</span></span><span style=display:flex><span>+1 binding, Huxing Zhang
</span></span><span style=display:flex><span>+1 binding, Jun Liu
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>+1 non-binding, Jerrick
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>I will start to release today.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Best regards,
</span></span><span style=display:flex><span>The Apache Dubbo Team
</span></span></code></pre></div><h2 id=正式发布>正式发布</h2><ol><li>将<a href=https://dist.apache.org/repos/dist/dev/dubbo>dev</a>目录下的发布包添加到<a href=https://dist.apache.org/repos/dist/release/dubbo>release</a>目录下，KEYS有更新的，也需要同步更新。</li><li>删除<a href=https://dist.apache.org/repos/dist/dev/dubbo>dev</a>目录下的发布包</li><li>删除<a href=https://dist.apache.org/repos/dist/release/dubbo>release</a>目录下上一个版本的发布包，这些包会被自动保存在<a href=https://archive.apache.org/dist/dubbo>这里</a></li><li>此步骤为发布2.7.0及以上版本必须要的步骤。在此之前请先确保所有的artifact都是ok的。登录http://repository.apache.org，点击左侧的<code>Staging repositories</code>，然后搜索Dubbo关键字，会出现一系列的仓库，选择你最近上传的仓库，然后点击上方的Release按钮.</li><li>发布GitHub上的<a href=https://github.com/apache/dubbo/releases>release notes</a></li><li>修改GitHub的Readme文件，将版本号更新到最新发布的版本</li><li>在官网下载<a href=http://dubbo.apache.org/en-us/blog/download.html>页面</a>上添加最新版本的下载链接。最新的下载链接应该类似<a href="https://www.apache.org/dyn/closer.cgi?path=dubbo/$VERSION/apache-dubbo-$VERSION-source-release.zip">这样</a>. 同时更新以前版本的下载链接，改为类似<a href=https://archive.apache.org/dist/dubbo/$VERSION/apache-dubbo-$VERSION-bin-release.zip>这样</a>. 具体可以参考过往的<a href=https://github.com/apache/dubbo-website/blob/asf-site/blog/en-us/download.md>下载链接</a> [可以参考] (<a href=https://github.com/apache/dubbo-website/pull/887>https://github.com/apache/dubbo-website/pull/887</a>)</li><li>合并<code>${release-version}-release</code>分支到对应的主干分支， 然后删除相应的release分支，例如: <code>git push origin --delete 2.7.0-release</code></li><li>发邮件到 <code>dev@dubbo.apache.org</code>
宣布release邮件模板：</li></ol><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-text data-lang=text><span style=display:flex><span>Hello Community,
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>The Apache Dubbo team is pleased to announce that the
</span></span><span style=display:flex><span>2.6.6 has just been released.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Apache Dubbo™  is a high-performance, java based, open source
</span></span><span style=display:flex><span>RPC framework. Dubbo offers three key functionalities, which include
</span></span><span style=display:flex><span>interface based remote call, fault tolerance &amp; load balancing, and
</span></span><span style=display:flex><span>automatic service registration &amp; discovery.
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>Both the source release[1] and the maven binary release[2] are available
</span></span><span style=display:flex><span>now, you can also find the detailed release notes here[3].
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>If you have any usage questions, or have problems when upgrading or find
</span></span><span style=display:flex><span>any problems about enhancements included in this release, please don’t
</span></span><span style=display:flex><span>hesitate to let us know by sending feedback to this mailing list or filing
</span></span><span style=display:flex><span>an issue on GitHub[4].
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>[1] http://dubbo.apache.org/en-us/blog/download.html
</span></span><span style=display:flex><span>[2] https://repo1.maven.org/maven2/org/apache/dubbo/dubbo
</span></span><span style=display:flex><span>[3] https://github.com/apache/dubbo/releases
</span></span><span style=display:flex><span>[4] https://github.com/apache/dubbo/issues
</span></span></code></pre></div><h2 id=完成maven-convenient-binary发布可选>完成Maven Convenient Binary发布（可选）</h2><p><strong>repository.apache.org</strong> nexus仓库的权限已经申请，参见<a href=https://issues.apache.org/jira/browse/INFRA-16451>jira</a></p><p>发布jar包到maven仓库，首先访问<a href=https://repository.apache.org>repository.apache.org</a>, 选择<code>staging repository</code>, 点击<code>release</code>按钮。等待一段时间之后，在<a href=https://repository.apache.org/content/repositories/releases/org/apache/dubbo/>这里</a>确认完整性和正确性. 发布到Maven中央仓库则还需要等待一段时间。可以在<a href=https://repo.maven.apache.org/maven2/org/apache/dubbo>这里</a>进行确认。</p><h2 id=faq>FAQ</h2><h4 id=gpg-signing-failed-inappropriate-ioctl-for-device>gpg: signing failed: Inappropriate ioctl for device</h4><p>If you&rsquo;ve encountered this error, try the following commands:</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback><span style=display:flex><span>export GPG_TTY=$(tty)
</span></span></code></pre></div><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><div class=d-print-none><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="btn btn-primary mb-4 feedback--answer feedback--answer-yes">Yes</button>
<button class="btn btn-primary mb-4 feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/apache/dubbo-website/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/apache/dubbo-website/issues/new>tell us how we can improve</a>.</p></div><script>const yesButton=document.querySelector(".feedback--answer-yes"),noButton=document.querySelector(".feedback--answer-no"),yesResponse=document.querySelector(".feedback--response-yes"),noResponse=document.querySelector(".feedback--response-no"),disableButtons=()=>{yesButton.disabled=!0,noButton.disabled=!0},sendFeedback=t=>{if(typeof ga!="function")return;const e={command:"send",hitType:"event",category:"Helpful",action:"click",label:window.location.pathname,value:t};ga(e.command,e.hitType,e.category,e.action,e.label,e.value)};yesButton.addEventListener("click",()=>{yesResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(1)}),noButton.addEventListener("click",()=>{noResponse.classList.add("feedback--response__visible"),disableButtons(),sendFeedback(0)})</script><br></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Dubbo mailing list archive" aria-label="Dubbo mailing list archive"><a class=text-white target=_blank rel="noopener noreferrer" href=https://lists.apache.org/list.html?dev@dubbo.apache.org><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/ApacheDubbo><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/apache/dubbo><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Subscribe to mailing list" aria-label="Subscribe to mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=mailto:dev-subscribe@dubbo.apache.org><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2022 The Apache Software Foundation. Apache and the Apache feather logo are trademarks of The Apache Software Foundation. All Rights Reserved</small></div></div></div></footer><div class="row pt-2 pb-2"><div class="container-fluid mx-sm-5"><div class=text-center id=my-footer><img style=float:left src=/imgs/apache_logo.png><ul><li><a href=http://www.apache.org>Foundation</a></li><li><a href=http://www.apache.org/licenses/>License</a></li><li><a href=https://www.apache.org/security/>Security</a></li><li><a href=http://www.apache.org/events/current-event>Events</a></li><li><a href=http://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li><li><a href=http://www.apache.org/foundation/thanks.html>Thanks</a></li></ul></div></div></div></div><script src=/js/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script>
<script src=/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script>
<script src=/incubator-dubbo-website/js/main.min.1d81d4fadaa24ac780e36e292df449e3532274931145bb2afe52ef44ec64c451.js integrity="sha256-HYHU+tqiSseA424pLfRJ41MidJMRRbsq/lLvROxkxFE=" crossorigin=anonymous></script>
<script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script>
<script>docsearch({apiKey:"38eff7758162fbf70f2b8484932e62ae",indexName:"apache_dubbo",inputSelector:".td-search-input",debug:!1})</script></body></html>