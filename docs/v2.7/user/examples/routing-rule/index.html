<!doctype html><html lang=en class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.78.2"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Routing Rule | Apache Dubbo</title><meta property="og:title" content="Routing Rule"><meta property="og:description" content="Config routing rule in dubbo"><meta property="og:type" content="article"><meta property="og:url" content="/docs/v2.7/user/examples/routing-rule/"><meta property="article:modified_time" content="2020-11-16T19:28:01+08:00"><meta property="og:site_name" content="Apache Dubbo"><meta itemprop=name content="Routing Rule"><meta itemprop=description content="Config routing rule in dubbo"><meta itemprop=dateModified content="2020-11-16T19:28:01+08:00"><meta itemprop=wordCount content="1121"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Routing Rule"><meta name=twitter:description content="Config routing rule in dubbo"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-112489517-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preload href=/scss/main.min.b8ee4a8008ba3340c2f9a4386c269cfd0c363b329f020f483656c1193857d326.css as=style><link href=/scss/main.min.b8ee4a8008ba3340c2f9a4386c269cfd0c363b329f020f483656c1193857d326.css rel=stylesheet integrity><script src=/js/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css></head><body class=td-page><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 321.39 78.54"><title id="title19">DUBBO LOGO</title><path class="cls-1" d="M68.46 50.38c0 14.06 11.39 22.11 25.45 22.11s25.45-8.05 25.45-22.11V7.25H68.46zm21.24-28h8.6V31H89.7zm0 22.25h8.6v8.6H89.7zM33.24 7.25H4.06v64H33.24c10.95.0 19.3-7.18 23.29-17.15a45.12 45.12.0 002.38-14.87A45.12 45.12.0 0056.53 24.4C52.84 14.62 44.19 7.25 33.24 7.25zm.43 14.63H30.34a3.44 3.44.0 00-3.44 3.44V53.23a3.44 3.44.0 003.44 3.44h3.33v4.63h-8.3a6.87 6.87.0 01-6.87-6.87V24.12a6.87 6.87.0 016.87-6.87h8.3zM285.51 6.06c-17.05.0-30.88 10.28-30.88 33.21s13.83 33.21 30.88 33.21 30.88-10.28 30.88-33.21S302.56 6.06 285.51 6.06zm7.59 48.36a6.87 6.87.0 01-6.87 6.87h-8.3V56.67h3.33a3.44 3.44.0 003.44-3.44V25.31a3.44 3.44.0 00-3.44-3.44h-3.33V17.25h8.3a6.87 6.87.0 016.87 6.87zm-53.4-17.56A17.39 17.39.0 00227.31 7.25H195.1v64h32.21a19.44 19.44.0 0012.38-34.44zM211.63 61.29h-6.08l18.68-44h6.08zM177 36.85A17.39 17.39.0 00164.65 7.25H132.43v64h32.21A19.44 19.44.0 00177 36.85zM149 61.29h-6.08l18.68-44h6.08z" style="fill:#fff;fill-opacity:1"/></svg></span><span class="text-uppercase font-weight-bold">Apache Dubbo</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/docs/><span class=active>Documentation</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/blog/><span>Blog</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/community/><span>Community</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/v2.7/user/examples/routing-rule/>中文</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002 Search this site…" aria-label="Search this site…" autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>English</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/zh/docs/v2.7/user/examples/routing-rule/>中文</a></div></div><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Documentation</a></li><ul><li class="collapse show" id=docs><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">Dubbo 2.7</a></li><ul><li class="collapse show" id=docsv27><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">User</a></li><ul><li class="collapse show" id=docsv27user><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/preface/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Preface</a></li><ul><li class=collapse id=docsv27userpreface><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userprefacebackground href=/docs/v2.7/user/preface/background/>Background</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userprefacerequirements href=/docs/v2.7/user/preface/requirements/>Requirements</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userprefacearchitecture href=/docs/v2.7/user/preface/architecture/>Architecture</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userprefaceusage href=/docs/v2.7/user/preface/usage/>Usage</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userquick-start href=/docs/v2.7/user/quick-start/>Quick start</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userdependencies href=/docs/v2.7/user/dependencies/>Dependencies</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27usermaturity href=/docs/v2.7/user/maturity/>Maturity</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/configuration/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Configuration</a></li><ul><li class=collapse id=docsv27userconfiguration><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userconfigurationxml href=/docs/v2.7/user/configuration/xml/>XML</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userconfigurationproperties href=/docs/v2.7/user/configuration/properties/>Properties</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userconfigurationapi href=/docs/v2.7/user/configuration/api/>API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userconfigurationannotation href=/docs/v2.7/user/configuration/annotation/>Annotation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userconfigurationconfiguration-load-process href=/docs/v2.7/user/configuration/configuration-load-process/>Loading Process</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/examples/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">Examples</a></li><ul><li class="collapse show" id=docsv27userexamples><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplespreflight-check href=/docs/v2.7/user/examples/preflight-check/>Preflight Check</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesfault-tolerent-strategy href=/docs/v2.7/user/examples/fault-tolerent-strategy/>Fault Tolerance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesloadbalance href=/docs/v2.7/user/examples/loadbalance/>Load Balance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesthread-model href=/docs/v2.7/user/examples/thread-model/>Thread Model</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesexplicit-target href=/docs/v2.7/user/examples/explicit-target/>Explicit Target</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplessubscribe-only href=/docs/v2.7/user/examples/subscribe-only/>Subscribe Only</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesmulti-protocols href=/docs/v2.7/user/examples/multi-protocols/>Multiple Protocols</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesmulti-registry href=/docs/v2.7/user/examples/multi-registry/>Multiple Registries</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesservice-group href=/docs/v2.7/user/examples/service-group/>Service Group</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesstatic-service href=/docs/v2.7/user/examples/static-service/>Static Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesmulti-versions href=/docs/v2.7/user/examples/multi-versions/>Multiple Versions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesgroup-merger href=/docs/v2.7/user/examples/group-merger/>Group Merger</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesparameter-validation href=/docs/v2.7/user/examples/parameter-validation/>Parameter Validation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesresult-cache href=/docs/v2.7/user/examples/result-cache/>Cache Result</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesgeneric-reference href=/docs/v2.7/user/examples/generic-reference/>Generic Reference</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesgeneric-service href=/docs/v2.7/user/examples/generic-service/>Generic Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesecho-service href=/docs/v2.7/user/examples/echo-service/>Echo Service</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplescontext href=/docs/v2.7/user/examples/context/>Context</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesattachment href=/docs/v2.7/user/examples/attachment/>Attachment</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesasync-call href=/docs/v2.7/user/examples/async-call/>Async Call</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesasync-execute-on-provider href=/docs/v2.7/user/examples/async-execute-on-provider/>Async Execution</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexampleslocal-call href=/docs/v2.7/user/examples/local-call/>Local Call</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplescallback-parameter href=/docs/v2.7/user/examples/callback-parameter/>Callback</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesevents-notify href=/docs/v2.7/user/examples/events-notify/>Event Notification</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexampleslocal-stub href=/docs/v2.7/user/examples/local-stub/>Local Stub</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexampleslocal-mock href=/docs/v2.7/user/examples/local-mock/>Local Mock</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesdelay-publish href=/docs/v2.7/user/examples/delay-publish/>Delay Publish</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesconcurrency-control href=/docs/v2.7/user/examples/concurrency-control/>Concurrency</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesconfig-connections href=/docs/v2.7/user/examples/config-connections/>Connection</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexampleslazy-connect href=/docs/v2.7/user/examples/lazy-connect/>Lazy Connect</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesstickiness href=/docs/v2.7/user/examples/stickiness/>Stickiness</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplestoken-authorization href=/docs/v2.7/user/examples/token-authorization/>Token Authorization</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-docsv27userexamplesrouting-rule href=/docs/v2.7/user/examples/routing-rule/>Routing Rule</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesconfig-rule href=/docs/v2.7/user/examples/config-rule/>Configure rule</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesservice-downgrade href=/docs/v2.7/user/examples/service-downgrade/>Service Downgrade</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesgraceful-shutdown href=/docs/v2.7/user/examples/graceful-shutdown/>Graceful Shutdown</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexampleshostname-binding href=/docs/v2.7/user/examples/hostname-binding/>Hostname Binding</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexampleslogger-strategy href=/docs/v2.7/user/examples/logger-strategy/>Logger Strategy</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesaccesslog href=/docs/v2.7/user/examples/accesslog/>Access Log</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesservice-container href=/docs/v2.7/user/examples/service-container/>Service Container</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesreference-config-cache href=/docs/v2.7/user/examples/reference-config-cache/>ReferenceConfig Cache</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesregistry-only href=/docs/v2.7/user/examples/registry-only/>Register Only</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesdistributed-transaction href=/docs/v2.7/user/examples/distributed-transaction/>Transaction</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesdump href=/docs/v2.7/user/examples/dump/>Thread Dump</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesnetty4 href=/docs/v2.7/user/examples/netty4/>Netty4</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userexamplesserialization href=/docs/v2.7/user/examples/serialization/>Serialization</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/references/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">References</a></li><ul><li class=collapse id=docsv27userreferences><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/references/xml/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">XML</a></li><ul><li class=collapse id=docsv27userreferencesxml><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-application href=/docs/v2.7/user/references/xml/dubbo-application/>dubbo:application</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-argument href=/docs/v2.7/user/references/xml/dubbo-argument/>dubbo:argument</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-config-center href=/docs/v2.7/user/references/xml/dubbo-config-center/>dubbo:config-center</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-consumer href=/docs/v2.7/user/references/xml/dubbo-consumer/>dubbo:consumer</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-method href=/docs/v2.7/user/references/xml/dubbo-method/>dubbo:method</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-module href=/docs/v2.7/user/references/xml/dubbo-module/>dubbo:module</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-monitor href=/docs/v2.7/user/references/xml/dubbo-monitor/>dubbo:monitor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-parameter href=/docs/v2.7/user/references/xml/dubbo-parameter/>dubbo:parameter</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-protocol href=/docs/v2.7/user/references/xml/dubbo-protocol/>dubbo:protocol</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-provider href=/docs/v2.7/user/references/xml/dubbo-provider/>dubbo:provider</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-reference href=/docs/v2.7/user/references/xml/dubbo-reference/>dubbo:reference</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-registry href=/docs/v2.7/user/references/xml/dubbo-registry/>dubbo:registry</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesxmldubbo-service href=/docs/v2.7/user/references/xml/dubbo-service/>dubbo:service</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/references/protocol/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Protocol</a></li><ul><li class=collapse id=docsv27userreferencesprotocol><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocoldubbo href=/docs/v2.7/user/references/protocol/dubbo/>dubbo://</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocolrest href=/docs/v2.7/user/references/protocol/rest/>rest://</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocolhttp href=/docs/v2.7/user/references/protocol/http/>http://</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocolhessian href=/docs/v2.7/user/references/protocol/hessian/>hessian://</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocolredis href=/docs/v2.7/user/references/protocol/redis/>redis://</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocolthrift href=/docs/v2.7/user/references/protocol/thrift/>thrift://</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocolmemcached href=/docs/v2.7/user/references/protocol/memcached/>memcached://</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocolrmi href=/docs/v2.7/user/references/protocol/rmi/>rmi://</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesprotocolwebservice href=/docs/v2.7/user/references/protocol/webservice/>webservice://</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/references/registry/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Registry Server</a></li><ul><li class=collapse id=docsv27userreferencesregistry><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesregistrynacos href=/docs/v2.7/user/references/registry/nacos/>Nacos</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesregistryzookeeper href=/docs/v2.7/user/references/registry/zookeeper/>Zookeeper</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesregistrymulticast href=/docs/v2.7/user/references/registry/multicast/>Multicast</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesregistryredis href=/docs/v2.7/user/references/registry/redis/>Redis</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesregistrysimple href=/docs/v2.7/user/references/registry/simple/>Simple</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesmetadata href=/docs/v2.7/user/references/metadata/>Metadata</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesapi href=/docs/v2.7/user/references/api/>API</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesqos href=/docs/v2.7/user/references/qos/>Qos</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencestelnet href=/docs/v2.7/user/references/telnet/>Telnet</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userreferencesmaven href=/docs/v2.7/user/references/maven/>Maven</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userbest-practice href=/docs/v2.7/user/best-practice/>Best practice</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userrecommend href=/docs/v2.7/user/recommend/>Recommended usage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27usercapacity-plan href=/docs/v2.7/user/capacity-plan/>Capacity plan</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userperf-test href=/docs/v2.7/user/perf-test/>Performance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27usercoveragence href=/docs/v2.7/user/coveragence/>Test coverage</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userbenchmark-tool href=/docs/v2.7/user/benchmark-tool/>Benchmark Suite</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userrest href=/docs/v2.7/user/rest/>REST support</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27usersimple-monitor href=/docs/v2.7/user/simple-monitor/>Simple monitor</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/languages/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Other Languages</a></li><ul><li class=collapse id=docsv27userlanguages><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/user/languages/erlang/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Erlang</a></li><ul><li class=collapse id=docsv27userlanguageserlang><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userlanguageserlangquick-start href=/docs/v2.7/user/languages/erlang/quick-start/>Quick Start</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userlanguageserlangreference href=/docs/v2.7/user/languages/erlang/reference/>Consumer</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userlanguageserlangservice href=/docs/v2.7/user/languages/erlang/service/>Provider</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27userlanguageserlangserialization href=/docs/v2.7/user/languages/erlang/serialization/>Protocol</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/dev/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Developer</a></li><ul><li class=collapse id=docsv27dev><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devbuild href=/docs/v2.7/dev/build/>Build</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devdesign href=/docs/v2.7/dev/design/>Design</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devspi href=/docs/v2.7/dev/spi/>SPI</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplementation href=/docs/v2.7/dev/implementation/>Implementation</a><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/dev/principals/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Design Principals</a></li><ul><li class=collapse id=docsv27devprincipals><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devprincipalscode-detail href=/docs/v2.7/dev/principals/code-detail/>Details</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devprincipalsconfiguration href=/docs/v2.7/dev/principals/configuration/>Configuration</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devprincipalsdummy href=/docs/v2.7/dev/principals/dummy/>Fool-proof</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devprincipalsexpansibility href=/docs/v2.7/dev/principals/expansibility/>Extensibility</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devprincipalsextension href=/docs/v2.7/dev/principals/extension/>Extension</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devprincipalsgeneral-knowledge href=/docs/v2.7/dev/principals/general-knowledge/>General Rule</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devprincipalsrobustness href=/docs/v2.7/dev/principals/robustness/>Robustness</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/dev/impls/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">SPI Impls</a></li><ul><li class=collapse id=docsv27devimpls><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsprotocol href=/docs/v2.7/dev/impls/protocol/>Protocol</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsfilter href=/docs/v2.7/dev/impls/filter/>Filter</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsinvoker-listener href=/docs/v2.7/dev/impls/invoker-listener/>InvokerListener</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsexporter-listener href=/docs/v2.7/dev/impls/exporter-listener/>ExporterListener</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplscluster href=/docs/v2.7/dev/impls/cluster/>Cluster</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsrouter href=/docs/v2.7/dev/impls/router/>Router</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsload-balance href=/docs/v2.7/dev/impls/load-balance/>LoadBalance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsmerger href=/docs/v2.7/dev/impls/merger/>Merger</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsregistry href=/docs/v2.7/dev/impls/registry/>Registry</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsmonitor href=/docs/v2.7/dev/impls/monitor/>Monitor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsextension-factory href=/docs/v2.7/dev/impls/extension-factory/>ExtensionFactory</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsproxy-factory href=/docs/v2.7/dev/impls/proxy-factory/>ProxyFactory</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplscompiler href=/docs/v2.7/dev/impls/compiler/>Compiler</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsconfig-center href=/docs/v2.7/dev/impls/config-center/>Config Center</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsdispatcher href=/docs/v2.7/dev/impls/dispatcher/>Dispatcher</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsthreadpool href=/docs/v2.7/dev/impls/threadpool/>ThreadPool</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsserialize href=/docs/v2.7/dev/impls/serialize/>Serialization</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsremoting href=/docs/v2.7/dev/impls/remoting/>Transporter</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsexchanger href=/docs/v2.7/dev/impls/exchanger/>Exchanger</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsnetworker href=/docs/v2.7/dev/impls/networker/>Networker</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplstelnet-handler href=/docs/v2.7/dev/impls/telnet-handler/>TelnetHandler</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsstatus-checker href=/docs/v2.7/dev/impls/status-checker/>StatusChecker</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplscontainer href=/docs/v2.7/dev/impls/container/>Container</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplspage href=/docs/v2.7/dev/impls/page/>PageHandler</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplscache href=/docs/v2.7/dev/impls/cache/>Cache</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplsvalidation href=/docs/v2.7/dev/impls/validation/>Validation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devimplslogger-adapter href=/docs/v2.7/dev/impls/logger-adapter/>LoggerAdapter</a></li></ul></ul><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devcontract href=/docs/v2.7/dev/contract/>Public Agreement</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devrelease href=/docs/v2.7/dev/release/>Versions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devchecklist href=/docs/v2.7/dev/checklist/>Checklist</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devcode-smell href=/docs/v2.7/dev/code-smell/>Bad Smell</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devcoding href=/docs/v2.7/dev/coding/>Coding Convention</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27devtck href=/docs/v2.7/dev/tck/>TCK</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/admin/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Admin</a></li><ul><li class=collapse id=docsv27admin><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/admin/ops/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dubbo Admin</a></li><ul><li class=collapse id=docsv27adminops><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27adminopsfunctions href=/docs/v2.7/admin/ops/functions/>Functions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27adminopsintroduction href=/docs/v2.7/admin/ops/introduction/>Introductions</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27adminopssearch href=/docs/v2.7/admin/ops/search/>Search</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27adminopstest href=/docs/v2.7/admin/ops/test/>Test</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27adminopsgovernance href=/docs/v2.7/admin/ops/governance/>Governance</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27adminopspinpoint href=/docs/v2.7/admin/ops/pinpoint/>Pinpoint</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27adminopsskywalking href=/docs/v2.7/admin/ops/skywalking/>Skywalking</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v2.7/admin/install/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Installation</a></li><ul><li class=collapse id=docsv27admininstall><a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27admininstalladmin-console href=/docs/v2.7/admin/install/admin-console/>Admin Console</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27admininstallprovider-demo href=/docs/v2.7/admin/install/provider-demo/>Demo Provider</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27admininstallconsumer-demo href=/docs/v2.7/admin/install/consumer-demo/>Demo Consumer</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27admininstallzookeeper href=/docs/v2.7/admin/install/zookeeper/>Config Center</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27admininstallredis href=/docs/v2.7/admin/install/redis/>Register Center</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docsv27admininstallmonitor-center href=/docs/v2.7/admin/install/monitor-center/>Monitor Center</a></li></ul></ul></li></ul></ul></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/v3.0/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Dubbo 3.0</a></li><ul><li class=collapse id=docsv30></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/contribution-guidelines/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contribution Guideline</a></li><ul><li class=collapse id=docscontribution-guidelines><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/contribution-guidelines/contributor/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Contributor</a></li><ul><li class=collapse id=docscontribution-guidelinescontributor><a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescontributorbecome-a-committer_dev href=/docs/contribution-guidelines/contributor/become-a-committer_dev/>How To</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescontributorcla-signing-guide_dev href=/docs/contribution-guidelines/contributor/cla-signing-guide_dev/>CLA</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescontributornew-contributor-guide_dev href=/docs/contribution-guidelines/contributor/new-contributor-guide_dev/>New Contributor</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescontributormailing-list-subscription-guide_dev href=/docs/contribution-guidelines/contributor/mailing-list-subscription-guide_dev/>Mailing List</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescontributorsoftware-donation-guide_dev href=/docs/contribution-guidelines/contributor/software-donation-guide_dev/>Donation</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescontributorreporting-security-issues_dev href=/docs/contribution-guidelines/contributor/reporting-security-issues_dev/>Security Issue</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescontributordubbo-extension-guide_dev href=/docs/contribution-guidelines/contributor/dubbo-extension-guide_dev/>Developing Extension</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescontributortest-coverage-guide_dev href=/docs/contribution-guidelines/contributor/test-coverage-guide_dev/>Test Coverage</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/docs/contribution-guidelines/committer/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">Committer</a></li><ul><li class=collapse id=docscontribution-guidelinescommitter><a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescommitternew-committer-guide_dev href=/docs/contribution-guidelines/committer/new-committer-guide_dev/>Committer Guide</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescommitterrelease-guide_dev href=/docs/contribution-guidelines/committer/release-guide_dev/>Release Guide</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescommitterlabel-an-issue-guide_dev href=/docs/contribution-guidelines/committer/label-an-issue-guide_dev/>Issue Guide</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescommitterwebsite-guide_dev href=/docs/contribution-guidelines/committer/website-guide_dev/>Website Guide</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-docscontribution-guidelinescommitterapache-dubbo-page_dev href=/docs/contribution-guidelines/committer/apache-dubbo-page_dev/>Official Page</a></li></ul></ul></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/apache/dubbo-website/edit/master/content/en/docs/v2.7/user/examples/routing-rule.md target=_blank><i class="fa fa-edit fa-fw"></i>Edit this page</a>
<a href="https://github.com/apache/dubbo-website/new/master/content/en/docs/v2.7/user/examples/routing-rule.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i>Create child page</a>
<a href="https://github.com/apache/dubbo-website/issues/new?title=Routing%20Rule" target=_blank><i class="fab fa-github fa-fw"></i>Create documentation issue</a>
<a href=https://github.com/apache/dubbo/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>Create project issue</a></div><nav id=TableOfContents><ul><li><a href=#write-routing-rules>Write Routing Rules</a></li><li><a href=#conditional-routing-rules>Conditional routing rules</a><ul><li><a href=#rules>Rules：</a></li><li><a href=#expressions>Expressions：</a></li><li><a href=#samples>Samples</a></li></ul></li><li><a href=#script-routing-rules>Script routing rules</a></li><li><a href=#tag-routing-rules>Tag routing rules</a><ul><li><a href=#provider>Provider</a></li><li><a href=#consumer>Consumer</a></li><li><a href=#rules-1>Rules:</a></li></ul></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5" role=main><nav aria-label=breadcrumb class="d-none d-md-block d-print-none"><ol class="breadcrumb spb-1"><li class=breadcrumb-item><a href=/docs/>Documentation</a></li><li class=breadcrumb-item><a href=/docs/v2.7/>Dubbo 2.7</a></li><li class=breadcrumb-item><a href=/docs/v2.7/user/>User</a></li><li class=breadcrumb-item><a href=/docs/v2.7/user/examples/>Examples</a></li><li class="breadcrumb-item active" aria-current=page><a href=/docs/v2.7/user/examples/routing-rule/>Routing Rule</a></li></ol></nav><div class=td-content><h1>Routing Rule</h1><div class=lead>Config routing rule in dubbo</div><p>The routing rules <sup id=fnref:1><a href=#fn:1 class=footnote-ref role=doc-noteref>1</a></sup> determine the target server of one service call. It has two kinds of routing rules: conditional routing rules and script routing rules. It also support extension<sup id=fnref:2><a href=#fn:2 class=footnote-ref role=doc-noteref>2</a></sup>.</p><h2 id=write-routing-rules>Write Routing Rules</h2><p>Writing routing rules to the registry is usually done by the monitoring center or the console page.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java>RegistryFactory registryFactory <span style=color:#719e07>=</span> ExtensionLoader<span style=color:#719e07>.</span>getExtensionLoader<span style=color:#719e07>(</span>RegistryFactory<span style=color:#719e07>.</span>class<span style=color:#719e07>).</span>getAdaptiveExtension<span style=color:#719e07>();</span>
Registry registry <span style=color:#719e07>=</span> registryFactory<span style=color:#719e07>.</span>getRegistry<span style=color:#719e07>(</span>URL<span style=color:#719e07>.</span>valueOf<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;zookeeper://10.20.153.10:2181&#34;</span><span style=color:#719e07>));</span>
registry<span style=color:#719e07>.</span>register<span style=color:#719e07>(</span>URL<span style=color:#719e07>.</span>valueOf<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;route://0.0.0.0/com.foo.BarService?category=routers&amp;dynamic=false&amp;rule=&#34;</span> <span style=color:#719e07>+</span> URL<span style=color:#719e07>.</span>encode<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;host = 10.20.153.10 =&gt; host = 10.20.153.11&#34;</span><span style=color:#719e07>)));</span>
</code></pre></div><p>其中：</p><ul><li><code>route://</code> It indicates the type of routing rules, supports routing rules and script routing rules, and can be extended. <strong>Required</strong>。</li><li><code>0.0.0.0</code> It indicates that all IP addresses are valid. If you want to take effect for only one IP address, fill in the IP address. <strong>Required</strong>。</li><li><code>com.foo.BarService</code> It indicates that the specified service is effective. <strong>Required</strong>。</li><li><code>group=foo</code> It indicates that the specified service in specified group is effective. When absent, the specified service which dosen&rsquo;t configure group is effective.</li><li><code>version=1.0</code>It indicates that the specified service in specified version is effective. When absent, the specified service which dosen&rsquo;t configure version is effective.</li><li><code>category=routers</code> It indicates that the data is a dynamic configuration type. <strong>Required</strong>。</li><li><code>dynamic=false</code> It indicates that it is persistent data. When the registrant exits, the data is still stored in the registry. <strong>Required</strong>。</li><li><code>enabled=true</code> It indicates whether this routing rules is effective. Option, and default effective.</li><li><code>force=false</code> It indicates whether it is forced to be executed when the routing result is null. If it is not enforced, the route will be automatically invalidated. Option, and default <code>false</code>.</li><li><code>runtime=false</code> It indicates whether to execute routing rules at every call. If not, the result is only pre-executed and cached when the provider&rsquo;s address list changes. It will get routing result from cache when the service is invoked. If you use parameter routing, you must to configure it as <code>true</code>. Be careful that the configuration will affect the performance. Option, and default <code>false</code>.</li><li><code>priority=1</code> The priority of the routing rules. it is used for sorting, the greater the priority, the more front execution. Option, and default <code>0</code>。</li><li><code>rule=URL.encode("host = 10.20.153.10 => host = 10.20.153.11")</code> It indicates the content of routing rule，<strong>Required</strong>。</li></ul><h2 id=conditional-routing-rules>Conditional routing rules</h2><p>Routing rules based on conditional expressions, such as：<code>host = 10.20.153.10 => host = 10.20.153.11</code></p><h3 id=rules>Rules：</h3><ul><li>The previous of <code>=></code> is matched condition for consumer. All parameters compare with URL of consumers. When the consumer meet the condition, it will continue to execute the behind filter rules for consumer.</li><li>After the <code>=></code> aims to filter the provider address list. All the parameters are compared against the provider&rsquo;s URL, and consumer get only the filtered address list at finally.</li><li>If the previous condition for consumer is empty, it means all consumers can matched. such as : <code>=> host != 10.20.153.11</code></li><li>If the filter condition for provider is empty, it means it is forbidden to visit. such as :<code>host = 10.20.153.10 =></code></li></ul><h3 id=expressions>Expressions：</h3><p>Parameter Support：</p><ul><li>Service call information, such as: method, argument etc. Parameter routing is currently not supported</li><li>URL field (On URL own), such as: protocol, host, port etc.</li><li>All parameters on the URL. such as: application, organization etc.</li></ul><p>Condition Support：</p><ul><li>Equal sign <code>=</code> indicates match. such as: <code>host = 10.20.153.10</code></li><li>Not equal sign <code>!=</code> indicates &ldquo;does not match&rdquo;. such as: <code>host != 10.20.153.10</code>.</li></ul><p>Value Support：</p><ul><li>Separate multiple values with a comma <code>,</code> . Such as：<code>host != 10.20.153.10,10.20.153.11</code></li><li>End with <code>*</code> to indicate wildcard. Such as： <code>host != 10.20.*</code></li><li>Start with <code>$</code> to indicate reference to consumer parameters. Such as: <code>host = $host</code></li></ul><h3 id=samples>Samples</h3><ol start=0><li><p>Exclude pre-release machine：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>=&gt; host != 172.22.3.91
</code></pre></div></li><li><p>Whitelist <sup id=fnref:3><a href=#fn:3 class=footnote-ref role=doc-noteref>3</a></sup>：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>host != 10.20.153.10,10.20.153.11 =&gt;
</code></pre></div></li><li><p>Blacklist：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>host = 10.20.153.10,10.20.153.11 =&gt;
</code></pre></div></li><li><p>Service boarding application only expose part of the machine to prevent the entire cluster hanging up:</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>=&gt; host = 172.22.3.1*,172.22.3.2*
</code></pre></div></li><li><p>Additional machines for important applications：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>application != kylin =&gt; host != 172.22.3.95,172.22.3.96
</code></pre></div></li><li><p>Read and write separation：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>method = find*,list*,get*,is* =&gt; host = 172.22.3.94,172.22.3.95,172.22.3.96
method != find*,list*,get*,is* =&gt; host = 172.22.3.97,172.22.3.98
</code></pre></div></li><li><p>Separation of Front and Background Application：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>application = bops =&gt; host = 172.22.3.91,172.22.3.92,172.22.3.93
application != bops =&gt; host = 172.22.3.94,172.22.3.95,172.22.3.96
</code></pre></div></li><li><p>Isolate different network segments：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>host != 172.22.3.* =&gt; host != 172.22.3.*
</code></pre></div></li><li><p>Providers and consumers deployed in the same cluster, the machine only visit the local service：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>=&gt; host = $host
</code></pre></div></li></ol><h2 id=script-routing-rules>Script routing rules</h2><p>Script routing rules <sup id=fnref:4><a href=#fn:4 class=footnote-ref role=doc-noteref>4</a></sup> support all scripts of JDK script engine. such as: javascript, jruby, groovy, etc. Configure the script type by <code>type=javascript</code>, the default is javascript.</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>&#34;script://0.0.0.0/com.foo.BarService?category=routers&amp;dynamic=false&amp;rule=&#34; + URL.encode(&#34;(function route(invokers) { ... } (invokers))&#34;)
</code></pre></div><p>Routing rules that base on script engine is as follow：</p><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript>(<span style=color:#268bd2>function</span> route(invokers) {
    <span style=color:#268bd2>var</span> result <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> java.util.ArrayList(invokers.size());
    <span style=color:#719e07>for</span> (i <span style=color:#719e07>=</span> <span style=color:#2aa198>0</span>; i <span style=color:#719e07>&lt;</span> invokers.size(); i <span style=color:#719e07>++</span>) {
        <span style=color:#719e07>if</span> (<span style=color:#2aa198>&#34;10.20.153.10&#34;</span>.equals(invokers.get(i).getUrl().getHost())) {
            result.add(invokers.get(i));
        }
    }
    <span style=color:#719e07>return</span> result;
} (invokers)); <span style=color:#586e75>// Indicates that the method is executed immediately
</span></code></pre></div><h2 id=tag-routing-rules>Tag routing rules</h2><p>Tag routing rules <sup id=fnref:5><a href=#fn:5 class=footnote-ref role=doc-noteref>5</a></sup> , when the application configures the <code>TagRouter</code> , a tagged dubbo invocation can intelligently route to the service provider which has the corresponding tag.</p><h3 id=provider>Provider</h3><ol><li>configure TagRouter for the application</li></ol><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java><span style=color:#268bd2>@Bean</span>
<span style=color:#268bd2>public</span> ApplicationConfig <span style=color:#268bd2>applicationConfig</span><span style=color:#719e07>()</span> <span style=color:#719e07>{</span>
    ApplicationConfig applicationConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ApplicationConfig<span style=color:#719e07>();</span>
    applicationConfig<span style=color:#719e07>.</span>setName<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;provider-book&#34;</span><span style=color:#719e07>);</span>
    applicationConfig<span style=color:#719e07>.</span>setQosEnable<span style=color:#719e07>(</span><span style=color:#cb4b16>false</span><span style=color:#719e07>);</span>
    <span style=color:#586e75>// instruct tag router
</span><span style=color:#586e75></span>    Map<span style=color:#719e07>&lt;</span>String<span style=color:#719e07>,</span>String<span style=color:#719e07>&gt;</span> parameters <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> HashMap<span style=color:#719e07>&lt;&gt;();</span>
    parameters<span style=color:#719e07>.</span>put<span style=color:#719e07>(</span>Constants<span style=color:#719e07>.</span>ROUTER_KEY<span style=color:#719e07>,</span> <span style=color:#2aa198>&#34;tag&#34;</span><span style=color:#719e07>);</span>
    applicationConfig<span style=color:#719e07>.</span>setParameters<span style=color:#719e07>(</span>parameters<span style=color:#719e07>);</span>
    <span style=color:#719e07>return</span> applicationConfig<span style=color:#719e07>;</span>
<span style=color:#719e07>}</span>
</code></pre></div><ol start=2><li>configure specfic tag for the provider</li></ol><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#268bd2>@Bean</span>
<span style=color:#268bd2>public</span> ProviderConfig <span style=color:#268bd2>providerConfig</span><span style=color:#719e07>(){</span>
	ProviderConfig providerConfig <span style=color:#719e07>=</span> <span style=color:#719e07>new</span> ProviderConfig<span style=color:#719e07>();</span>
	providerConfig<span style=color:#719e07>.</span>setTag<span style=color:#719e07>(</span><span style=color:#2aa198>&#34;red&#34;</span><span style=color:#719e07>);</span>
	<span style=color:#719e07>return</span> providerConfig<span style=color:#719e07>;</span>
<span style=color:#719e07>}</span>
</code></pre></div><p>The application which configures no tag will be considered as the default application, and these default apps will be treated as downgrades when the invocation fails to match the provider.</p><h3 id=consumer>Consumer</h3><div class=highlight><pre style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-Java data-lang=Java>RpcContext<span style=color:#719e07>.</span>getContext<span style=color:#719e07>().</span>setAttachment<span style=color:#719e07>(</span>Constants<span style=color:#719e07>.</span>REQUEST_TAG_KEY<span style=color:#719e07>,</span><span style=color:#2aa198>&#34;red&#34;</span><span style=color:#719e07>);</span>
</code></pre></div><p>The scope of the <code>request.tag</code> is for each invocation, using the attachment to pass the request tag. Note that the value stored in the attachment will be passed continuously in a complete remote invocation, thanks to this feature, we only need to set the tag at the beginning of a invocation.</p><blockquote><p>Currently, only <strong>hardcoding</strong> is supported to set requestTag. Note that RpcContext is thread-bound, elegantly using the TagRouter feature, it is recommended to set the request tag via a servlet filter (in the web environment) or a custom dubbo SPI filter.</p></blockquote><h3 id=rules-1>Rules:</h3><ol><li><p><code>request.tag=red</code> will firstlt choose the provider which configures as <code>tag=red</code>. If there is no service corresponding to the request tag in the cluster, it will downgrade to <code>tag=null</code> provider, seen as default provider。</p></li><li><p>when <code>request.tag=null</code>, only <code>tag=null</code> provider will be matched. Even if there are services available in the cluster, the tags do not match, they cannot be called. This is different from rule 1. Tagged invocation can be downgraded to untagged services, but invocations that do not carry tags/carry other types of tags can never be accessed other tag services.</p></li></ol><section class=footnotes role=doc-endnotes><hr><ol><li id=fn:1 role=doc-endnote><p>Support since <code>2.2.0</code> <a href=#fnref:1 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:2 role=doc-endnote><p>Routing Rules Extension Point: <a href=/docs/dev/impls/router.html>Route Extension</a> <a href=#fnref:2 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:3 role=doc-endnote><p>Note: A service can only have one whitelist rule, otherwise the two rules will be filtered out. <a href=#fnref:3 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:4 role=doc-endnote><p>Note: Scripts have no sandbox constraints, can execute arbitrary code, and poses a backdoor risk. <a href=#fnref:4 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li><li id=fn:5 role=doc-endnote><p>Support since <code>2.7.0</code> <a href=#fnref:5 class=footnote-backref role=doc-backlink>&#8617;&#xfe0e;</a></p></li></ol></section><style>.feedback--answer{display:inline-block}.feedback--answer-no{margin-left:1em}.feedback--response{display:none;margin-top:1em}.feedback--response__visible{display:block}</style><h2 class=feedback--title>Feedback</h2><p class=feedback--question>Was this page helpful?</p><button class="feedback--answer feedback--answer-yes">Yes</button>
<button class="feedback--answer feedback--answer-no">No</button><p class="feedback--response feedback--response-yes">Glad to hear it! Please <a href=https://github.com/apache/dubbo-website/issues/new>tell us how we can improve</a>.</p><p class="feedback--response feedback--response-no">Sorry to hear that. Please <a href=https://github.com/apache/dubbo-website/issues/new>tell us how we can improve</a>.</p><script>const yesButton=document.querySelector('.feedback--answer-yes');const noButton=document.querySelector('.feedback--answer-no');const yesResponse=document.querySelector('.feedback--response-yes');const noResponse=document.querySelector('.feedback--response-no');const disableButtons=()=>{yesButton.disabled=true;noButton.disabled=true;};const sendFeedback=(value)=>{if(typeof ga!=='function')return;const args={command:'send',hitType:'event',category:'Helpful',action:'click',label:window.location.pathname,value:value};ga(args.command,args.hitType,args.category,args.action,args.label,args.value);};yesButton.addEventListener('click',()=>{yesResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(1);});noButton.addEventListener('click',()=>{noResponse.classList.add('feedback--response__visible');disableButtons();sendFeedback(0);});</script><br><div class="text-muted mt-5 pt-3 border-top">Last modified November 16, 2020: <a href=https://github.com/apache/dubbo-website/commit/d43ecbb36b9606486e945fab6e3261e2e780b5cf>remove dup workflow file (d43ecbb)</a></div></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Dubbo mailing list archive" aria-label="Dubbo mailing list archive"><a class=text-white target=_blank rel="noopener noreferrer" href=https://lists.apache.org/list.html?dev@dubbo.apache.org><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/ApacheDubbo><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/apache/dubbo><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Subscribe to mailing list" aria-label="Subscribe to mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=mailto://dev-subscribe@dubbo.apache.org><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2020 The Apache Software Foundation. Apache and the Apache feather logo are trademarks of The Apache Software Foundation. All Rights Reserved</small></div></div></div></footer></div><script src=/js/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.b5fc1b29d2465835844254bd4d804738eaf24c0cec53009b4c6899989be55a47.js integrity="sha256-tfwbKdJGWDWEQlS9TYBHOOryTAzsUwCbTGiZmJvlWkc=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><script>docsearch({apiKey:'38eff7758162fbf70f2b8484932e62ae',indexName:'apache_dubbo',inputSelector:'.td-search-input',debug:false,});</script></body></html>