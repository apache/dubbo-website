{
  "filename": "zookeeper.md",
  "__html": "<h1>install Zookeeper configuration center</h1>\n<p>zookeeper register center client version: <code>dubbo-2.3.3</code> and above<sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup></p>\n<p>Dubbo changes nothing of Zookeeper's server side, an original Zookeeper server is fine. All change happens while calling Zookeeper's client side</p>\n<p>install:</p>\n<pre><code class=\"language-sh\">wget http://archive.apache.org/dist/zookeeper/zookeeper-3.3.3/zookeeper-3.3.3.tar.gz\ntar zxvf zookeeper-3.3.3.tar.gz\n<span class=\"hljs-built_in\">cd</span> zookeeper-3.3.3\ncp conf/zoo_sample.cfg conf/zoo.cfg\n</code></pre>\n<p>configuration:</p>\n<pre><code class=\"language-sh\">vi conf/zoo.cfg\n</code></pre>\n<p>If cluster is not needed, the content of <code>zoo.cfg</code> is as below <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup>:</p>\n<pre><code class=\"language-properties\">tickTime=2000\ninitLimit=10\nsyncLimit=5\ndataDir=/home/dubbo/zookeeper-3.3.3/data\nclientPort=2181\n</code></pre>\n<p>If cluster is needed, the content of <code>zoo.cfg</code> is as below <sup class=\"footnote-ref\"><a href=\"#fn3\" id=\"fnref3\">[3]</a></sup>:</p>\n<pre><code class=\"language-properties\">tickTime=2000\ninitLimit=10\nsyncLimit=5\ndataDir=/home/dubbo/zookeeper-3.3.3/data\nclientPort=2181\nserver.1=10.20.153.10:2555:3555\nserver.2=10.20.153.11:2555:3555\n</code></pre>\n<p>Put myid file in data directory <sup class=\"footnote-ref\"><a href=\"#fn4\" id=\"fnref4\">[4]</a></sup>:</p>\n<pre><code class=\"language-sh\">mkdir data\nvi myid\n</code></pre>\n<p>Myid is the number after <code>server</code> in <code>zoo.cfg</code>. The first one's content is 1, the second one's content is 2:</p>\n<pre><code>1\n</code></pre>\n<p>Start:</p>\n<pre><code class=\"language-sh\">./bin/zkServer.sh start\n</code></pre>\n<p>Stop:</p>\n<pre><code class=\"language-sh\">./bin/zkServer.sh stop\n</code></pre>\n<p>Command line <sup class=\"footnote-ref\"><a href=\"#fn5\" id=\"fnref5\">[5]</a></sup>:</p>\n<pre><code class=\"language-sh\">telnet 127.0.0.1 2181\ndump\n</code></pre>\n<p>Or:</p>\n<pre><code class=\"language-shell\">echo dump | nc 127.0.0.1 2181\n</code></pre>\n<p>Usage:</p>\n<pre><code class=\"language-xml\">dubbo.registry.address=zookeeper://10.20.153.10:2181?backup=10.20.153.11:2181\n</code></pre>\n<p>Or:</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:registry</span> <span class=\"hljs-attr\">protocol</span>=<span class=\"hljs-string\">\"zookeeper\"</span> <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">\"10.20.153.10:2181,10.20.153.11:2181\"</span> /&gt;</span>\n</code></pre>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p>Zookeeper is a sub project of Apache <a href=\"http://Hadoop.As\">Hadoop.As</a> it is robust, we recommend to use in production environment. <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p>Data directory should be changed into your real output directory <a href=\"#fnref2\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn3\" class=\"footnote-item\"><p>Data directory and server address should be changed into your real machine information <a href=\"#fnref3\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn4\" class=\"footnote-item\"><p><code>dataDir</code> in <code>zoo.cfg</code> <a href=\"#fnref4\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn5\" class=\"footnote-item\"><p><a href=\"http://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html\">http://zookeeper.apache.org/doc/r3.3.3/zookeeperAdmin.html</a> <a href=\"#fnref5\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n"
}