{
  "filename": "serviceGovernance.md",
  "__html": "<h1>Service governance and configuration management</h1>\n<h2>Service governance</h2>\n<p>服务治理主要作用是改变运行时服务的行为和选址逻辑，达到限流，权重配置等目的，主要有以下几个功能：<br>\nthe basic function of service governance is changing the runtime behaviour and routing logic, to do weight configuration and current limiting:</p>\n<h3>应用级别的服务治理</h3>\n<h3>application level service governance</h3>\n<p>在Dubbo2.6及更早版本中，所有的服务治理规则都只针对服务粒度，如果要把某条规则作用到应用粒度上，需要为应用下的所有服务配合相同的规则，变更，删除的时候也需要对应的操作，这样的操作很不友好，因此Dubbo2.7版本中增加了应用粒度的服务治理操作，对于条件路由(包括黑白名单)，动态配置(包括权重，负载均衡)都可以做应用级别的配置：<br>\nIn Dubbo 2.6 or earlier version, all service governance rule are in service scope, if you need to make application scope rule, you need to set the same rule for all services under an application, modify and delete need the same operation, this is very unfriendly. In Dubbo 2.7, application scope service governance is supported, condition route(including black white list) and dynamic configuration(including weight, load balance) all support application scope config.\n<img src=\"../../../img/blog/admin/conditionRoute.jpg\" alt=\"condition\"><br>\npicture above is condition route configuration, can create and search by both application name and service name.</p>\n<h3>tag route</h3>\n<p>标签路由是Dubbo2.7引入的新功能，配置以应用作为维度，给不同的服务器打上不同名字的标签，配置如下图所示：\ntag route is a new feature in Dubbo2.7, in application scope, to set different tag on different server, the screenshot is shown as below:\n<img src=\"../../../img/blog/admin/route.jpg\" alt=\"tag\">\nthe client can use <code>setAttachment</code> to specify different tag, is the above case, <code>setAttachment(tag1)</code>, the client will choose from the three servers in the picture above. In this way, you can implement features such as traffic isolation and gray release.</p>\n<h3>condition route</h3>\n<p>condition route is a traditional function in Dubbo, now you can create it in either service scope or application scope. Condition route is in <code>yaml</code> format, you can read <a href=\"../user/demo/routing-rule.md\">here</a> to find more.</p>\n<h3>black white list</h3>\n<p>black white list is a part of condition route and store with condition route together, you can set black list or white list, in either service scope or application scope:\n<img src=\"sources/images/blackList.jpg\" alt=\"blackList\"></p>\n<h3>dynamic configuration</h3>\n<p>dynamic configuration has the same level with routing rule, it can change the RPC behaviour dynamically without restart service. It supports application scope since Dubbo 2,7, in Dubbo format, the screen shot shows in below:\n<img src=\"sources/images/config.jpg\" alt=\"config\">\nto read more, please refer <a href=\"../user/demos/config-rule.md\">here</a></p>\n<h3>weight adjust</h3>\n<p>weigth adjuest is part of dynamic configuration, change the weight of server side to do traffic control dynamically:\n<img src=\"sources/images/weight.jpg\" alt=\"weight\"></p>\n<h3>load balancing</h3>\n<p>load balancing is also poart of dynamic configuration, to specify the route strategy in client side. now we have three strategies: random, least active and round robin, to read more, please refer <a href=\"../user/demos/loadbalance.md\">here</a></p>\n<h2>configuration management</h2>\n<p>configuration management is also a new feaature for Dubbo 2.7. In Dubbo 2.7, we can specify configurations in global scope and application scope(including services in application), you can view, modify and create new configurations in Dubbo Admin.</p>\n<ul>\n<li>global configuration:\n<img src=\"../../../img/blog/admin/config.jpg\" alt=\"config\"><br>\nyou can set registry center, metadata center, timeout for provider and consumer in global configurations. If the implementation of registry center and metadata center is zookeeper, you can also check the location of configuration file.</li>\n<li>application and service scope configuration:\n<img src=\"../../../img/blog/admin/appConfig.jpg\" alt=\"appConfig\"><br>\napplication configuration can also set service configuration in this application. you need to specify consumer and provider in service scope: <code>dubbo.reference.{serviceName}</code>stands for configuration as consumer side，<code>dubbo.provider.{servcieName}</code>stands for configuration as provider side. the address of registry address and metadata center address can only be configured in global configuration, which is also the recommendation way in Dubbo 2.7</li>\n<li>priority service configuration &gt; application configuration &gt; global configuration</li>\n</ul>\n",
  "link": "/en-us/docs/admin/serviceGovernance.html",
  "meta": {}
}