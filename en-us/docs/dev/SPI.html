<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="SPI" />
	<meta name="description" content="SPI" />
	<!-- 网页标签标题 -->
	<title>SPI</title>
	<link rel="shortcut icon" href="/img/dubbo.ico"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot="" data-reactid="1" data-react-checksum="-507673669"><header class="header-container header-container-normal" data-reactid="2"><div class="header-body" data-reactid="3"><a href="/en-us/index.html" data-reactid="4"><img class="logo" src="/img/dubbo_colorful.png" data-reactid="5"/></a><span class="language-switch language-switch-normal" data-reactid="6">中</span><div class="header-menu" data-reactid="7"><img class="header-menu-toggle" src="/img/menu_gray.png" data-reactid="8"/><ul data-reactid="9"><li class="menu-item menu-item-normal" data-reactid="10"><a href="/en-us/index.html" data-reactid="11">HOME</a></li><li class="menu-item menu-item-normal menu-item-normal-active" data-reactid="12"><a href="/en-us/docs/user/quick-start.html" data-reactid="13">DOCS</a></li><li class="menu-item menu-item-normal" data-reactid="14"><a href="/en-us/blog/index.html" data-reactid="15">BLOG</a></li><li class="menu-item menu-item-normal" data-reactid="16"><a href="/en-us/community/index.html" data-reactid="17">COMMUNITY</a></li></ul></div></div></header><div class="bar" data-reactid="18"><div class="bar-body" data-reactid="19"><img src="/img/docs.png" class="front-img" data-reactid="20"/><span data-reactid="21">Documentation</span><img src="/img/docs.png" class="back-img" data-reactid="22"/></div></div><section class="content-section" data-reactid="23"><div class="sidemenu" data-reactid="24"><div class="sidemenu-toggle" data-reactid="25"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png" data-reactid="26"/></div><ul data-reactid="27"><li class="menu-item menu-item-level-1" data-reactid="28"><span data-reactid="29">User doc</span><ul data-reactid="30"><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="31"><span data-reactid="32"><!-- react-text: 33 -->Preface<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="34"/></span><ul data-reactid="35"><li class="menu-item menu-item-level-3" data-reactid="36"><a href="/en-us/docs/user/preface/background.html" target="_self" data-reactid="37">Background</a></li><li class="menu-item menu-item-level-3" data-reactid="38"><a href="/en-us/docs/user/preface/requirements.html" target="_self" data-reactid="39">Requirements</a></li><li class="menu-item menu-item-level-3" data-reactid="40"><a href="/en-us/docs/user/preface/architecture.html" target="_self" data-reactid="41">Architecture</a></li><li class="menu-item menu-item-level-3" data-reactid="42"><a href="/en-us/docs/user/preface/usage.html" target="_self" data-reactid="43">Usage</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="44"><a href="/en-us/docs/user/quick-start.html" target="_self" data-reactid="45">Quick start</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="46"><a href="/en-us/docs/user/dependencies.html" target="_self" data-reactid="47">Dependencies</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="48"><a href="/en-us/docs/user/maturity.html" target="_self" data-reactid="49">Maturality</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="50"><span data-reactid="51"><!-- react-text: 52 -->Configuration<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="53"/></span><ul data-reactid="54"><li class="menu-item menu-item-level-3" data-reactid="55"><a href="/en-us/docs/user/configuration/xml.html" target="_self" data-reactid="56">XML configuration</a></li><li class="menu-item menu-item-level-3" data-reactid="57"><a href="/en-us/docs/user/configuration/properties.html" target="_self" data-reactid="58">Properties configuration</a></li><li class="menu-item menu-item-level-3" data-reactid="59"><a href="/en-us/docs/user/configuration/api.html" target="_self" data-reactid="60">API configuration</a></li><li class="menu-item menu-item-level-3" data-reactid="61"><a href="/en-us/docs/user/configuration/annotation.html" target="_self" data-reactid="62">Annotation configuration</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="63"><span data-reactid="64"><!-- react-text: 65 -->Demos<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="66"/></span><ul data-reactid="67"><li class="menu-item menu-item-level-3" data-reactid="68"><a href="/en-us/docs/user/demos/preflight-check.html" target="_self" data-reactid="69">Start check</a></li><li class="menu-item menu-item-level-3" data-reactid="70"><a href="/en-us/docs/user/demos/fault-tolerent-strategy.html" target="_self" data-reactid="71">Fault-tolerent strategy</a></li><li class="menu-item menu-item-level-3" data-reactid="72"><a href="/en-us/docs/user/demos/loadbalance.html" target="_self" data-reactid="73">Load balance</a></li><li class="menu-item menu-item-level-3" data-reactid="74"><a href="/en-us/docs/user/demos/thread-model.html" target="_self" data-reactid="75">Thread model</a></li><li class="menu-item menu-item-level-3" data-reactid="76"><a href="/en-us/docs/user/demos/explicit-target.html" target="_self" data-reactid="77">Connecting certain provider straightly</a></li><li class="menu-item menu-item-level-3" data-reactid="78"><a href="/en-us/docs/user/demos/subscribe-only.html" target="_self" data-reactid="79">Subscribe only</a></li><li class="menu-item menu-item-level-3" data-reactid="80"><a href="/en-us/docs/user/demos/registry-only.html" target="_self" data-reactid="81">Registry only</a></li><li class="menu-item menu-item-level-3" data-reactid="82"><a href="/en-us/docs/user/demos/static-service.html" target="_self" data-reactid="83">Static service</a></li><li class="menu-item menu-item-level-3" data-reactid="84"><a href="/en-us/docs/user/demos/multi-protocols.html" target="_self" data-reactid="85">Multi-protocols</a></li><li class="menu-item menu-item-level-3" data-reactid="86"><a href="/en-us/docs/user/demos/multi-registry.html" target="_self" data-reactid="87">Multi-registries</a></li><li class="menu-item menu-item-level-3" data-reactid="88"><a href="/en-us/docs/user/demos/service-group.html" target="_self" data-reactid="89">Service group</a></li><li class="menu-item menu-item-level-3" data-reactid="90"><a href="/en-us/docs/user/demos/multi-versions.html" target="_self" data-reactid="91">Multi-versions</a></li><li class="menu-item menu-item-level-3" data-reactid="92"><a href="/en-us/docs/user/demos/group-merger.html" target="_self" data-reactid="93">Group merger</a></li><li class="menu-item menu-item-level-3" data-reactid="94"><a href="/en-us/docs/user/demos/parameter-validation.html" target="_self" data-reactid="95">Parameter validation</a></li><li class="menu-item menu-item-level-3" data-reactid="96"><a href="/en-us/docs/user/demos/result-cache.html" target="_self" data-reactid="97">Result cache</a></li><li class="menu-item menu-item-level-3" data-reactid="98"><a href="/en-us/docs/user/demos/generic-reference.html" target="_self" data-reactid="99">Generic reference</a></li><li class="menu-item menu-item-level-3" data-reactid="100"><a href="/en-us/docs/user/demos/generic-service.html" target="_self" data-reactid="101">Generic service</a></li><li class="menu-item menu-item-level-3" data-reactid="102"><a href="/en-us/docs/user/demos/echo-service.html" target="_self" data-reactid="103">Echo service</a></li><li class="menu-item menu-item-level-3" data-reactid="104"><a href="/en-us/docs/user/demos/context.html" target="_self" data-reactid="105">Context</a></li><li class="menu-item menu-item-level-3" data-reactid="106"><a href="/en-us/docs/user/demos/attachment.html" target="_self" data-reactid="107">Attachment</a></li><li class="menu-item menu-item-level-3" data-reactid="108"><a href="/en-us/docs/user/demos/async-call.html" target="_self" data-reactid="109">Asynchronous call</a></li><li class="menu-item menu-item-level-3" data-reactid="110"><a href="/en-us/docs/user/demos/local-call.html" target="_self" data-reactid="111">Local call</a></li><li class="menu-item menu-item-level-3" data-reactid="112"><a href="/en-us/docs/user/demos/callback-parameter.html" target="_self" data-reactid="113">Callback parameter</a></li><li class="menu-item menu-item-level-3" data-reactid="114"><a href="/en-us/docs/user/demos/events-notify.html" target="_self" data-reactid="115">Events notify</a></li><li class="menu-item menu-item-level-3" data-reactid="116"><a href="/en-us/docs/user/demos/local-stub.html" target="_self" data-reactid="117">Local stub</a></li><li class="menu-item menu-item-level-3" data-reactid="118"><a href="/en-us/docs/user/demos/local-mock.html" target="_self" data-reactid="119">Local mock</a></li><li class="menu-item menu-item-level-3" data-reactid="120"><a href="/en-us/docs/user/demos/delay-publish.html" target="_self" data-reactid="121">Delay publish</a></li><li class="menu-item menu-item-level-3" data-reactid="122"><a href="/en-us/docs/user/demos/concurrency-control.html" target="_self" data-reactid="123">Concurrency control</a></li><li class="menu-item menu-item-level-3" data-reactid="124"><a href="/en-us/docs/user/demos/config-connections.html" target="_self" data-reactid="125">Connections limitation</a></li><li class="menu-item menu-item-level-3" data-reactid="126"><a href="/en-us/docs/user/demos/lazy-connect.html" target="_self" data-reactid="127">Lazy connect</a></li><li class="menu-item menu-item-level-3" data-reactid="128"><a href="/en-us/docs/user/demos/stickiness.html" target="_self" data-reactid="129">Stickness connections</a></li><li class="menu-item menu-item-level-3" data-reactid="130"><a href="/en-us/docs/user/demos/token-authorization.html" target="_self" data-reactid="131">Token authorization</a></li><li class="menu-item menu-item-level-3" data-reactid="132"><a href="/en-us/docs/user/demos/routing-rule.html" target="_self" data-reactid="133">Routing rule</a></li><li class="menu-item menu-item-level-3" data-reactid="134"><a href="/en-us/docs/user/demos/config-rule.html" target="_self" data-reactid="135">Configuration rule</a></li><li class="menu-item menu-item-level-3" data-reactid="136"><a href="/en-us/docs/user/demos/service-downgrade.html" target="_self" data-reactid="137">Service downgrade</a></li><li class="menu-item menu-item-level-3" data-reactid="138"><a href="/en-us/docs/user/demos/graceful-shutdown.html" target="_self" data-reactid="139">Graceful shutdown</a></li><li class="menu-item menu-item-level-3" data-reactid="140"><a href="/en-us/docs/user/demos/hostname-binding.html" target="_self" data-reactid="141">Hostname binding</a></li><li class="menu-item menu-item-level-3" data-reactid="142"><a href="/en-us/docs/user/demos/logger-strategy.html" target="_self" data-reactid="143">Logger strategy</a></li><li class="menu-item menu-item-level-3" data-reactid="144"><a href="/en-us/docs/user/demos/accesslog.html" target="_self" data-reactid="145">Accesslog</a></li><li class="menu-item menu-item-level-3" data-reactid="146"><a href="/en-us/docs/user/demos/service-container.html" target="_self" data-reactid="147">Service container</a></li><li class="menu-item menu-item-level-3" data-reactid="148"><a href="/en-us/docs/user/demos/reference-config-cache.html" target="_self" data-reactid="149">Reference config cache</a></li><li class="menu-item menu-item-level-3" data-reactid="150"><a href="/en-us/docs/user/demos/distributed-transaction.html" target="_self" data-reactid="151">Distributed transaction</a></li><li class="menu-item menu-item-level-3" data-reactid="152"><a href="/en-us/docs/user/demos/dump.html" target="_self" data-reactid="153">Automatic thread dump</a></li><li class="menu-item menu-item-level-3" data-reactid="154"><a href="/en-us/docs/user/demos/netty4.html" target="_self" data-reactid="155">Netty4</a></li><li class="menu-item menu-item-level-3" data-reactid="156"><a href="/en-us/docs/user/demos/serialization.html" target="_self" data-reactid="157">Serialization with FST and Kyro</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="158"><a href="/en-us/docs/user/references/api.html" target="_self" data-reactid="159">API configuration reference</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="160"><span data-reactid="161"><!-- react-text: 162 -->Schema configuration reference<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="163"/></span><ul data-reactid="164"><li class="menu-item menu-item-level-3" data-reactid="165"><a href="/en-us/docs/user/references/xml/introduction.html" target="_self" data-reactid="166">Introduction</a></li><li class="menu-item menu-item-level-3" data-reactid="167"><a href="/en-us/docs/user/references/xml/dubbo-service.html" target="_self" data-reactid="168">dubbo:service</a></li><li class="menu-item menu-item-level-3" data-reactid="169"><a href="/en-us/docs/user/references/xml/dubbo-reference.html" target="_self" data-reactid="170">dubbo:reference</a></li><li class="menu-item menu-item-level-3" data-reactid="171"><a href="/en-us/docs/user/references/xml/dubbo-protocol.html" target="_self" data-reactid="172">dubbo:protocol</a></li><li class="menu-item menu-item-level-3" data-reactid="173"><a href="/en-us/docs/user/references/xml/dubbo-registry.html" target="_self" data-reactid="174">dubbo:registry</a></li><li class="menu-item menu-item-level-3" data-reactid="175"><a href="/en-us/docs/user/references/xml/dubbo-monitor.html" target="_self" data-reactid="176">dubbo:monitor</a></li><li class="menu-item menu-item-level-3" data-reactid="177"><a href="/en-us/docs/user/references/xml/dubbo-application.html" target="_self" data-reactid="178">dubbo:application</a></li><li class="menu-item menu-item-level-3" data-reactid="179"><a href="/en-us/docs/user/references/xml/dubbo-module.html" target="_self" data-reactid="180">dubbo:module</a></li><li class="menu-item menu-item-level-3" data-reactid="181"><a href="/en-us/docs/user/references/xml/dubbo-provider.html" target="_self" data-reactid="182">dubbo:provider</a></li><li class="menu-item menu-item-level-3" data-reactid="183"><a href="/en-us/docs/user/references/xml/dubbo-consumer.html" target="_self" data-reactid="184">dubbo:consumer</a></li><li class="menu-item menu-item-level-3" data-reactid="185"><a href="/en-us/docs/user/references/xml/dubbo-method.html" target="_self" data-reactid="186">dubbo:method</a></li><li class="menu-item menu-item-level-3" data-reactid="187"><a href="/en-us/docs/user/references/xml/dubbo-argument.html" target="_self" data-reactid="188">dubbo:argument</a></li><li class="menu-item menu-item-level-3" data-reactid="189"><a href="/en-us/docs/user/references/xml/dubbo-parameter.html" target="_self" data-reactid="190">dubbo:parameter</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="191"><span data-reactid="192"><!-- react-text: 193 -->Protocol configuration reference<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="194"/></span><ul data-reactid="195"><li class="menu-item menu-item-level-3" data-reactid="196"><a href="/en-us/docs/user/references/protocol/introduction.html" target="_self" data-reactid="197">Introduction</a></li><li class="menu-item menu-item-level-3" data-reactid="198"><a href="/en-us/docs/user/references/protocol/dubbo.html" target="_self" data-reactid="199">dubbo://</a></li><li class="menu-item menu-item-level-3" data-reactid="200"><a href="/en-us/docs/user/references/protocol/rmi.html" target="_self" data-reactid="201">rmi://</a></li><li class="menu-item menu-item-level-3" data-reactid="202"><a href="/en-us/docs/user/references/protocol/hessian.html" target="_self" data-reactid="203">hessian://</a></li><li class="menu-item menu-item-level-3" data-reactid="204"><a href="/en-us/docs/user/references/protocol/http.html" target="_self" data-reactid="205">http://</a></li><li class="menu-item menu-item-level-3" data-reactid="206"><a href="/en-us/docs/user/references/protocol/webservice.html" target="_self" data-reactid="207">webservice://</a></li><li class="menu-item menu-item-level-3" data-reactid="208"><a href="/en-us/docs/user/references/protocol/thrift.html" target="_self" data-reactid="209">thrift://</a></li><li class="menu-item menu-item-level-3" data-reactid="210"><a href="/en-us/docs/user/references/protocol/memcached.html" target="_self" data-reactid="211">memcached://</a></li><li class="menu-item menu-item-level-3" data-reactid="212"><a href="/en-us/docs/user/references/protocol/redis.html" target="_self" data-reactid="213">redis://</a></li><li class="menu-item menu-item-level-3" data-reactid="214"><a href="/en-us/docs/user/references/protocol/rest.html" target="_self" data-reactid="215">rest://</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="216"><span data-reactid="217"><!-- react-text: 218 -->Registry configuration reference<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="219"/></span><ul data-reactid="220"><li class="menu-item menu-item-level-3" data-reactid="221"><a href="/en-us/docs/user/references/registry/introduction.html" target="_self" data-reactid="222">Introduction</a></li><li class="menu-item menu-item-level-3" data-reactid="223"><a href="/en-us/docs/user/references/registry/multicast.html" target="_self" data-reactid="224">Multicast registry</a></li><li class="menu-item menu-item-level-3" data-reactid="225"><a href="/en-us/docs/user/references/registry/zookeeper.html" target="_self" data-reactid="226">Zookeeper registry</a></li><li class="menu-item menu-item-level-3" data-reactid="227"><a href="/en-us/docs/user/references/registry/redis.html" target="_self" data-reactid="228">Redis registry</a></li><li class="menu-item menu-item-level-3" data-reactid="229"><a href="/en-us/docs/user/references/registry/simple.html" target="_self" data-reactid="230">Simple registry</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="231"><a href="/en-us/docs/user/references/telnet.html" target="_self" data-reactid="232">Telnet command</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="233"><a href="/en-us/docs/user/references/maven.html" target="_self" data-reactid="234">Maven plugin</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="235"><a href="/en-us/docs/user/best-practice.html" target="_self" data-reactid="236">Best practice</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="237"><a href="/en-us/docs/user/recommend.html" target="_self" data-reactid="238">Recommended usage</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="239"><a href="/en-us/docs/user/capacity-plan.html" target="_self" data-reactid="240">Capacity plan</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="241"><a href="/en-us/docs/user/perf-test.html" target="_self" data-reactid="242">Performance testing reports</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="243"><a href="/en-us/docs/user/coveragence.html" target="_self" data-reactid="244">Test coverage report</a></li></ul></li><li class="menu-item menu-item-level-1" data-reactid="245"><span data-reactid="246">Developer guide</span><ul data-reactid="247"><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="248"><a href="/en-us/docs/dev/build.html" target="_self" data-reactid="249">How To Build</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="250"><a href="/en-us/docs/dev/design.html" target="_self" data-reactid="251">Architecture</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="252"><a href="/en-us/docs/dev/SPI.html" target="_self" data-reactid="253">How SPI Works</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="254"><a href="/en-us/docs/dev/implementation.html" target="_self" data-reactid="255">Init, Process, Protocols</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="256"><span data-reactid="257"><!-- react-text: 258 -->SPI Extensions<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="259"/></span><ul data-reactid="260"><li class="menu-item menu-item-level-3" data-reactid="261"><a href="/en-us/docs/dev/impls/protocol.html" target="_self" data-reactid="262">Protocol</a></li><li class="menu-item menu-item-level-3" data-reactid="263"><a href="/en-us/docs/dev/impls/filter.html" target="_self" data-reactid="264">Filter</a></li><li class="menu-item menu-item-level-3" data-reactid="265"><a href="/en-us/docs/dev/impls/invoker-listener.html" target="_self" data-reactid="266">InvokerListener</a></li><li class="menu-item menu-item-level-3" data-reactid="267"><a href="/en-us/docs/dev/impls/exporter-listener.html" target="_self" data-reactid="268">ExporterListener</a></li><li class="menu-item menu-item-level-3" data-reactid="269"><a href="/en-us/docs/dev/impls/cluster.html" target="_self" data-reactid="270">Cluster</a></li><li class="menu-item menu-item-level-3" data-reactid="271"><a href="/en-us/docs/dev/impls/router.html" target="_self" data-reactid="272">Router</a></li><li class="menu-item menu-item-level-3" data-reactid="273"><a href="/en-us/docs/dev/impls/load-balance.html" target="_self" data-reactid="274">LoadBalance</a></li><li class="menu-item menu-item-level-3" data-reactid="275"><a href="/en-us/docs/dev/impls/merger.html" target="_self" data-reactid="276">Merger</a></li><li class="menu-item menu-item-level-3" data-reactid="277"><a href="/en-us/docs/dev/impls/registry.html" target="_self" data-reactid="278">Registry</a></li><li class="menu-item menu-item-level-3" data-reactid="279"><a href="/en-us/docs/dev/impls/monitor.html" target="_self" data-reactid="280">Monitor</a></li><li class="menu-item menu-item-level-3" data-reactid="281"><a href="/en-us/docs/dev/impls/extension-factory.html" target="_self" data-reactid="282">ExtensionFactory</a></li><li class="menu-item menu-item-level-3" data-reactid="283"><a href="/en-us/docs/dev/impls/proxy-factory.html" target="_self" data-reactid="284">ProxyFactory</a></li><li class="menu-item menu-item-level-3" data-reactid="285"><a href="/en-us/docs/dev/impls/compiler.html" target="_self" data-reactid="286">Compiler</a></li><li class="menu-item menu-item-level-3" data-reactid="287"><a href="/en-us/docs/dev/impls/dispatcher.html" target="_self" data-reactid="288">Dispatcher</a></li><li class="menu-item menu-item-level-3" data-reactid="289"><a href="/en-us/docs/dev/impls/threadpool.html" target="_self" data-reactid="290">Threadpool</a></li><li class="menu-item menu-item-level-3" data-reactid="291"><a href="/en-us/docs/dev/impls/serialize.html" target="_self" data-reactid="292">Serialization</a></li><li class="menu-item menu-item-level-3" data-reactid="293"><a href="/en-us/docs/dev/impls/remoting.html" target="_self" data-reactid="294">Remoting</a></li><li class="menu-item menu-item-level-3" data-reactid="295"><a href="/en-us/docs/dev/impls/exchanger.html" target="_self" data-reactid="296">Exchanger</a></li><li class="menu-item menu-item-level-3" data-reactid="297"><a href="/en-us/docs/dev/impls/networker.html" target="_self" data-reactid="298">Networker</a></li><li class="menu-item menu-item-level-3" data-reactid="299"><a href="/en-us/docs/dev/impls/telnet-handler.html" target="_self" data-reactid="300">TelnetHandler</a></li><li class="menu-item menu-item-level-3" data-reactid="301"><a href="/en-us/docs/dev/impls/status-checker.html" target="_self" data-reactid="302">StatusChecker</a></li><li class="menu-item menu-item-level-3" data-reactid="303"><a href="/en-us/docs/dev/impls/container.html" target="_self" data-reactid="304">Container</a></li><li class="menu-item menu-item-level-3" data-reactid="305"><a href="/en-us/docs/dev/impls/page.html" target="_self" data-reactid="306">PageHandler</a></li><li class="menu-item menu-item-level-3" data-reactid="307"><a href="/en-us/docs/dev/impls/cache.html" target="_self" data-reactid="308">Cache</a></li><li class="menu-item menu-item-level-3" data-reactid="309"><a href="/en-us/docs/dev/impls/validation.html" target="_self" data-reactid="310">Validation</a></li><li class="menu-item menu-item-level-3" data-reactid="311"><a href="/en-us/docs/dev/impls/logger-adapter.html" target="_self" data-reactid="312">LoggerAdapter</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="313"><a href="/en-us/docs/dev/contract.html" target="_self" data-reactid="314">Contract</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="315"><a href="/en-us/docs/dev/coding.html" target="_self" data-reactid="316">Code Style</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="317"><a href="/en-us/docs/dev/release.html" target="_self" data-reactid="318">Versions</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="319"><a href="/en-us/docs/dev/contribution.html" target="_self" data-reactid="320">Contribution</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="321"><a href="/en-us/docs/dev/checklist.html" target="_self" data-reactid="322">Checklist</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="323"><a href="/en-us/docs/dev/code-smell.html" target="_self" data-reactid="324">Code Smell</a></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="325"><a href="/en-us/docs/dev/TCK.html" target="_self" data-reactid="326">TCK</a></li></ul></li><li class="menu-item menu-item-level-1" data-reactid="327"><span data-reactid="328">Admin guide</span><ul data-reactid="329"><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="330"><span data-reactid="331"><!-- react-text: 332 -->Installation<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="333"/></span><ul data-reactid="334"><li class="menu-item menu-item-level-3" data-reactid="335"><a href="/en-us/docs/admin/install/provider-demo.html" target="_self" data-reactid="336">Install provider demo</a></li><li class="menu-item menu-item-level-3" data-reactid="337"><a href="/en-us/docs/admin/install/consumer-demo.html" target="_self" data-reactid="338">Install consumer demo</a></li><li class="menu-item menu-item-level-3" data-reactid="339"><a href="/en-us/docs/admin/install/zookeeper.html" target="_self" data-reactid="340">Install Zookeeper configuration center</a></li><li class="menu-item menu-item-level-3" data-reactid="341"><a href="/en-us/docs/admin/install/redis.html" target="_self" data-reactid="342">Install Redis configuration center</a></li><li class="menu-item menu-item-level-3" data-reactid="343"><a href="/en-us/docs/admin/install/simple-registry-center.html" target="_self" data-reactid="344">Install Simple configuration center</a></li><li class="menu-item menu-item-level-3" data-reactid="345"><a href="/en-us/docs/admin/install/simple-monitor-center.html" target="_self" data-reactid="346">Install Simple monitor center</a></li><li class="menu-item menu-item-level-3" data-reactid="347"><a href="/en-us/docs/admin/install/admin-console.html" target="_self" data-reactid="348">Install admin console</a></li></ul></li><li style="height:36px;overflow:hidden;" class="menu-item menu-item-level-2" data-reactid="349"><span data-reactid="350"><!-- react-text: 351 -->Operation manual<!-- /react-text --><img style="transform:rotate(-90deg);" class="menu-toggle" src="/img/arrow_down.png" data-reactid="352"/></span><ul data-reactid="353"><li class="menu-item menu-item-level-3" data-reactid="354"><a href="/en-us/docs/admin/ops/dubbo-ops.html" target="_self" data-reactid="355">Admin console operation guide</a></li><li class="menu-item menu-item-level-3" data-reactid="356"><a href="/en-us/docs/admin/ops/pinpoint.html" target="_self" data-reactid="357">Tracking with Pinpoint</a></li><li class="menu-item menu-item-level-3" data-reactid="358"><a href="/en-us/docs/admin/ops/skywalking.html" target="_self" data-reactid="359">Tracking with Skywalking</a></li></ul></li></ul></li></ul></div><div class="doc-content markdown-body" data-reactid="360"><h1>SPI Loading</h1>
<h2>SPI Config</h2>
<h3>Source：</h3>
<p>Dubbo SPI is inherited from standard JDK SPI(Service Provider Interface) and makes it more powerful.</p>
<p>Dubbo fixed below issues of the standard JDK SPI：</p>
<ul>
<li>the standard JDK  SPI will load  and instantize all implementation at once. It will be a waste of resources if the implementation is timecosted ,but never be used.</li>
<li>We cann't accquire the SPI name,if loading the SPI implementation is failed.For example：standard JDK  ScriptEngine，get script type by invoking method getName(). RubyScriptEngine class will load failed if the depenency jar jruby.jar is missing，and the real error info will be lost. When user executes ruby scripts , program throws exception , telling not support ruby, but it is not the real cause.</li>
<li>Enhance the SPI functionality by supporting  IoC and AOP ，one SPI can be easily injected by another SPI simply using  setter.</li>
</ul>
<h3>Appointment：</h3>
<p>In the jar file containing extension class <sup class="footnote-ref"><a href="#fn1" id="fnref1">[1]</a></sup>，places a config file  <code>META-INF/dubbo/full interface name</code>，file content pattern：<code>SPI name=the fully qualified name for the extension class</code>，use new line seperator for multiple implementation.</p>
<h3>Example：</h3>
<p>To extend  Dubbo Protocol，placee a text file in the extension jar file：<code>META-INF/dubbo/com.alibaba.dubbo.rpc.Protocol</code>，content：</p>
<pre><code class="language-properties">xxx=com.alibaba.xxx.XxxProtocol
</code></pre>
<p>content of the implementation <sup class="footnote-ref"><a href="#fn2" id="fnref2">[2]</a></sup>：</p>
<pre><code class="language-java"><span class="hljs-keyword">package</span> com.alibaba.xxx;
 
<span class="hljs-keyword">import</span> com.alibaba.dubbo.rpc.Protocol;
 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XxxProtocol</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Protocol</span> </span>{ 
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<h3>Configuration in config module</h3>
<p>In Dubbo config module，all SPI points have related attributes or labels，we can choose the specific SPI implementation by using its name. Like：</p>
<pre><code class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">dubbo:protocol</span> <span class="hljs-attr">name</span>=<span class="hljs-string">"xxx"</span> /&gt;</span>
</code></pre>
<h2>SPI Features</h2>
<h3>SPI Auto Wrap</h3>
<p>Auto wrap the SPI's Wrapper class。<code>ExtensionLoader</code>  loads the SPI implementation，if the SPI has a copy instructor ,it will be regarded as the SPI's Wrapper class。</p>
<p>Wrapper class content：</p>
<pre><code class="language-java"><span class="hljs-keyword">package</span> com.alibaba.xxx;
 
<span class="hljs-keyword">import</span> com.alibaba.dubbo.rpc.Protocol;
 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XxxProtocolWrapper</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Protocol</span> </span>{
    Protocol impl;
 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">XxxProtocolWrapper</span><span class="hljs-params">(Protocol protocol)</span> </span>{ impl = protocol; }
 
    <span class="hljs-comment">//after interface method is executed，the method in extension will be executed</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">refer</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">//... some operation</span>
        impl.refer();
        <span class="hljs-comment">// ... some operation</span>
    }
 
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>Wrapper class also implements the same SPI interface，but Wrapper is not the real implementation。It is used for wrap the real  implementation  returned from the <code>ExtensionLoader</code> 。The real returned instance by   <code>ExtensionLoader</code>  is the Wrapper class instance，Wrapper holder the real SPI implementation class。</p>
<p>There can be many Wrapper for one spi, simply add one if you need。</p>
<p>By Wrapper class,you will be able move same logics into Wrapper for all SPIs。Newly added Wrapper class add external logics for all spis, looks like  AOP， Wrapper acts as a proxy for SPI.</p>
<h3>SPI Auto Load</h3>
<p>when loading the SPI，Dubbo will auto load the depency SPI. When one SPI implementation contains attribute which is also an SPI of another type,<code>ExtensionLoader</code> will automatically load the depency SPI.<code>ExtensionLoader</code> knows all the members of the specific SPI by scanning the setter method of all implementation class.</p>
<p>Demo：two SPI  <code>CarMaker</code>（car maker）、<code>WheelMaker</code> (wheel maker)</p>
<p>Intefaces look like：</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CarMaker</span> </span>{
    <span class="hljs-function">Car <span class="hljs-title">makeCar</span><span class="hljs-params">()</span></span>;
}
 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">WheelMaker</span> </span>{
    <span class="hljs-function">Wheel <span class="hljs-title">makeWheel</span><span class="hljs-params">()</span></span>;
}
</code></pre>
<p><code>CarMaker</code>  implementation：</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RaceCarMaker</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CarMaker</span> </span>{
    WheelMaker wheelMaker;
 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">setWheelMaker</span><span class="hljs-params">(WheelMaker wheelMaker)</span> </span>{
        <span class="hljs-keyword">this</span>.wheelMaker = wheelMaker;
    }
 
    <span class="hljs-function"><span class="hljs-keyword">public</span> Car <span class="hljs-title">makeCar</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-comment">// ...</span>
        Wheel wheel = wheelMaker.makeWheel();
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RaceCar(wheel, ...);
    }
}
</code></pre>
<p>when<code>ExtensionLoader</code> loading <code>CarMaker</code>  implementation <code>RaceCar</code> ，<code>setWheelMaker</code>  needs paramType <code>WheelMaker</code>  which is also an SPI, It will be automatically loaded .</p>
<p>This brings a new question:How <code>ExtensionLoader</code> determines which implementation to use when load the injected SPI。As for this demo, when existing multi <code>WheelMaker</code>  implementation, which one should the <code>ExtensionLoader</code>  chooses.</p>
<p>Good question ,we will explain it in the following chapter: SPI Auto Adaptive.</p>
<h3>SPI Auto Adaptive</h3>
<p>The depency SPI that <code>ExtensionLoader</code>  injects is an instance of <code>Adaptive</code>，the real spi implementation is known until the adaptive instance is be executed.</p>
<p>Dubbo  use URL (containing Key-Value) to pass the configuration.</p>
<p>The SPI method invocation has the URL parameter（Or Entity that has URL attribute）</p>
<p>In this way depended SPI can get configuration from URL，after config all SPI  key needed, configuration information will be passed from outer by URL.URL act as a bus when pass the config information.</p>
<p>Demo：two SPI  <code>CarMaker</code>、<code>WheelMaker</code></p>
<p>interface looks like：</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">CarMaker</span> </span>{
    <span class="hljs-function">Car <span class="hljs-title">makeCar</span><span class="hljs-params">(URL url)</span></span>;
}
 
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">WheelMaker</span> </span>{
    <span class="hljs-function">Wheel <span class="hljs-title">makeWheel</span><span class="hljs-params">(URL url)</span></span>;
}
</code></pre>
<p><code>CarMaker</code>  implementation：</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RaceCarMaker</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">CarMaker</span> </span>{
    WheelMaker wheelMaker;
 
    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">setWheelMaker</span><span class="hljs-params">(WheelMaker wheelMaker)</span> </span>{
        <span class="hljs-keyword">this</span>.wheelMaker = wheelMaker;
    }
 
    <span class="hljs-function"><span class="hljs-keyword">public</span> Car <span class="hljs-title">makeCar</span><span class="hljs-params">(URL url)</span> </span>{
        <span class="hljs-comment">// ...</span>
        Wheel wheel = wheelMaker.makeWheel(url);
        <span class="hljs-comment">// ...</span>
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> RaceCar(wheel, ...);
    }
}
</code></pre>
<p>when execute the code above</p>
<pre><code class="language-java"><span class="hljs-comment">// ...</span>
Wheel wheel = wheelMaker.makeWheel(url);
<span class="hljs-comment">// ...</span>
</code></pre>
<p>，the injected <code>Adaptive</code>  object determine which  <code>WheelMaker</code> 's  <code>makeWheel</code>  method will be executed by predefined Key.。Such  as <code>wheel.type</code>, key  <code>url.get(&quot;wheel.type&quot;)</code>  will determine <code>WheelMake</code>  implementation。The logic of<code>Adaptive</code> instance of fixed，getting the predefined Key of the URL，dynamically creating the real implementation and execute it.</p>
<p>For Dubbo , the SPI  <code>Adaptive</code>  implementation in  <code>ExtensionLoader</code>  is dynamically created when dubbo is loading the SPI。Get the Key from URL, the Key will be provided through <code>@Adaptive</code> annotation for the interface method definition.</p>
<p>Below is Dubbo  Transporter SPI codes：</p>
<pre><code class="language-java"><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">interface</span> <span class="hljs-title">Transporter</span> </span>{
    <span class="hljs-meta">@Adaptive</span>({<span class="hljs-string">"server"</span>, <span class="hljs-string">"transport"</span>})
    <span class="hljs-function">Server <span class="hljs-title">bind</span><span class="hljs-params">(URL url, ChannelHandler handler)</span> <span class="hljs-keyword">throws</span> RemotingException</span>;
 
    <span class="hljs-meta">@Adaptive</span>({<span class="hljs-string">"client"</span>, <span class="hljs-string">"transport"</span>})
    <span class="hljs-function">Client <span class="hljs-title">connect</span><span class="hljs-params">(URL url, ChannelHandler handler)</span> <span class="hljs-keyword">throws</span> RemotingException</span>;
}
</code></pre>
<p>for the method bind(),Adaptive will firstly search <code>server</code> key，if no Key  were founded then will search <code>transport</code> key ，to determine the implementation that the proxy represent for.</p>
<h3>SPI Auto Activation</h3>
<p>As for Collections SPI, such as：<code>Filter</code>, <code>InvokerListener</code>, <code>ExportListener</code>, <code>TelnetHandler</code>, <code>StatusChecker</code>  etc，multi implementations can be loaded at one time. User can simplify configuration by using auto activation，Like：</p>
<pre><code class="language-java"><span class="hljs-keyword">import</span> com.alibaba.dubbo.common.extension.Activate;
<span class="hljs-keyword">import</span> com.alibaba.dubbo.rpc.Filter;
 
<span class="hljs-meta">@Activate</span> <span class="hljs-comment">// Active for any condition</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XxxFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>{
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>Or：</p>
<pre><code class="language-java"><span class="hljs-keyword">import</span> com.alibaba.dubbo.common.extension.Activate;
<span class="hljs-keyword">import</span> com.alibaba.dubbo.rpc.Filter;
 
<span class="hljs-meta">@Activate</span>(<span class="hljs-string">"xxx"</span>) <span class="hljs-comment">// when configed xxx parameter and the parameter has a valid value,the SPI is activated，for example configed cache="lru"，auto acitivate CacheFilter。</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XxxFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>{
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<p>Or：</p>
<pre><code class="language-java"><span class="hljs-keyword">import</span> com.alibaba.dubbo.common.extension.Activate;
<span class="hljs-keyword">import</span> com.alibaba.dubbo.rpc.Filter;
 
<span class="hljs-meta">@Activate</span>(group = <span class="hljs-string">"provider"</span>, value = <span class="hljs-string">"xxx"</span>) <span class="hljs-comment">// only activate for provider，group can be "provider" or "consumer"</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XxxFilter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">Filter</span> </span>{
    <span class="hljs-comment">// ...</span>
}
</code></pre>
<hr class="footnotes-sep">
<section class="footnotes">
<ol class="footnotes-list">
<li id="fn1" class="footnote-item"><p>Note：The config file here is in you own jar file，not in dubbo release jar file，Dubbo  will scan all jar files for the same filename in  ClassPath and merge together then <a href="#fnref1" class="footnote-backref">↩︎</a></p>
</li>
<li id="fn2" class="footnote-item"><p>Note：SPI will be loaded in singleton pattern（Please ensure thread safety ），cached in  <code>ExtensionLoader</code> <a href="#fnref2" class="footnote-backref">↩︎</a></p>
</li>
</ol>
</section>
</div></section><footer class="footer-container" data-reactid="361"><div class="footer-body" data-reactid="362"><img src="/img/dubbo_gray.png" data-reactid="363"/><img class="apache" src="/img/apache_logo.png" data-reactid="364"/><div class="cols-container" data-reactid="365"><div class="col col-12" data-reactid="366"><h3 data-reactid="367">Disclaimer</h3><p data-reactid="368">Apache Dubbo is an effort undergoing incubation at The Apache Software Foundation (ASF), sponsored by the Incubator. Incubation is required of all newly accepted projects until a further review indicates that the infrastructure, communications, and decision making process have stabilized in a manner consistent with other successful ASF projects. While incubation status is not necessarily a reflection of the completeness or stability of the code, it does indicate that the project has yet to be fully endorsed by the ASF.</p></div><div class="col col-6" data-reactid="369"><dl data-reactid="370"><dt data-reactid="371">Documentation</dt><dd data-reactid="372"><a href="/en-us/docs/user/quick-start.html" target="_self" data-reactid="373">Quick start</a></dd><dd data-reactid="374"><a href="/en-us/docs/dev/build.html" target="_self" data-reactid="375">Developer guide</a></dd><dd data-reactid="376"><a href="/en-us/docs/admin/ops/dubbo-ops.html" target="_self" data-reactid="377">Admin manual</a></dd></dl></div><div class="col col-6" data-reactid="378"><dl data-reactid="379"><dt data-reactid="380">Resources</dt><dd data-reactid="381"><a href="/en-us/blog/index.html" target="_self" data-reactid="382">Blog</a></dd><dd data-reactid="383"><a href="/en-us/community/index.html" target="_self" data-reactid="384">Community</a></dd></dl></div></div><div class="copyright" data-reactid="385"><span data-reactid="386">Copyright © 2018 The Apache Software Foundation. Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
  <script src="/build/documentation.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112489517-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-112489517-1');
	</script>
</body>
</html>