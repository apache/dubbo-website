{
  "filename": "cluster.md",
  "__html": "<h1>Cluster Extension</h1>\n<h2>Summary</h2>\n<p>Group service providers in a cluster, and treat them as one single provider.</p>\n<h2>Extension Interface</h2>\n<p><code>com.alibaba.dubbo.rpc.cluster.Cluster</code></p>\n<h2>Extension Configuration</h2>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:protocol</span> <span class=\"hljs-attr\">cluster</span>=<span class=\"hljs-string\">\"xxx\"</span> /&gt;</span>\n<span class=\"hljs-comment\">&lt;!-- default configuration, will take affect if cluster attribute is not configured in &lt;dubbo:protocol&gt;  --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:provider</span> <span class=\"hljs-attr\">cluster</span>=<span class=\"hljs-string\">\"xxx\"</span> /&gt;</span>\n</code></pre>\n<h2>Existing Extensions</h2>\n<ul>\n<li><code>com.alibaba.dubbo.rpc.cluster.support.FailoverCluster</code></li>\n<li><code>com.alibaba.dubbo.rpc.cluster.support.FailfastCluster</code></li>\n<li><code>com.alibaba.dubbo.rpc.cluster.support.FailsafeCluster</code></li>\n<li><code>com.alibaba.dubbo.rpc.cluster.support.FailbackCluster</code></li>\n<li><code>com.alibaba.dubbo.rpc.cluster.support.ForkingCluster</code></li>\n<li><code>com.alibaba.dubbo.rpc.cluster.support.AvailableCluster</code></li>\n</ul>\n<h2>Extension Guide</h2>\n<p>Directory layout:</p>\n<pre><code>src\n |-main\n    |-java\n        |-com\n            |-xxx\n                |-XxxCluster.java (Cluster implementation)\n    |-resources\n        |-META-INF\n            |-dubbo\n                |-com.alibaba.dubbo.rpc.cluster.Cluster (plain text file with the content: xxx=com.xxx.XxxCluster)\n</code></pre>\n<p>XxxCluster.java：</p>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.xxx;\n \n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.rpc.cluster.Cluster;\n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.rpc.cluster.support.AbstractClusterInvoker;\n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.rpc.cluster.Directory;\n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.rpc.cluster.LoadBalance;\n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.rpc.Invoker;\n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.rpc.Invocation;\n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.rpc.Result;\n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.rpc.RpcException;\n \n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">XxxCluster</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">Cluster</span> </span>{\n    <span class=\"hljs-keyword\">public</span> &lt;T&gt; <span class=\"hljs-function\">Invoker&lt;T&gt; <span class=\"hljs-title\">merge</span><span class=\"hljs-params\">(Directory&lt;T&gt; directory)</span> <span class=\"hljs-keyword\">throws</span> RpcException </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> AbstractClusterInvoker&lt;T&gt;(directory) {\n            <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Result <span class=\"hljs-title\">doInvoke</span><span class=\"hljs-params\">(Invocation invocation, List&lt;Invoker&lt;T&gt;&gt; invokers, LoadBalance loadbalance)</span> <span class=\"hljs-keyword\">throws</span> RpcException </span>{\n                <span class=\"hljs-comment\">// ...</span>\n            }\n        };\n    }\n}\n</code></pre>\n<p>META-INF/dubbo/com.alibaba.dubbo.rpc.cluster.Cluster：</p>\n<pre><code class=\"language-properties\">xxx=com.xxx.XxxCluster\n</code></pre>\n"
}