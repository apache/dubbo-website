<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
	<meta name="keywords" content="general-knowledge" />
	<meta name="description" content="general-knowledge" />
	<!-- 网页标签标题 -->
	<title>general-knowledge</title>
	<link rel="shortcut icon" href="/img/dubbo.ico"/>
	<link rel="stylesheet" href="/build/documentation.css" />
</head>
<body>
	<div id="root"><div class="documentation-page" data-reactroot=""><header class="header-container header-container-normal"><div class="header-body"><a href="/en-us/index.html"><img class="logo" src="/img/dubbo_colorful.png"/></a><div class="search search-normal"><span class="icon-search"></span></div><span class="language-switch language-switch-normal">中</span><div class="header-menu"><img class="header-menu-toggle" src="/img/menu_gray.png"/><ul><li class="menu-item menu-item-normal"><a href="/en-us/index.html">HOME</a></li><li class="menu-item menu-item-normal menu-item-normal-active"><a href="/en-us/docs/user/quick-start.html">DOCS</a></li><li class="menu-item menu-item-normal"><a href="/en-us/docs/developers/developers_dev.html">DEVELOPERS</a></li><li class="menu-item menu-item-normal"><a href="/en-us/blog/index.html">BLOG</a></li><li class="menu-item menu-item-normal"><a href="/en-us/community/index.html">COMMUNITY</a></li><li class="menu-item menu-item-normal"><a href="/en-us/ecology/index.html">ECOSYSTEM</a></li><li class="menu-item menu-item-normal"><a href="/en-us/blog/download.html">DOWNLOAD</a></li></ul></div></div></header><div class="bar"><div class="bar-body"><img src="/img/docs.png" class="front-img"/><span>Documentation</span><img src="/img/docs.png" class="back-img"/></div></div><section class="content-section"><div class="sidemenu"><div class="sidemenu-toggle"><img src="https://img.alicdn.com/tfs/TB1E6apXHGYBuNjy0FoXXciBFXa-200-200.png"/></div><ul><li class="menu-item menu-item-level-1"><span>User doc</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Preface<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/preface/background.html" target="_self">Background</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/preface/requirements.html" target="_self">Requirements</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/preface/architecture.html" target="_self">Architecture</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/preface/usage.html" target="_self">Usage</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/quick-start.html" target="_self">Quick start</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/dependencies.html" target="_self">Dependencies</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/maturity.html" target="_self">Maturality</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Configuration<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/configuration/xml.html" target="_self">XML configuration</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/configuration/properties.html" target="_self">Properties configuration</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/configuration/api.html" target="_self">API configuration</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/configuration/annotation.html" target="_self">Annotation configuration</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Demos<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/preflight-check.html" target="_self">Start check</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/fault-tolerent-strategy.html" target="_self">Fault-tolerent strategy</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/loadbalance.html" target="_self">Load balance</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/thread-model.html" target="_self">Thread model</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/explicit-target.html" target="_self">Connecting certain provider straightly</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/subscribe-only.html" target="_self">Subscribe only</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/registry-only.html" target="_self">Registry only</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/static-service.html" target="_self">Static service</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/multi-protocols.html" target="_self">Multi-protocols</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/multi-registry.html" target="_self">Multi-registries</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/service-group.html" target="_self">Service group</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/multi-versions.html" target="_self">Multi-versions</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/group-merger.html" target="_self">Group merger</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/parameter-validation.html" target="_self">Parameter validation</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/result-cache.html" target="_self">Result cache</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/generic-reference.html" target="_self">Generic reference</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/generic-service.html" target="_self">Generic service</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/echo-service.html" target="_self">Echo service</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/context.html" target="_self">Context</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/attachment.html" target="_self">Attachment</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/async-call.html" target="_self">Asynchronous call</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/local-call.html" target="_self">Local call</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/callback-parameter.html" target="_self">Callback parameter</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/events-notify.html" target="_self">Events notify</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/local-stub.html" target="_self">Local stub</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/local-mock.html" target="_self">Local mock</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/delay-publish.html" target="_self">Delay publish</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/concurrency-control.html" target="_self">Concurrency control</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/config-connections.html" target="_self">Connections limitation</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/lazy-connect.html" target="_self">Lazy connect</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/stickiness.html" target="_self">Stickness connections</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/token-authorization.html" target="_self">Token authorization</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/routing-rule.html" target="_self">Routing rule</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/config-rule.html" target="_self">Configuration rule</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/service-downgrade.html" target="_self">Service downgrade</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/graceful-shutdown.html" target="_self">Graceful shutdown</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/hostname-binding.html" target="_self">Hostname binding</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/logger-strategy.html" target="_self">Logger strategy</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/accesslog.html" target="_self">Accesslog</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/service-container.html" target="_self">Service container</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/reference-config-cache.html" target="_self">Reference config cache</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/distributed-transaction.html" target="_self">Distributed transaction</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/dump.html" target="_self">Automatic thread dump</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/netty4.html" target="_self">Netty4</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/demos/serialization.html" target="_self">Serialization with FST and Kryo</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/references/api.html" target="_self">API configuration reference</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Schema configuration reference<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/introduction.html" target="_self">Introduction</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-service.html" target="_self">dubbo:service</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-reference.html" target="_self">dubbo:reference</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-protocol.html" target="_self">dubbo:protocol</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-registry.html" target="_self">dubbo:registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-monitor.html" target="_self">dubbo:monitor</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-application.html" target="_self">dubbo:application</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-module.html" target="_self">dubbo:module</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-provider.html" target="_self">dubbo:provider</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-consumer.html" target="_self">dubbo:consumer</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-method.html" target="_self">dubbo:method</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-argument.html" target="_self">dubbo:argument</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/xml/dubbo-parameter.html" target="_self">dubbo:parameter</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Protocol configuration reference<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/introduction.html" target="_self">Introduction</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/dubbo.html" target="_self">dubbo://</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/rmi.html" target="_self">rmi://</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/hessian.html" target="_self">hessian://</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/http.html" target="_self">http://</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/webservice.html" target="_self">webservice://</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/thrift.html" target="_self">thrift://</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/memcached.html" target="_self">memcached://</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/redis.html" target="_self">redis://</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/protocol/rest.html" target="_self">rest://</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Registry configuration reference<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/registry/introduction.html" target="_self">Introduction</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/registry/multicast.html" target="_self">Multicast registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/registry/zookeeper.html" target="_self">Zookeeper registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/registry/nacos.html" target="_self">Nacos registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/registry/redis.html" target="_self">Redis registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/references/registry/simple.html" target="_self">Simple registry</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/references/telnet.html" target="_self">Telnet command</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/references/maven.html" target="_self">Maven plugin</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/best-practice.html" target="_self">Best practice</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/recommend.html" target="_self">Recommended usage</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/capacity-plan.html" target="_self">Capacity plan</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/perf-test.html" target="_self">Performance testing reports</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/user/coveragence.html" target="_self">Test coverage report</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>Erlang languages<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/languages/erlang/start.html" target="_self">Quick start</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/languages/erlang/reference.html" target="_self">Reference configuration</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/languages/erlang/service.html" target="_self">Service configuration</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/user/languages/erlang/serialization.html" target="_self">Serialization configuration</a></li></ul></li></ul></li><li class="menu-item menu-item-level-1"><span>Developer guide</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/build.html" target="_self">How To Build</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/design.html" target="_self">Architecture</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/SPI.html" target="_self">How SPI Works</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/implementation.html" target="_self">Init, Process, Protocols</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><span>SPI Extensions<img style="transform:rotate(-90deg)" class="menu-toggle" src="/img/arrow_down.png"/></span><ul><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/protocol.html" target="_self">Protocol</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/filter.html" target="_self">Filter</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/invoker-listener.html" target="_self">InvokerListener</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/exporter-listener.html" target="_self">ExporterListener</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/cluster.html" target="_self">Cluster</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/router.html" target="_self">Router</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/load-balance.html" target="_self">LoadBalance</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/merger.html" target="_self">Merger</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/registry.html" target="_self">Registry</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/monitor.html" target="_self">Monitor</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/extension-factory.html" target="_self">ExtensionFactory</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/proxy-factory.html" target="_self">ProxyFactory</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/compiler.html" target="_self">Compiler</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/dispatcher.html" target="_self">Dispatcher</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/threadpool.html" target="_self">Threadpool</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/serialize.html" target="_self">Serialization</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/remoting.html" target="_self">Remoting</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/exchanger.html" target="_self">Exchanger</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/networker.html" target="_self">Networker</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/telnet-handler.html" target="_self">TelnetHandler</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/status-checker.html" target="_self">StatusChecker</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/container.html" target="_self">Container</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/page.html" target="_self">PageHandler</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/cache.html" target="_self">Cache</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/validation.html" target="_self">Validation</a></li><li class="menu-item menu-item-level-3"><a href="/en-us/docs/dev/impls/logger-adapter.html" target="_self">LoggerAdapter</a></li></ul></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/contract.html" target="_self">Contract</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/coding.html" target="_self">Code Style</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/release.html" target="_self">Versions</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/contribution.html" target="_self">Contribution</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/checklist.html" target="_self">Checklist</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/code-smell.html" target="_self">Code Smell</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/dev/TCK.html" target="_self">TCK</a></li></ul></li><li class="menu-item menu-item-level-1"><span>Admin guide</span><ul><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/admin/introduction.html" target="_self">introduction of dubbo ops</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/admin/serviceSearch.html" target="_self">service search</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/admin/serviceGovernance.html" target="_self">service governance</a></li><li style="height:36px;overflow:hidden" class="menu-item menu-item-level-2"><a href="/en-us/docs/admin/serviceTest.html" target="_self">service test</a></li></ul></li></ul></div><div class="doc-content markdown-body"><h1>Some in the design of the basic common sense</h1>
<blockquote>
<p><a href="http://javatar.iteye.com/blog/706098">http://javatar.iteye.com/blog/706098</a></p>
</blockquote>
<p>Recently told the new team some design on the common sense, is likely to be new and some other help, the thought of a few temporarily, first write here.</p>
<h2>The API and SPI separation</h2>
<p>Framework or component there are generally two types of customers, one is a consumer, is an extension.API (Application Programming Interface) is used to users, and SPI (Service dojo.provide Interface) is used to <a href="http://expand.At">expand.At</a> design time, try to put them off, and don't <a href="http://mix.In">mix.In</a> other words, the user is can't see write the implementation of the extension.</p>
<p>For example, a Web framework, it has an API interface to call the Action, there is a the execute () method, which is for the user to write business logic.Then, Web frameworks have a SPI interface to extend the control output, such as velocity templates output or a json output, etc.If this Web framework using an inheritance VelocityAction and a JsonAction as extension of the Action, with output velocity templates will inherit VelocityAction, want to use the json output will inherit JsonAction, this is the opposite of the API and SPI no separation example, SPI interface in the API interface.</p>
<p><img src="../sources/images/mix-api-spi.jpg" alt="mix-api-spi"></p>
<p>Is a reasonable way, there is a separate Renderer interface, VelocityRenderer and JsonRenderer implementation, Web framework will transfer the output of the Action to the Renderer interface for rendering output.</p>
<p><img src="../sources/images/seperate-api-spi.jpg" alt="seperate-api-spi"></p>
<h2>Service domain/entity/session domains separation</h2>
<p>Any framework or component, there will always be the core domain model, such as: Spring Bean, Struts Action, Service of Dubbo, Napoli Queue, and so on.The core areas of the model and its component is called physical domain, it represents our goal to operate on itself.Physical domain is thread-safe, usually either through the same class, sync, or copy the way.</p>
<p>Service domain, that is, behavior domain, it is the function of the components, but also is responsible for the entity and session domains of life cycle management, such as Spring ApplicationContext, Dubbo ServiceManager, etc.Service domain objects often is heavy, and is thread-safe, and serve all calls to a single instance.</p>
<p>What is a session?Is an interactive process.Session key is the concept of context, the context is what?For example, we said: &quot;old place&quot;, the &quot;old place&quot; is the context information.Why do you say &quot;old place&quot; other person will know, because we defined earlier the specific content of the &quot;old place&quot;.So, the context often hold state variables in the process of interaction, etc.The session object, were generally mild and every request to create an instance, destroyed after the <a href="http://request.In">request.In</a> short: the meta information held by the entity domain, the temporary state of a request by the session domain, by the service domain throughout the entire process.</p>
<p><img src="../sources/images/ddd.jpg" alt="ddd"></p>
<h2>On the important process to interceptor interface</h2>
<p>If you want to write a remote invocation framework, the remote call block the process should have a unified interface.If you want to write an ORM framework, that at least the SQL execution, the Mapping process to intercept interface;If you want to write a Web framework, the request execution should be interception interfaces, and so <a href="http://on.No">on.No</a> common framework can Cover all requirements, allowing external behavior, is the basic extension of the framework.Before a remote call, so that if someone wants to verify ordered CARDS, verification of black and white list, log statistics;If someone wants to add paging under packing before SQL execution, do data access control, statistics under the SQL execution time.If someone wants to check before the request execution, packaging, input and output flow request quantity statistics, and so on, can accomplish on their own, rather than into frame inside.Interception interfaces, usually to encapsulate process itself with an object, to the interceptor chain, such as: remote calls the main process for the invoke (), the interceptor interface to invoke usually (Invocation), Invocation object encapsulates the would have the execution context, and Invocation in an invoke () method, performed by the interceptor decide when, at the same time, also on behalf of the interceptor Invocation itself, such a interceptor Invocation is actually the process of packaging the next interceptor, until the last interceptor Invocation is packing the final invoke () process;Similarly, the main process for the execute SQL (), the interceptor interface is usually the execute (Execution), principle.Can implement ways, of course, the above is only for example.</p>
<p><img src="../sources/images/filter-chain.jpg" alt="filter-chain"></p>
<h2>The important status of sending events and set aside to monitor interface</h2>
<p>Here to tell the difference between an event and the interceptor above, the interceptor is in the process of intervention, it is part of the process, is based on process behavior, and event is based on state data, any behavior changes of the same condition, the event should be consistent.Event is usually after the event notification is a Callback interface, the method name is usually past tense, such as onChanged ().Remote invocation framework, for example, when the network disconnect or even should send out an event, when there is an error can also be considered an event, such peripheral applications could be observed within the framework of change, make corresponding adjustment.</p>
<p><img src="../sources/images/event-listener.jpg" alt="event-listener"></p>
<h2>Extension interface functions as a single, composability</h2>
<p>For example, the remote invocation framework agreement is to replace it.If only provide a general extension interface, switch can deal, of course, but the protocol support can be subdivided into the underlying communication, serialization, dynamic proxy mode and so on.If the interface split, orthogonal decomposition, will be easier to reuse existing logical extension, and just replace a part of the implementation strategy.Of course the decomposition the granularity of the need to grasp.</p>
<h2>Micronucleus plug-in, equal treatment to the third party</h2>
<p>&quot;A good framework of development, abide by the concept of micronucleus.Eclipse is OSGi microkernel, Spring's microkernel is the BeanFactory, Maven microkernel is breadth.With functional core is usually should not be, but a life cycle and integrated container, so that each function can interact through the same way and extension, and any function can be replaced.If they do not microkernel, must be at least equal treatment to a third party, namely, the author can realize the function of extension should can be done by extending all the way.The author want to regard themselves as extension, so as to ensure framework of sustainability and stability of the outside introversion.</p>
<h2>Don't control the external object lifecycle</h2>
<p>Such as the above said the Action using the interface and the Renderer extension interface.Framework if let users or extend the Action or the Renderer implementation class name of the class or kind of meta information submitted, then internally by reflecting newInstance () to create an instance of this framework is to control the Action or the Renderer implementation class life cycle, the Action or the Renderer physical, frameworks do it himself, external extension or integration are powerless.Good idea is to let the user or extend the Action or submitted to the realization of the Renderer class instance, framework just use these instances, is how to create these objects, how to destroy, had nothing to do with frame, frame up to provide assistant management tools, rather than absolute control.</p>
<h2>Configurable must be programmable, and maintain friendly CoC conventions</h2>
<p>Framework using the environment uncertainty because of the many, there will always be some configuration, usually to a specified name classpath straight sweep configuration, or startup allows you to specify the configuration <a href="http://path.As">path.As</a> a common framework, should do all can do configuration file must be able to programmatically, or when the user needs to be your frame with another frame integration will bring a lot of unnecessary trouble.</p>
<p>In addition, as far as possible do a standard contract, if the user has to do things by some sort of agreement, there is no need for the configuration items.Such as: configuration templates location, you can agree, if in the templates directory doesn't have to match, if you want to change the directory, and configuration.</p>
<h2>Distinguish between commands and queries, clear pre-conditions and post-conditions</h2>
<p>This is part of the design by contract, try to keep to a return value method is to query methods, void return method is to command.Query methods are usually idempotence, without side effects, also is not change any state, the n results are the same, such as the get a property value, or query a database record.Command is to point to have side effects, namely will change state, such as set a value, or update a database record.If you have modified the status of the operation, do a query returns again, if possible, to split it into writing reading separation of the two methods, such as: User deleteUser (id), delete users and returns the deleted users, consider to the getUser () and void deleteUser ().In addition, each method is front-facing assert that the legitimacy of the incoming parameters, as far as possible the rear assertion returns the legitimacy, and documented.</p>
<h2>Incremental extension, and not to extend the original core concept</h2>
<p>refer to：<a href="./principals/expansibility.md">expansibility</a></p>
</div></section><footer class="footer-container"><div class="footer-body"><img src="/img/dubbo_gray.png"/><img class="apache" src="/img/apache_logo.png"/><div class="cols-container"><div class="col col-12"><h3></h3><p></p></div><div class="col col-4"><dl><dt>ASF</dt><dd><a href="http://www.apache.org" target="_self">Foundation</a></dd><dd><a href="http://www.apache.org/licenses/" target="_self">License</a></dd><dd><a href="http://www.apache.org/events/current-event" target="_self">Events</a></dd><dd><a href="http://www.apache.org/foundation/sponsorship.html" target="_self">Sponsorship</a></dd><dd><a href="http://www.apache.org/foundation/thanks.html" target="_self">Thanks</a></dd></dl></div><div class="col col-4"><dl><dt>Documentation</dt><dd><a href="/en-us/docs/user/quick-start.html" target="_self">Quick start</a></dd><dd><a href="/en-us/docs/dev/build.html" target="_self">Developer guide</a></dd><dd><a href="/en-us/docs/admin/ops/dubbo-ops.html" target="_self">Admin manual</a></dd><dd><a href="https://github.com/apache/dubbo-website/issues/new" target="_self">Report a Doc Issue</a></dd><dd><a href="https://github.com/apache/dubbo-website" target="_self">Edit This Page on GitHub</a></dd></dl></div><div class="col col-4"><dl><dt>Resources</dt><dd><a href="/en-us/blog/index.html" target="_self">Blog</a></dd><dd><a href="/en-us/community/index.html" target="_self">Community</a></dd><dd><a href="https://www.apache.org/security/" target="_self">Security</a></dd></dl></div></div><div class="copyright"><span>Copyright © 2018-2019 The Apache Software Foundation. Apache and the Apache feather logo are trademarks of The Apache Software Foundation.</span></div></div></footer></div></div>
	<script src="https://f.alicdn.com/react/15.4.1/react-with-addons.min.js"></script>
	<script src="https://f.alicdn.com/react/15.4.1/react-dom.min.js"></script>
	<script>
		window.rootPath = '';
  </script>
  <script src="/build/documentation.js"></script>
  <!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=UA-112489517-1"></script>
	<script>
		window.dataLayer = window.dataLayer || [];
		function gtag(){dataLayer.push(arguments);}
		gtag('js', new Date());

		gtag('config', 'UA-112489517-1');
	</script>
</body>
</html>