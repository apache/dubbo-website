{
  "filename": "accesslog.md",
  "__html": "<h1>Access Log</h1>\n<p>If you want to logging the access information for each provide service,you can turn on the <code>accesslog</code> switch,which like the access log of <code>Apache</code>.</p>\n<p><strong>Note:</strong>\nThe size of the access log maybe too much,please check the disk capacity.\nNow I will show you how to config the access log.</p>\n<h2>Logging by logging framework</h2>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:protocol</span> <span class=\"hljs-attr\">accesslog</span>=<span class=\"hljs-string\">\"true\"</span> <span class=\"hljs-attr\">...</span>/&gt;</span>\n</code></pre>\n<p>The above configuration will turn on <code>accesslog</code> switch for all provide services,and logging the access log with logging framework(log4j/logback/slf4j...).You can config the logging framework of <code>logger</code> and <code>appender</code> for logging the access log.The simplest way is config logger name with <code>dubbo.accesslog</code>. The Example:</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"accesslogAppender\"</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"ch.qos.logback.core.rolling.RollingFileAppender\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">file</span>&gt;</span>${loggingRoot}/accesslog/logging.log<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">file</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">encoding</span>&gt;</span>${loggingCharset}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">encoding</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">append</span>&gt;</span>true<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">append</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">rollingPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"ch.qos.logback.core.rolling.TimeBasedRollingPolicy\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">FileNamePattern</span>&gt;</span>${loggingRoot}/accesslog/%d{yyyyMMdd}/logging.log.%d{yyyyMMdd}%i.gz\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">FileNamePattern</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">MaxHistory</span>&gt;</span>15<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">MaxHistory</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">TimeBasedFileNamingAndTriggeringPolicy</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"ch.qos.logback.core.rolling.SizeAndTimeBasedFNATP\"</span>&gt;</span>\n                <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">MaxFileSize</span>&gt;</span>1024MB<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">MaxFileSize</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">TimeBasedFileNamingAndTriggeringPolicy</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">rollingPolicy</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">layout</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">\"ch.qos.logback.classic.PatternLayout\"</span>&gt;</span>\n            <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pattern</span>&gt;</span>&lt;![CDATA[%level|%d{yyyy-MM-dd HH:mm:ss}|%m%n}]]&gt;<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pattern</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">layout</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">appender</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"dubbo.accesslog\"</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">\"INFO\"</span> <span class=\"hljs-attr\">additivity</span>=<span class=\"hljs-string\">\"false\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">\"accesslogAppender\"</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">logger</span>&gt;</span>\n</code></pre>\n<p>The above is the demonstration of logback framework.Other logging framework is same <a href=\"http://too.It\">too.It</a> will logging the access log of all provide services into single file(<code>accesslog/logging.log</code>). And you can also config the access log of each provide service to logging separately,Only change <code>name</code> attribute of the <code>logger</code> tag,set the <code>name</code> attribute to <code>dubbo.accesslog.serviceInterfaceClassFullName</code>.The Example:</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">logger</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"dubbo.accesslog.com.dubbo.FooServiceInterface\"</span> <span class=\"hljs-attr\">level</span>=<span class=\"hljs-string\">\"INFO\"</span> <span class=\"hljs-attr\">additivity</span>=<span class=\"hljs-string\">\"false\"</span>&gt;</span>\n        <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">appender-ref</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">\"fooServiceAccesslogAppender\"</span>/&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">logger</span>&gt;</span>\n</code></pre>\n<p>If you only want logging the access log of specified provide service,but not all <a href=\"http://services.It\">services.It</a>'s supported too.The Example:</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:service</span> <span class=\"hljs-attr\">accesslog</span>=<span class=\"hljs-string\">\"true\"</span> <span class=\"hljs-attr\">...</span>/&gt;</span>\n</code></pre>\n<h2>Logging by specified file path</h2>\n<p>You can specify the file path with the <code>accesslog</code> attribute.The Example:</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:protocol</span> <span class=\"hljs-attr\">accesslog</span>=<span class=\"hljs-string\">\"/home/admin/logs/service/accesslog.log\"</span> <span class=\"hljs-attr\">...</span>/&gt;</span>\n</code></pre>\n<p>OR</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:service</span> <span class=\"hljs-attr\">accesslog</span>=<span class=\"hljs-string\">\"/home/admin/logs/service/accesslog.log\"</span> <span class=\"hljs-attr\">...</span>/&gt;</span>\n</code></pre>\n"
}