{
  "filename": "cache.md",
  "__html": "<h1>缓存扩展</h1>\n<h2>扩展说明</h2>\n<p>用请求参数作为 key，缓存返回结果。</p>\n<h2>扩展接口</h2>\n<p><code>com.alibaba.dubbo.cache.CacheFactory</code></p>\n<h2>扩展配置</h2>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:service</span> <span class=\"hljs-attr\">cache</span>=<span class=\"hljs-string\">\"lru\"</span> /&gt;</span>\n<span class=\"hljs-comment\">&lt;!-- 方法级缓存 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:service</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:method</span> <span class=\"hljs-attr\">cache</span>=<span class=\"hljs-string\">\"lru\"</span> /&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dubbo:service</span>&gt;</span> \n<span class=\"hljs-comment\">&lt;!-- 缺省值设置，当&lt;dubbo:service&gt;没有配置cache属性时，使用此配置 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:provider</span> <span class=\"hljs-attr\">cache</span>=<span class=\"hljs-string\">\"xxx,yyy\"</span> /&gt;</span> \n</code></pre>\n<h2>已知扩展</h2>\n<ul>\n<li><code>com.alibaba.dubbo.cache.support.lru.LruCacheFactory</code></li>\n<li><code>com.alibaba.dubbo.cache.support.threadlocal.ThreadLocalCacheFactory</code></li>\n<li><code>com.alibaba.dubbo.cache.support.jcache.JCacheFactory</code></li>\n</ul>\n<h2>扩展示例</h2>\n<p>Maven 项目结构：</p>\n<pre><code>src\n |-main\n    |-java\n        |-com\n            |-xxx\n                |-XxxCacheFactory.java (实现StatusChecker接口)\n    |-resources\n        |-META-INF\n            |-dubbo\n                |-com.alibaba.dubbo.cache.CacheFactory (纯文本文件，内容为：xxx=com.xxx.XxxCacheFactory)\n</code></pre>\n<p>XxxCacheFactory.java：</p>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.xxx;\n \n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.cache.CacheFactory;\n \n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">XxxCacheFactory</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">CacheFactory</span> </span>{\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Cache <span class=\"hljs-title\">getCache</span><span class=\"hljs-params\">(URL url, String name)</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-keyword\">new</span> XxxCache(url, name);\n    }\n}\n</code></pre>\n<p>XxxCacheFactory.java：</p>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">package</span> com.xxx;\n \n<span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.cache.Cache;\n \n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">XxxCache</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">Cache</span> </span>{\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-title\">Cache</span><span class=\"hljs-params\">(URL url, String name)</span> </span>{\n        <span class=\"hljs-comment\">// ...</span>\n    }\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">put</span><span class=\"hljs-params\">(Object key, Object value)</span> </span>{\n        <span class=\"hljs-comment\">// ...</span>\n    }\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> Object <span class=\"hljs-title\">get</span><span class=\"hljs-params\">(Object key)</span> </span>{\n        <span class=\"hljs-comment\">// ...</span>\n    }\n}\n</code></pre>\n<p>META-INF/dubbo/com.alibaba.dubbo.cache.CacheFactory：</p>\n<pre><code class=\"language-properties\">xxx=com.xxx.XxxCacheFactory\n</code></pre>\n"
}