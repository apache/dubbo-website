<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>支持graalvm on Apache Dubbo</title><link>https://dubbo.apache.org/zh-cn/docs/references/graalvm/</link><description>Recent content in 支持graalvm on Apache Dubbo</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://dubbo.apache.org/zh-cn/docs/references/graalvm/index.xml" rel="self" type="application/rss+xml"/><item><title>使用 GraalVM 打包 Native Image</title><link>https://dubbo.apache.org/zh-cn/docs/references/graalvm/support-graalvm/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dubbo.apache.org/zh-cn/docs/references/graalvm/support-graalvm/</guid><description>此文档已经不再维护。您当前查看的是快照版本。如果想要查看最新版本的文档，请参阅最新版本。
dubbo3.0支持native-image文档
概述 本文档将介绍将dubbo3.0项目接入GraalVM，进行native-image编译为二进制的流程。
关于GraalVm的更多信息可以阅读 https://www.graalvm.org/docs/getting-started/container-images/ 此文档。
使用样例 在编译我们的dubbo项目之前，需要确保我们正基于graalVm的环境。
安装GraalVM 进入https://www.graalvm.org/ 官网根据自己的系统选取最新版本安装：
安装完成后，修改配置JAVA_HOME的路径，生效后查看本地jdk可以看到如下：
这里我们使用的基于jdk1.8版本的GraalVM。
安装native-image，只需执行gu install native-image即可。 拉取dubbo代码，切换到apache:3.0分支。 手动执行生成SPI代码。 由于目前编译native-image不支持代码动态生成编译，所以有关代码动态生成的部分需要我们手动先生成，这里提供了工具函数：
执行CodeGenerator即可在dubbo-native模块下生成SPI代码。
在根目录下执行install MacdeMacBook-pro-3:incubator-dubbo mac$ pwd /Users/mac/Documents/Mi/project/incubator-dubbo MacdeMacBook-pro-3:incubator-dubbo mac$ mvn clean package install -Dmaven.test.skip=true 编译demo项目 这里我们提供了可直接进行编译的示例项目，dubbo-demo/dubbo-demo-native。上面步骤install完成后，先到dubbo-demo-native的provider下，执行native-image编译：
mvn clean package -P native -Dmaven.test.skip=true 这里由于我们在maven中引入了native-image插件，所以直接-P native即可执行该插件。
编译成功后可以在target下看到已经生成的二进制文件，本地启动一个zookeeper，直接执行该二进制，可见启动成功如下：
consumer端同样执行编译，在consumer的target下也会生成二进制文件：demo-native-consumer,执行该二进制可以看到调用结果如下：
具体步骤 实际上在这个demo下我们做了一些工作来确保项目可以编译执行，主要有以下几个步骤
引入dubbo-native依赖 &amp;lt;dependency&amp;gt; &amp;lt;groupId&amp;gt;org.apache.dubbo&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;dubbo-native&amp;lt;/artifactId&amp;gt; &amp;lt;version&amp;gt;${project.version}&amp;lt;/version&amp;gt; &amp;lt;/dependency&amp;gt; 该模块下有我们生成的SPI代码。
引入native-image插件 &amp;lt;plugin&amp;gt; &amp;lt;groupId&amp;gt;org.graalvm.nativeimage&amp;lt;/groupId&amp;gt; &amp;lt;artifactId&amp;gt;native-image-maven-plugin&amp;lt;/artifactId&amp;gt; &amp;lt;version&amp;gt;21.0.0.2&amp;lt;/version&amp;gt; &amp;lt;executions&amp;gt; &amp;lt;execution&amp;gt; &amp;lt;goals&amp;gt; &amp;lt;goal&amp;gt;native-image&amp;lt;/goal&amp;gt; &amp;lt;/goals&amp;gt; &amp;lt;phase&amp;gt;package&amp;lt;/phase&amp;gt; &amp;lt;/execution&amp;gt; &amp;lt;/executions&amp;gt; &amp;lt;configuration&amp;gt; &amp;lt;skip&amp;gt;false&amp;lt;/skip&amp;gt; &amp;lt;imageName&amp;gt;demo-native-provider&amp;lt;/imageName&amp;gt; &amp;lt;mainClass&amp;gt;org.</description></item></channel></rss>