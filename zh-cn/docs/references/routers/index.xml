<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>路由规则 on Apache Dubbo</title><link>https://dubbo.apache.org/zh-cn/docs/references/routers/</link><description>Recent content in 路由规则 on Apache Dubbo</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://dubbo.apache.org/zh-cn/docs/references/routers/index.xml" rel="self" type="application/rss+xml"/><item><title>VirtualService</title><link>https://dubbo.apache.org/zh-cn/docs/references/routers/virtualservice/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dubbo.apache.org/zh-cn/docs/references/routers/virtualservice/</guid><description>&lt;div class="pageinfo pageinfo-primary">
&lt;p>此文档已经不再维护。您当前查看的是快照版本。如果想要查看最新版本的文档，请参阅&lt;a href="https://dubbo.apache.org/zh-cn/overview/core-features/traffic/">最新版本&lt;/a>。&lt;/p>

&lt;/div>

&lt;h4 id="virtualservice">VirtualService&lt;/h4>
&lt;p>&lt;code>VirtualService&lt;/code>是用来处理入站流量的规则，也就是说用来描述哪些入站流量适用于该路由规则。&lt;/p>
&lt;ul>
&lt;li>使用示例&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">apiVersion&lt;/span>: service.dubbo.apache.org/v1alpha1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">kind&lt;/span>: VirtualService
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">name&lt;/span>: demo/StandardRouter
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">hosts&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">dubbo&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>属性说明&lt;/li>
&lt;/ul>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">Field&lt;/th>
 &lt;th style="text-align: left">Type&lt;/th>
 &lt;th style="text-align: left">Description&lt;/th>
 &lt;th style="text-align: left">Required&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">name&lt;/td>
 &lt;td style="text-align: left">string&lt;/td>
 &lt;td style="text-align: left"> 应以 &lt;code>应用名/Router类型&lt;/code>的方式来命名。&lt;code>name&lt;/code>属性一经定义Router类型就确定下来了&lt;/td>
 &lt;td style="text-align: left">YES&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">hosts&lt;/td>
 &lt;td style="text-align: left">string[]&lt;/td>
 &lt;td style="text-align: left"> 一般指应用名&lt;/td>
 &lt;td style="text-align: left">NO&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">dubbo&lt;/td>
 &lt;td style="text-align: left">DubboRoute[]&lt;/td>
 &lt;td style="text-align: left">dubbo 路由规则，顺序执行，符合条件立即返回&lt;/td>
 &lt;td style="text-align: left">NO&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;ul>
&lt;li>Router类型如下：&lt;/li>
&lt;/ul>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">name&lt;/th>
 &lt;th style="text-align: left">Description&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">StandardRouter&lt;/td>
 &lt;td style="text-align: left">完全使用标准 VirtualService 描述的 Router&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">待补充&lt;/td>
 &lt;td style="text-align: left">待补充&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h4 id="dubboroute">DubboRoute&lt;/h4>
&lt;p>&lt;code>DubboRoute&lt;/code>是&lt;code>VirtualService&lt;/code>中的属性，用来描述路由策略的边界。&lt;/p>
&lt;ul>
&lt;li>使用示例&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">apiVersion&lt;/span>: service.dubbo.apache.org/v1alpha1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">kind&lt;/span>: VirtualService
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">name&lt;/span>: demo/StandardRouter
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">hosts&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">dubbo&lt;/span>: &lt;span style="color:#586e75">#DubboRoute&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#268bd2">name&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">service&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">fault&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">mirror&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">retries&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">timeout&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">routedetail&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>属性说明&lt;/li>
&lt;/ul>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">Field&lt;/th>
 &lt;th style="text-align: left">Type&lt;/th>
 &lt;th style="text-align: left">Description&lt;/th>
 &lt;th style="text-align: left">Required&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">name&lt;/td>
 &lt;td style="text-align: left">string&lt;/td>
 &lt;td style="text-align: left">规则的名字，方便识别规则用意&lt;/td>
 &lt;td style="text-align: left">NO&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">services&lt;/td>
 &lt;td style="text-align: left">StringMatch[]&lt;/td>
 &lt;td style="text-align: left">规则生效的服务名列表，可使用具体的服务名，也可以使用正则 * 的方式进行匹配；默认不配置，则代表所有的服务都生效&lt;/td>
 &lt;td style="text-align: left">&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">fault&lt;/td>
 &lt;td style="text-align: left">dubboFaultInject[]&lt;/td>
 &lt;td style="text-align: left">故障注入(未实现)&lt;/td>
 &lt;td style="text-align: left">NO&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">mirror&lt;/td>
 &lt;td style="text-align: left">Destination&lt;/td>
 &lt;td style="text-align: left">镜像流量(未实现)&lt;/td>
 &lt;td style="text-align: left">NO&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">retries&lt;/td>
 &lt;td style="text-align: left">DubboRetry[]&lt;/td>
 &lt;td style="text-align: left">重试相关(未实现)&lt;/td>
 &lt;td style="text-align: left">NO&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">timeout&lt;/td>
 &lt;td style="text-align: left">DubboTimeout[]&lt;/td>
 &lt;td style="text-align: left">超时相关(未实现)&lt;/td>
 &lt;td style="text-align: left">NO&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">routedetail&lt;/td>
 &lt;td style="text-align: left">DubboRouteDetail[]&lt;/td>
 &lt;td style="text-align: left">具体的流量规则，顺序执行，符合条件立即返回&lt;/td>
 &lt;td style="text-align: left">YES&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h4 id="dubboroutedetail">DubboRouteDetail&lt;/h4>
&lt;p>&lt;code>DubboRouteDetail&lt;/code>用来描述详细的路由规则&lt;/p></description></item><item><title>DestinationRule</title><link>https://dubbo.apache.org/zh-cn/docs/references/routers/destination-rule/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://dubbo.apache.org/zh-cn/docs/references/routers/destination-rule/</guid><description>&lt;div class="pageinfo pageinfo-primary">
&lt;p>此文档已经不再维护。您当前查看的是快照版本。如果想要查看最新版本的文档，请参阅&lt;a href="https://dubbo.apache.org/zh-cn/overview/tasks/traffic-management/">最新版本&lt;/a>。&lt;/p>

&lt;/div>

&lt;h4 id="destinationrule">DestinationRule&lt;/h4>
&lt;p>&lt;code>DestinationRule&lt;/code>用来处理目标地址的规则，与&lt;code>DestinationRule&lt;/code>相关的&lt;code>ServiceEntry&lt;/code>, &lt;code>WorkloadEntry&lt;/code>等定义与开源保持一致&lt;/p>
&lt;ul>
&lt;li>使用示例&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">apiVersion&lt;/span>: service.dubbo.apache.org/v1alpha1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">kind&lt;/span>: DestinationRule
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">name&lt;/span>: demo-route
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">host&lt;/span>: demo
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">subsets&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">trafficPolicy&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>属性说明&lt;/li>
&lt;/ul>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">Field&lt;/th>
 &lt;th style="text-align: left">Type&lt;/th>
 &lt;th style="text-align: left">Description&lt;/th>
 &lt;th style="text-align: left">Required&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">name&lt;/td>
 &lt;td style="text-align: left">string&lt;/td>
 &lt;td style="text-align: left">规则的名字，方便识别规则用意&lt;/td>
 &lt;td style="text-align: left">YES&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">host&lt;/td>
 &lt;td style="text-align: left">string&lt;/td>
 &lt;td style="text-align: left">注册中心里面对应的key值，现在是接口名&lt;/td>
 &lt;td style="text-align: left">YES&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">trafficPolicy&lt;/td>
 &lt;td style="text-align: left">TrafficPolicy&lt;/td>
 &lt;td style="text-align: left">流量策略&lt;/td>
 &lt;td style="text-align: left">NO&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">subsets&lt;/td>
 &lt;td style="text-align: left">Subset[]&lt;/td>
 &lt;td style="text-align: left">服务的单一版本或多版本的命名&lt;/td>
 &lt;td style="text-align: left">YES&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h4 id="subset">Subset&lt;/h4>
&lt;p>&lt;code>Subset&lt;/code>应用服务的命名，可以是单个也可以是多个版本&lt;/p>
&lt;ul>
&lt;li>使用示例&lt;/li>
&lt;/ul>
&lt;div class="highlight">&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;">&lt;code class="language-yaml" data-lang="yaml">&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">apiVersion&lt;/span>: service.dubbo.apache.org/v1alpha1
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">kind&lt;/span>: DestinationRule
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">metadata&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">name&lt;/span>: demo-route
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span>&lt;span style="color:#268bd2">spec&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">subsets&lt;/span>: &lt;span style="color:#586e75">#Subnet[]&lt;/span>
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> - &lt;span style="color:#268bd2">name&lt;/span>:
&lt;/span>&lt;/span>&lt;span style="display:flex;">&lt;span> &lt;span style="color:#268bd2">labels&lt;/span>:
&lt;/span>&lt;/span>&lt;/code>&lt;/pre>&lt;/div>&lt;ul>
&lt;li>属性说明&lt;/li>
&lt;/ul>
&lt;table>
 &lt;thead>
 &lt;tr>
 &lt;th style="text-align: left">Field&lt;/th>
 &lt;th style="text-align: left">Type&lt;/th>
 &lt;th style="text-align: left">Description&lt;/th>
 &lt;th style="text-align: left">Required&lt;/th>
 &lt;/tr>
 &lt;/thead>
 &lt;tbody>
 &lt;tr>
 &lt;td style="text-align: left">name&lt;/td>
 &lt;td style="text-align: left">string&lt;/td>
 &lt;td style="text-align: left">服务版本名称&lt;/td>
 &lt;td style="text-align: left">YES&lt;/td>
 &lt;/tr>
 &lt;tr>
 &lt;td style="text-align: left">labels&lt;/td>
 &lt;td style="text-align: left">map&amp;lt;string, string&amp;gt;&lt;/td>
 &lt;td style="text-align: left">打在服务身上的标签&lt;/td>
 &lt;td style="text-align: left">YES&lt;/td>
 &lt;/tr>
 &lt;/tbody>
&lt;/table>
&lt;h4 id="trafficpolicy">TrafficPolicy&lt;/h4>
&lt;p>&lt;code>TrafficPolicy&lt;/code>表示负载均衡策略&lt;/p></description></item></channel></rss>