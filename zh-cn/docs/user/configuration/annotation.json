{
  "filename": "annotation.md",
  "__html": "<h1>注解配置</h1>\n<p>需要 <code>2.6.3</code> 及以上版本支持\n点此查看<a href=\"https://github.com/apache/dubbo-samples/tree/master/dubbo-samples-annotation\">完整示例</a></p>\n<h2>服务提供方</h2>\n<h3><code>Service</code>注解暴露服务</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@Service</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">AnnotationServiceImpl</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">AnnotationService</span> </span>{\n    <span class=\"hljs-meta\">@Override</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">sayHello</span><span class=\"hljs-params\">(String name)</span> </span>{\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">\"annotation: hello, \"</span> + name;\n    }\n}\n</code></pre>\n<h3>增加应用共享配置</h3>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\"># dubbo-provider.properties</span>\n<span class=\"hljs-meta\">dubbo.application.name</span>=<span class=\"hljs-string\">annotation-provider</span>\n<span class=\"hljs-meta\">dubbo.registry.address</span>=<span class=\"hljs-string\">zookeeper://127.0.0.1:2181</span>\n<span class=\"hljs-meta\">dubbo.protocol.name</span>=<span class=\"hljs-string\">dubbo</span>\n<span class=\"hljs-meta\">dubbo.protocol.port</span>=<span class=\"hljs-string\">20880</span>\n</code></pre>\n<h3>指定Spring扫描路径</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableDubbo</span>(scanBasePackages = <span class=\"hljs-string\">\"org.apache.dubbo.samples.simple.annotation.impl\"</span>)\n<span class=\"hljs-meta\">@PropertySource</span>(<span class=\"hljs-string\">\"classpath:/spring/dubbo-provider.properties\"</span>)\n<span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ProviderConfiguration</span> </span>{\n       \n}\n</code></pre>\n<h2>服务消费方</h2>\n<h3><code>Reference</code>注解引用服务</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@Component</span>(<span class=\"hljs-string\">\"annotationAction\"</span>)\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">AnnotationAction</span> </span>{\n\n    <span class=\"hljs-meta\">@Reference</span>\n    <span class=\"hljs-keyword\">private</span> AnnotationService annotationService;\n    \n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> String <span class=\"hljs-title\">doSayHello</span><span class=\"hljs-params\">(String name)</span> </span>{\n        <span class=\"hljs-keyword\">return</span> annotationService.sayHello(name);\n    }\n}\n\n</code></pre>\n<h3>增加应用共享配置</h3>\n<pre><code class=\"language-properties\"><span class=\"hljs-comment\"># dubbo-consumer.properties</span>\n<span class=\"hljs-meta\">dubbo.application.name</span>=<span class=\"hljs-string\">annotation-consumer</span>\n<span class=\"hljs-meta\">dubbo.registry.address</span>=<span class=\"hljs-string\">zookeeper://127.0.0.1:2181</span>\n<span class=\"hljs-meta\">dubbo.consumer.timeout</span>=<span class=\"hljs-string\">3000</span>\n</code></pre>\n<h3>指定Spring扫描路径</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-meta\">@EnableDubbo</span>(scanBasePackages = <span class=\"hljs-string\">\"org.apache.dubbo.samples.simple.annotation.action\"</span>)\n<span class=\"hljs-meta\">@PropertySource</span>(<span class=\"hljs-string\">\"classpath:/spring/dubbo-consumer.properties\"</span>)\n<span class=\"hljs-meta\">@ComponentScan</span>(value = {<span class=\"hljs-string\">\"org.apache.dubbo.samples.simple.annotation.action\"</span>})\n<span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ConsumerConfiguration</span> </span>{\n\n}\n</code></pre>\n<h3>调动服务</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-keyword\">static</span> <span class=\"hljs-keyword\">void</span> <span class=\"hljs-title\">main</span><span class=\"hljs-params\">(String[] args)</span> <span class=\"hljs-keyword\">throws</span> Exception </span>{\n    AnnotationConfigApplicationContext context = <span class=\"hljs-keyword\">new</span> AnnotationConfigApplicationContext(ConsumerConfiguration.class);\n    context.start();\n    <span class=\"hljs-keyword\">final</span> AnnotationAction annotationAction = (AnnotationAction) context.getBean(<span class=\"hljs-string\">\"annotationAction\"</span>);\n    String hello = annotationAction.doSayHello(<span class=\"hljs-string\">\"world\"</span>);\n}\n</code></pre>\n",
  "link": "/zh-cn/docs/user/configuration/annotation.html",
  "meta": {}
}