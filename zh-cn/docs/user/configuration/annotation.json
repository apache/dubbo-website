{
  "filename": "annotation.md",
  "__html": "<h1>注解配置</h1>\n<p>需要 <code>2.5.7</code> 及以上版本支持</p>\n<h2>服务提供方</h2>\n<h3><code>Service</code>注解暴露服务</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">import</span> com.alibaba.dubbo.config.annotation.Service;\n \n<span class=\"hljs-meta\">@Service</span>(timeout = <span class=\"hljs-number\">5000</span>)\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">AnnotateServiceImpl</span> <span class=\"hljs-keyword\">implements</span> <span class=\"hljs-title\">AnnotateService</span> </span>{ \n    <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n<h3>javaconfig形式配置公共模块</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DubboConfiguration</span> </span>{\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ApplicationConfig <span class=\"hljs-title\">applicationConfig</span><span class=\"hljs-params\">()</span> </span>{\n        ApplicationConfig applicationConfig = <span class=\"hljs-keyword\">new</span> ApplicationConfig();\n        applicationConfig.setName(<span class=\"hljs-string\">\"provider-test\"</span>);\n        <span class=\"hljs-keyword\">return</span> applicationConfig;\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> RegistryConfig <span class=\"hljs-title\">registryConfig</span><span class=\"hljs-params\">()</span> </span>{\n        RegistryConfig registryConfig = <span class=\"hljs-keyword\">new</span> RegistryConfig();\n        registryConfig.setAddress(<span class=\"hljs-string\">\"zookeeper://127.0.0.1:2181\"</span>);\n        registryConfig.setClient(<span class=\"hljs-string\">\"curator\"</span>);\n        <span class=\"hljs-keyword\">return</span> registryConfig;\n    }\n}\n</code></pre>\n<h3>指定dubbo扫描路径</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@SpringBootApplication</span>\n<span class=\"hljs-meta\">@DubboComponentScan</span>(basePackages = <span class=\"hljs-string\">\"com.alibaba.dubbo.test.service.impl\"</span>)\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ProviderTestApp</span> </span>{\n    <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n<h2>服务消费方</h2>\n<h3><code>Reference</code>注解引用服务</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">AnnotationConsumeService</span> </span>{\n\n    <span class=\"hljs-meta\">@com</span>.alibaba.dubbo.config.annotation.Reference\n    <span class=\"hljs-keyword\">public</span> AnnotateService annotateService;\n    \n    <span class=\"hljs-comment\">// ...</span>\n}\n\n</code></pre>\n<h3>javaconfig形式配置公共模块</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@Configuration</span>\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">DubboConfiguration</span> </span>{\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ApplicationConfig <span class=\"hljs-title\">applicationConfig</span><span class=\"hljs-params\">()</span> </span>{\n        ApplicationConfig applicationConfig = <span class=\"hljs-keyword\">new</span> ApplicationConfig();\n        applicationConfig.setName(<span class=\"hljs-string\">\"consumer-test\"</span>);\n        <span class=\"hljs-keyword\">return</span> applicationConfig;\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> ConsumerConfig <span class=\"hljs-title\">consumerConfig</span><span class=\"hljs-params\">()</span> </span>{\n        ConsumerConfig consumerConfig = <span class=\"hljs-keyword\">new</span> ConsumerConfig();\n        consumerConfig.setTimeout(<span class=\"hljs-number\">3000</span>);\n        <span class=\"hljs-keyword\">return</span> consumerConfig;\n    }\n\n    <span class=\"hljs-meta\">@Bean</span>\n    <span class=\"hljs-function\"><span class=\"hljs-keyword\">public</span> RegistryConfig <span class=\"hljs-title\">registryConfig</span><span class=\"hljs-params\">()</span> </span>{\n        RegistryConfig registryConfig = <span class=\"hljs-keyword\">new</span> RegistryConfig();\n        registryConfig.setAddress(<span class=\"hljs-string\">\"zookeeper://127.0.0.1:2181\"</span>);\n        registryConfig.setClient(<span class=\"hljs-string\">\"curator\"</span>);\n        <span class=\"hljs-keyword\">return</span> registryConfig;\n    }\n}\n</code></pre>\n<h3>指定dubbo扫描路径</h3>\n<pre><code class=\"language-java\"><span class=\"hljs-meta\">@SpringBootApplication</span>\n<span class=\"hljs-meta\">@DubboComponentScan</span>(basePackages = <span class=\"hljs-string\">\"com.alibaba.dubbo.test.service\"</span>)\n<span class=\"hljs-keyword\">public</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\">class</span> <span class=\"hljs-title\">ConsumerTestApp</span> </span>{\n    <span class=\"hljs-comment\">// ...</span>\n}\n</code></pre>\n<h2>注意</h2>\n<p>如果你曾使用旧版annotation配置，请删除所有相关配置，我们将在下个版本删除所有旧版配置项。</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:annotation</span> <span class=\"hljs-attr\">package</span>=<span class=\"hljs-string\">\"com.alibaba.dubbo.test.service\"</span> /&gt;</span> \n</code></pre>\n"
}