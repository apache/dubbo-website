{
  "filename": "xml.md",
  "__html": "<h1>XML 配置</h1>\n<p>有关 XML 的详细配置项，请参见：<a href=\"../references/xml/introduction.md\">配置参考手册</a>。如果不想使用 Spring 配置，而希望通过 API 的方式进行调用，请参见：<a href=\"./api.md\">API配置</a>。想知道如何使用配置，请参见：<a href=\"../quick-start.md\">快速启动</a>。</p>\n<h2>provider.xml 示例</h2>\n<pre><code class=\"language-xml\"><span class=\"php\"><span class=\"hljs-meta\">&lt;?</span>xml version=<span class=\"hljs-string\">\"1.0\"</span> encoding=<span class=\"hljs-string\">\"UTF-8\"</span><span class=\"hljs-meta\">?&gt;</span></span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">beans</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">\"http://www.springframework.org/schema/beans\"</span>\n    <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>\n    <span class=\"hljs-attr\">xmlns:dubbo</span>=<span class=\"hljs-string\">\"http://dubbo.apache.org/schema/dubbo\"</span>\n    <span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd\"</span>&gt;</span>  \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:application</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"hello-world-app\"</span>  /&gt;</span>  \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:registry</span> <span class=\"hljs-attr\">address</span>=<span class=\"hljs-string\">\"multicast://224.5.6.7:1234\"</span> /&gt;</span>  \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:protocol</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"dubbo\"</span> <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">\"20880\"</span> /&gt;</span>  \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:service</span> <span class=\"hljs-attr\">interface</span>=<span class=\"hljs-string\">\"com.alibaba.dubbo.demo.DemoService\"</span> <span class=\"hljs-attr\">ref</span>=<span class=\"hljs-string\">\"demoServiceLocal\"</span> /&gt;</span>  \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:reference</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">\"demoServiceRemote\"</span> <span class=\"hljs-attr\">interface</span>=<span class=\"hljs-string\">\"com.alibaba.dubbo.demo.DemoService\"</span> /&gt;</span>  \n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">beans</span>&gt;</span>\n</code></pre>\n<p>所有标签都支持自定义参数，用于不同扩展点实现的特殊配置，如：</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:protocol</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"jms\"</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:parameter</span> <span class=\"hljs-attr\">key</span>=<span class=\"hljs-string\">\"queue\"</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">\"your_queue\"</span> /&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">dubbo:protocol</span>&gt;</span>\n</code></pre>\n<p>或： <sup class=\"footnote-ref\"><a href=\"#fn1\" id=\"fnref1\">[1]</a></sup></p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">beans</span> <span class=\"hljs-attr\">xmlns</span>=<span class=\"hljs-string\">\"http://www.springframework.org/schema/beans\"</span>\n    <span class=\"hljs-attr\">xmlns:xsi</span>=<span class=\"hljs-string\">\"http://www.w3.org/2001/XMLSchema-instance\"</span>\n    <span class=\"hljs-attr\">xmlns:dubbo</span>=<span class=\"hljs-string\">\"http://dubbo.apache.org/schema/dubbo\"</span>\n    <span class=\"hljs-attr\">xmlns:p</span>=<span class=\"hljs-string\">\"http://www.springframework.org/schema/p\"</span>\n    <span class=\"hljs-attr\">xsi:schemaLocation</span>=<span class=\"hljs-string\">\"http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-4.3.xsd http://dubbo.apache.org/schema/dubbo http://dubbo.apache.org/schema/dubbo/dubbo.xsd\"</span>&gt;</span>  \n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:protocol</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"jms\"</span> <span class=\"hljs-attr\">p:queue</span>=<span class=\"hljs-string\">\"your_queue\"</span> /&gt;</span>  \n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">beans</span>&gt;</span>\n</code></pre>\n<h2>配置之间的关系</h2>\n<p><img src=\"../sources/images/dubbo-config.jpg\" alt=\"dubbo-config\"></p>\n<table>\n<thead>\n<tr>\n<th>标签</th>\n<th>用途</th>\n<th>解释</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>&lt;dubbo:service/&gt;</code></td>\n<td>服务配置</td>\n<td>用于暴露一个服务，定义服务的元信息，一个服务可以用多个协议暴露，一个服务也可以注册到多个注册中心</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:reference/&gt;</code> <sup class=\"footnote-ref\"><a href=\"#fn2\" id=\"fnref2\">[2]</a></sup></td>\n<td>引用配置</td>\n<td>用于创建一个远程服务代理，一个引用可以指向多个注册中心</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:protocol/&gt;</code></td>\n<td>协议配置</td>\n<td>用于配置提供服务的协议信息，协议由提供方指定，消费方被动接受</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:application/&gt;</code></td>\n<td>应用配置</td>\n<td>用于配置当前应用信息，不管该应用是提供者还是消费者</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:module/&gt;</code></td>\n<td>模块配置</td>\n<td>用于配置当前模块信息，可选</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:registry/&gt;</code></td>\n<td>注册中心配置</td>\n<td>用于配置连接注册中心相关信息</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:monitor/&gt;</code></td>\n<td>监控中心配置</td>\n<td>用于配置连接监控中心相关信息，可选</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:provider/&gt;</code></td>\n<td>提供方配置</td>\n<td>当 ProtocolConfig 和 ServiceConfig 某属性没有配置时，采用此缺省值，可选</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:consumer/&gt;</code></td>\n<td>消费方配置</td>\n<td>当 ReferenceConfig 某属性没有配置时，采用此缺省值，可选</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:method/&gt;</code></td>\n<td>方法配置</td>\n<td>用于 ServiceConfig 和 ReferenceConfig 指定方法级的配置信息</td>\n</tr>\n<tr>\n<td><code>&lt;dubbo:argument/&gt;</code></td>\n<td>参数配置</td>\n<td>用于指定方法参数配置</td>\n</tr>\n</tbody>\n</table>\n<h2>配置覆盖关系</h2>\n<p>以 timeout 为例，显示了配置的查找顺序，其它 retries, loadbalance, actives 等类似：</p>\n<ul>\n<li>方法级优先，接口级次之，全局配置再次之。</li>\n<li>如果级别一样，则消费方优先，提供方次之。</li>\n</ul>\n<p>其中，服务提供方配置，通过 URL 经由注册中心传递给消费方。</p>\n<p><img src=\"../sources/images/dubbo-config-override.jpg\" alt=\"dubbo-config-override\"></p>\n<p>建议由服务提供方设置超时，因为一个方法需要执行多长时间，服务提供方更清楚，如果一个消费方同时引用多个服务，就不需要关心每个服务的超时设置。</p>\n<p>理论上 ReferenceConfig 的非服务标识配置，在 ConsumerConfig，ServiceConfig, ProviderConfig 均可以缺省配置。</p>\n<hr class=\"footnotes-sep\">\n<section class=\"footnotes\">\n<ol class=\"footnotes-list\">\n<li id=\"fn1\" class=\"footnote-item\"><p><code>2.1.0</code> 开始支持，注意声明：<code>xmlns:p=&quot;http://www.springframework.org/schema/p&quot;</code> <a href=\"#fnref1\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n<li id=\"fn2\" class=\"footnote-item\"><p>引用缺省是延迟初始化的，只有引用被注入到其它 Bean，或被 <code>getBean()</code> 获取，才会初始化。如果需要饥饿加载，即没有人引用也立即生成动态代理，可以配置：<code>&lt;dubbo:reference ... init=&quot;true&quot; /&gt;</code> <a href=\"#fnref2\" class=\"footnote-backref\">↩︎</a></p>\n</li>\n</ol>\n</section>\n"
}