{
  "filename": "hostname-binding.md",
  "__html": "<h1>主机绑定</h1>\n<h2>查找顺序</h2>\n<p>缺省主机 IP 查找顺序：</p>\n<ul>\n<li>通过 <code>LocalHost.getLocalHost()</code> 获取本机地址。</li>\n<li>如果是 <code>127.*</code> 等 loopback 地址，则扫描各网卡，获取网卡 IP。</li>\n</ul>\n<h2>主机配置</h2>\n<p>注册的地址如果获取不正确，比如需要注册公网地址，可以：</p>\n<ol>\n<li>\n<p>可以在 <code>/etc/hosts</code> 中加入：机器名 公网 IP，比如：</p>\n<pre><code>test1 205.182.23.201\n</code></pre>\n</li>\n<li>\n<p>在 <code>dubbo.xml</code> 中加入主机地址的配置：</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:protocol</span> <span class=\"hljs-attr\">host</span>=<span class=\"hljs-string\">\"205.182.23.201\"</span>&gt;</span>\n</code></pre>\n</li>\n<li>\n<p>或在 <code>dubbo.properties</code> 中加入主机地址的配置：</p>\n<pre><code class=\"language-properties\">dubbo.protocol.host=205.182.23.201\n</code></pre>\n</li>\n</ol>\n<h2>端口配置</h2>\n<p>缺省主机端口与协议相关：</p>\n<table>\n<thead>\n<tr>\n<th>协议</th>\n<th>端口</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>dubbo</td>\n<td>20880</td>\n</tr>\n<tr>\n<td>rmi</td>\n<td>1099</td>\n</tr>\n<tr>\n<td>http</td>\n<td>80</td>\n</tr>\n<tr>\n<td>hessian</td>\n<td>80</td>\n</tr>\n<tr>\n<td>webservice</td>\n<td>80</td>\n</tr>\n<tr>\n<td>memcached</td>\n<td>11211</td>\n</tr>\n<tr>\n<td>redis</td>\n<td>6379</td>\n</tr>\n</tbody>\n</table>\n<p>可以按照下面的方式配置端口：</p>\n<ol>\n<li>\n<p>在 <code>dubbo.xml</code> 中加入主机地址的配置：</p>\n<pre><code class=\"language-xml\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">dubbo:protocol</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">\"dubbo\"</span> <span class=\"hljs-attr\">port</span>=<span class=\"hljs-string\">\"20880\"</span>&gt;</span>\n</code></pre>\n</li>\n<li>\n<p>或在 <code>dubbo.properties</code> 中加入主机地址的配置：</p>\n<pre><code class=\"language-properties\">dubbo.protocol.dubbo.port=20880\n</code></pre>\n</li>\n</ol>\n"
}