<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>性能参考手册 on Apache Dubbo</title><link>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/performance/</link><description>Recent content in 性能参考手册 on Apache Dubbo</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/performance/index.xml" rel="self" type="application/rss+xml"/><item><title>RPC 协议 Triple&amp;Dubbo 基准测试</title><link>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/performance/rpc-benchmarking/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/performance/rpc-benchmarking/</guid><description>&lt;ul&gt;
&lt;li&gt;Dubbo3 的 _Dubbo协议 _实现与 Dubbo2 版本在性能上基本持平。&lt;/li&gt;
&lt;li&gt;由于 Triple协议 本身是基于 HTTP/2 构建，因此在单条链路上的 RPC 调用并未比基于 TCP 的 Dubbo2 有提升，反而在某些调用场景出现一定下降。但 _Triple协议 _更大的优势在于网关穿透性、通用性，以及 Stream 通信模型带来的总体吞吐量提升。&lt;/li&gt;
&lt;li&gt;Triple 预期在网关代理场景下一定会有更好的性能表现，鉴于当前压测环境，本轮 benchmark 暂未提供。&lt;/li&gt;
&lt;/ul&gt;
&lt;h2 id="11-环境"&gt;1.1 环境&lt;/h2&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;&lt;/th&gt;
 &lt;th&gt;描述&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;机器&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;4C8G Linux JDK 1.8（Provider）4C8G Linux JDK 1.8 （Consumer）&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;压测用例&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;RPC 方法类型包括：无参无返回值、普通pojo返回值、pojo列表返回值&lt;br /&gt;&lt;br /&gt;2.7 版本 Dubbo 协议（Hessian2 序列化）&lt;br /&gt;3.0 版本 Dubbo 协议（Hessian2 序列化）&lt;br /&gt;3.0 版本 Dubbo 协议（Protobuf 序列化）&lt;br /&gt;3.0 版本 Triple 协议（Protobuf 序列化）&lt;br /&gt;3.0 版本 Triple 协议（Protobuf 套 Hessian2 序列化）&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;压测方法&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;单链接场景下，消费端起 32 并发线程（当前机器配置 qps rt 较均衡的并发数），持续压后采集压测数据&lt;br /&gt; 压测数据通过 &lt;a href="https://github.com/apache/dubbo-benchmark"&gt;https://github.com/apache/dubbo-benchmark&lt;/a&gt; 得出&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;br /&gt;
&lt;h2 id="12-数据分析"&gt;1.2 数据分析&lt;/h2&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;&lt;/th&gt;
 &lt;th&gt;&lt;strong&gt;Dubbo + Hessian2&lt;br /&gt;2.7&lt;/strong&gt;&lt;/th&gt;
 &lt;th&gt;&lt;strong&gt;Dubbo + Hessian2&lt;br /&gt;3.0&lt;/strong&gt;&lt;/th&gt;
 &lt;th&gt;&lt;strong&gt;Dubbo + Protobuf&lt;br /&gt;3.0&lt;/strong&gt;&lt;/th&gt;
 &lt;th&gt;&lt;strong&gt;Triple + Protobuf&lt;br /&gt;3.0&lt;/strong&gt;&lt;/th&gt;
 &lt;th&gt;&lt;strong&gt;Triple + Protobuf(Hessian)&lt;br /&gt;3.0&lt;/strong&gt;&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;无参方法&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;30333 ops/s&lt;br /&gt;2.5ms P99&lt;/td&gt;
 &lt;td&gt;30414 ops/s&lt;br /&gt;2.4ms P99&lt;/td&gt;
 &lt;td&gt;24123 ops/s&lt;br /&gt;3.2ms P99&lt;/td&gt;
 &lt;td&gt;7016 ops/s&lt;br /&gt;8.7ms P99&lt;/td&gt;
 &lt;td&gt;6635 ops/s&lt;br /&gt;9.1ms P99&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;pojo返回值&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;8984 ops/s&lt;br /&gt;6.1 ms P99&lt;/td&gt;
 &lt;td&gt;12279 ops/s&lt;br /&gt;5.7 ms P99&lt;/td&gt;
 &lt;td&gt;21479 ops/s&lt;br /&gt;3.0 ms P99&lt;/td&gt;
 &lt;td&gt;6255 ops/s&lt;br /&gt;8.9 ms P99&lt;/td&gt;
 &lt;td&gt;6491 ops/s&lt;br /&gt;10 ms P99&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;pojo列表返回值&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;1916 ops/s&lt;br /&gt;34 ms P99&lt;/td&gt;
 &lt;td&gt;2037 ops/s&lt;br /&gt;34 ms P99&lt;/td&gt;
 &lt;td&gt;12722 ops/s&lt;br /&gt;7.7 ms P99&lt;/td&gt;
 &lt;td&gt;6920 ops/s&lt;br /&gt;9.6 ms P99&lt;/td&gt;
 &lt;td&gt;2833 ops/s&lt;br /&gt;27 ms P99&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="121-dubbo-协议不同版本实现对比"&gt;1.2.1 Dubbo 协议不同版本实现对比&lt;/h3&gt;
&lt;p&gt;&lt;img src="https://cn.dubbo.apache.org/imgs/v3/performance/rpc-dubbo.svg" alt="//imgs/v3/performance/rpc-dubbo.svg"&gt;&lt;/p&gt;</description></item><item><title>RPC 基准测试 控制台</title><link>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/performance/page-benchmarking/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/performance/page-benchmarking/</guid><description>&lt;html lang=""&gt;
&lt;head&gt;
 &lt;meta charset="utf-8"&gt;
 &lt;meta http-equiv="X-UA-Compatible" content="IE=edge"&gt;
 &lt;meta name="viewport" content="width=device-width,initial-scale=1"&gt;
 &lt;title&gt;dubbo-benchmark&lt;/title&gt;
 &lt;script defer="defer" src="https://cn.dubbo.apache.org/js/chunk-vendors.js"&gt;&lt;/script&gt;
 &lt;script defer="defer" src="https://cn.dubbo.apache.org/js/app.js"&gt;&lt;/script&gt;
 &lt;link href="https://cn.dubbo.apache.org/css/chunk-vendors.css" rel="stylesheet"&gt;
 &lt;link href="https://cn.dubbo.apache.org/css/app.css" rel="stylesheet"&gt;
&lt;/head&gt;
&lt;body&gt;
&lt;noscript&gt;&lt;strong&gt;We're sorry but dubbo-benchmark doesn't work properly without JavaScript enabled. Please enable it to
 continue.&lt;/strong&gt;&lt;/noscript&gt;
&lt;div id="app"&gt;&lt;/div&gt;
&lt;/body&gt;
&lt;/html&gt;</description></item><item><title>应用级服务发现基准测试</title><link>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/performance/benchmarking/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/performance/benchmarking/</guid><description>&lt;h2 id="1-benchmark-结论"&gt;1 Benchmark 结论&lt;/h2&gt;
&lt;p&gt;对比 2.x 版本，Dubbo3 版本&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;服务发现资源利用率显著提升。
&lt;ul&gt;
&lt;li&gt;对比接口级服务发现，单机常驻内存下降 50%，地址变更期 GC 消耗下降一个数量级 (百次 -&amp;gt; 十次)&lt;/li&gt;
&lt;li&gt;对比应用级服务发现，单机常驻内存下降 75%，GC 次数趋零&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;以下是详细压测过程与数据&lt;/p&gt;
&lt;h2 id="2-应用级服务发现地址推送链路"&gt;2 应用级服务发现（地址推送链路）&lt;/h2&gt;
&lt;p&gt;此部分压测数据是由工商银行 Dubbo 团队基于内部生产数据给出，压测过程模拟了“生产环境地址+zookeeper”的服务发现架构。&lt;/p&gt;
&lt;h3 id="21-环境"&gt;2.1 环境&lt;/h3&gt;
&lt;table&gt;
 &lt;thead&gt;
 &lt;tr&gt;
 &lt;th&gt;&lt;/th&gt;
 &lt;th&gt;描述&lt;/th&gt;
 &lt;/tr&gt;
 &lt;/thead&gt;
 &lt;tbody&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;压测数据&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;提供者&lt;br/&gt;500运行实例✖️8interface✖️5protocol，即每个提供者向注册中心注册40个URL，总计20000个URL，每个URL字符长度约1k。&lt;br/&gt;&lt;br/&gt;注册中心&lt;br/&gt;2个独立zookeeper注册中心，服务提供者消费者采用并行配置。&lt;br/&gt;&lt;br/&gt;消费者&lt;br/&gt;配置1c2g，xmx=768，开启GC，从2个注册中心订阅，每5秒调用一次服务。运行20小时。&lt;/td&gt;
 &lt;/tr&gt;
 &lt;tr&gt;
 &lt;td&gt;&lt;strong&gt;压测环境&lt;/strong&gt;&lt;/td&gt;
 &lt;td&gt;Java version &amp;ldquo;1.8.0&amp;rdquo;&lt;br/&gt;Java(TM) SE Runtime Enviroment (build pxa6480sr3fp12-20160919_01(SR3 FP12))&lt;br/&gt;IBM J9 VM (Build 2.8, JRE 1.8.0 Linux amd64-64 Compressed References 20160915_318796, JIT enabled, AOT enabled)&lt;/td&gt;
 &lt;/tr&gt;
 &lt;/tbody&gt;
&lt;/table&gt;
&lt;h3 id="22-数据分析"&gt;2.2 数据分析&lt;/h3&gt;
&lt;p&gt;&lt;img src="https://cn.dubbo.apache.org/imgs/v3/performance/registry-mem.svg" alt="//imgs/v3/performance/registry-mem.svg"&gt;&lt;/p&gt;
&lt;p&gt;&lt;br /&gt;图一 服务发现模型内存占用变化&lt;br /&gt;&lt;br /&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;Dubbo3 接口级服务发现模型，常驻内存较 2.x 版本下降约 50%&lt;/li&gt;
&lt;li&gt;Dubbo3 应用级服务发现模型，常驻内存较 2.x 版本下降约 75%&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;img src="https://cn.dubbo.apache.org/imgs/v3/performance/registry-gc.svg" alt="//imgs/v3/performance/registry-gc.svg"&gt;&lt;/p&gt;</description></item></channel></rss>