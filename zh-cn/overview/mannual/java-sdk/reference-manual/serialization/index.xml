<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>序列化 on Apache Dubbo</title><link>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/serialization/</link><description>Recent content in 序列化 on Apache Dubbo</description><generator>Hugo -- gohugo.io</generator><language>zh-cn</language><atom:link href="https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/serialization/index.xml" rel="self" type="application/rss+xml"/><item><title>Dubbo 序列化机制介绍</title><link>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/serialization/serialization/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/serialization/serialization/</guid><description>支持的协议列表 以下是 Dubbo 框架支持的序列化协议列表，根据 triple、dubbo RPC 通信协议进行分类。
RPC协议 编程模式 序列化协议 配置方式 JDK版本 说明 triple IDL protobuf、protobuf-json 默认值 8, 17, 21 使用 IDL 时的默认序列化方式，client 也可以选择 protobuf-json 序列化通信，无需额外配置 Java接口 protobuf-wrapper serialization=&amp;ldquo;hessian&amp;rdquo; 8, 17, 21 这种模式下采用的是两次序列化模式，即数据先被 hessian 序列化，再由 protobuf 序列化。为了支持与 IDL 同等的调用模型，易用性较好但性能略有下降 dubbo Java接口 hessian 默认值，serialization=&amp;ldquo;hessian&amp;rdquo; 8, 17, 21 dubbo 协议默认序列化方式，具备兼容性好、高性能、跨语言的优势(java、go、c/c++、php、python、.net) Java接口 protostuff serialization=&amp;ldquo;protostuff&amp;rdquo; 8 A java serialization library with built-in support for forward-backward compatibility (schema evolution) and validation. Java接口 gson serialization=&amp;ldquo;gson&amp;rdquo; 8, 17, 21 谷歌推出的一款 json 序列化库 Java接口 avro serialization=&amp;ldquo;avro&amp;rdquo; 8, 17, 21 一款 Java 高性能序列化库 Java接口 msgpack serialization=&amp;ldquo;msgpack&amp;rdquo; 8, 17, 21 具备兼容性好，提供多语言（Java、C/C++、Python等）实现等优势 Java接口 kryo serialization=&amp;ldquo;kryo&amp;rdquo; 8, 17, 21 Kryo是一种非常成熟的序列化实现，已经在Twitter、Groupon、Yahoo以及多个著名开源项目（如Hive、Storm）中广泛的使用。 Java接口 fastjson2 serialization=&amp;ldquo;fastjson2&amp;rdquo; 8, 17, 21 fastjson Java接口 更多扩展 dubbo-spi-extensions 性能对比报告 序列化对于远程调用的响应速度、吞吐量、网络带宽消耗等起着至关重要的作用，是我们提升分布式系统性能的最关键因素之一。</description></item><item><title>序列化协议升级</title><link>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/serialization/serialization-upgrade/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/mannual/java-sdk/reference-manual/serialization/serialization-upgrade/</guid><description>在 3.1.0 版本中，Dubbo 默认支持的序列化协议新增对 Fastjson2 的支持。部分用户可能会考虑在现有的系统中对序列化协议进行升级，但服务端和客户端版本的差异可能导致客户端并不支持服务端的序列化协议。
在 3.2.0 版本中, Dubbo 的服务端引入新的配置 prefer-serialization，该特性可以完美解决服务端序列化升级过程中可能带来的风险。
最佳实践 序列化协议升级，需要分两步走：
首先需要推动服务端的序列化协议升级，同时在服务端的暴露配置中需要添加 prefer-serialization 配置。 比如：升级前的序列化协议是 hessian2，升级之后的序列化协议是 Fastjson2 那么在服务端的暴露配置中就应该添加如下所示的配置。
dubbo.provider.prefer-serialization=fastjson2,hessian2 dubbo.provider.serialization=hessian2 其次，客户端需要升级至和服务端相同版本 实现原理 dubbo 客户端序列化协议是根据服务端的注册配置来选择的（即服务端的serialization配置）。在请求阶段 dubbo 会把客户端的序列化协议组装到请求头上，服务端在进行反序列化时会根据请求头来确定反序列化协议。所以，如果服务端和客户端的版本不一致就可能会出现客户端序列化不了的情况。
为了解决这个情况，3.2.0 在客户端序列化的时候会优先使用 prefer-serialization 配置的协议，如果不支持 prefer-serialization 相关的协议，才会使用 serialization 配置的协议。（可以把 serialization 理解为一个兜底的配置）</description></item></channel></rss>