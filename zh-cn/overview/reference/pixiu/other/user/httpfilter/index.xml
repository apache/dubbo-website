<?xml version="1.0" encoding="utf-8" standalone="yes"?><rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom"><channel><title>Http Filter 介绍 on Apache Dubbo</title><link>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/</link><description>Recent content in Http Filter 介绍 on Apache Dubbo</description><generator>Hugo</generator><language>zh-cn</language><atom:link href="https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/index.xml" rel="self" type="application/rss+xml"/><item><title>Dubbo HttpFilter 介绍</title><link>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/dubbo/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/dubbo/</guid><description>&lt;h1 id="使用-http-调用-dubbo"&gt;使用 HTTP 调用 Dubbo&lt;/h1&gt;
&lt;h2 id="定义pixiu配置文件"&gt;定义Pixiu配置文件&lt;/h2&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#268bd2"&gt;static_resources&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;listeners&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;name&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;http-listener&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;protocol_type&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;HTTP&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;address&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;socket_address&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;address&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;0.0.0.0&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;port&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;8888&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;filter_chains&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;filters&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;name&lt;/span&gt;: dgp.filter.httpconnectionmanager
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;route_config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;routes&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;match&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;prefix&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;*&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;http_filters&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;name&lt;/span&gt;: dgp.filter.http.dubboproxy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;dubboProxyConfig&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;auto_resolve&lt;/span&gt;: &lt;span style="color:#cb4b16"&gt;true&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;registries&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#2aa198"&gt;&amp;#34;zookeeper&amp;#34;&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;protocol&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;zookeeper&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;timeout&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;3s&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;address&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;127.0.0.1:2181&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;username&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;password&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;timeout_config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;connect_timeout&lt;/span&gt;: 5s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;request_timeout&lt;/span&gt;: 5s
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;clusters&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;name&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;dubbo-server&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;lb_policy&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;lb&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;endpoints&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;id&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;socket_address&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;address&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;127.0.0.1&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;port&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;20000&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;shutdown_config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;timeout&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;60s&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;step_timeout&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;10s&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;reject_policy&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;immediacy&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h2 id="准备dubbo服务"&gt;准备Dubbo服务&lt;/h2&gt;
&lt;h3 id="启动zookeeper需要提前准备好docker和compose如果本地有的话可以忽略"&gt;启动zookeeper,需要提前准备好docker和compose，如果本地有的话可以忽略&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/apache/dubbo-go-pixiu-samples/tree/main/dubbohttpproxy/server/dubbo/app"&gt;docker-compose.yml&lt;/a&gt;&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-shell" data-lang="shell"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;docker-compose -f &lt;span style="color:#719e07"&gt;{&lt;/span&gt;CURRENT_PATH&lt;span style="color:#719e07"&gt;}&lt;/span&gt;/dubbo-go-pixiu-samples/dubbohttpproxy/docker/docker-compose.yml &lt;span style="color:#719e07"&gt;&amp;amp;&amp;amp;&lt;/span&gt; docker-compose up -d
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h3 id="启动-dubbo-server"&gt;启动 Dubbo Server&lt;/h3&gt;
&lt;p&gt;&lt;a href="https://github.com/apache/dubbo-go-pixiu-samples/tree/main/dubbohttpproxy/server/dubbo/app"&gt;Run&lt;/a&gt;&lt;/p&gt;</description></item><item><title>Metric 介绍</title><link>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/metric/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/metric/</guid><description>&lt;h1 id="指标上报过滤器-dgpfilterhttpmetric"&gt;指标上报过滤器 (dgp.filter.http.metric)&lt;/h1&gt;
&lt;hr&gt;
&lt;h2 id="概述"&gt;概述&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;dgp.filter.http.metric&lt;/code&gt; 过滤器为 Pixiu 网关提供统一的指标上报功能。它整合了之前的两个过滤器（&lt;code&gt;dgp.filter.http.metric&lt;/code&gt; 和 &lt;code&gt;dgp.filter.http.prometheusmetric&lt;/code&gt;）的功能，并支持 &lt;strong&gt;Pull&lt;/strong&gt; 和 &lt;strong&gt;Push&lt;/strong&gt; 两种模式，集成了 OpenTelemetry。&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;&lt;strong&gt;注意&lt;/strong&gt;：此过滤器默认使用 &lt;strong&gt;Push&lt;/strong&gt; 模式。如需使用 Pull 模式，请在配置中显式指定 &lt;code&gt;mode: &amp;quot;pull&amp;quot;&lt;/code&gt;。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="核心特性"&gt;核心特性&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;统一入口&lt;/strong&gt;：单个过滤器支持 Pull 和 Push 两种模式&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;OpenTelemetry 集成&lt;/strong&gt;：Pull 模式使用 OpenTelemetry（与 Pixiu Tracing 保持一致）&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;Context 扩展&lt;/strong&gt;：其他过滤器可通过 &lt;code&gt;HttpContext.RecordMetric()&lt;/code&gt; 记录自定义指标&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;向后兼容&lt;/strong&gt;：复用原有过滤器的逻辑&lt;/li&gt;
&lt;/ul&gt;
&lt;hr&gt;
&lt;h2 id="模式说明"&gt;模式说明&lt;/h2&gt;
&lt;h3 id="pull-模式推荐"&gt;Pull 模式（推荐）&lt;/h3&gt;
&lt;p&gt;指标通过 HTTP 端点暴露，供 Prometheus 抓取。&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;特点：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;使用 OpenTelemetry SDK&lt;/li&gt;
&lt;li&gt;指标通过全局 HTTP 端点暴露&lt;/li&gt;
&lt;li&gt;Prometheus 标准拉取模型&lt;/li&gt;
&lt;li&gt;支持来自 Context 的动态自定义指标&lt;/li&gt;
&lt;/ul&gt;
&lt;p&gt;&lt;strong&gt;适用场景：&lt;/strong&gt;&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;长期运行的服务&lt;/li&gt;
&lt;li&gt;Kubernetes 环境&lt;/li&gt;
&lt;li&gt;开发和测试环境&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="push-模式"&gt;Push 模式&lt;/h3&gt;
&lt;p&gt;指标主动推送到 Prometheus Push Gateway。&lt;/p&gt;</description></item><item><title>Opa 介绍</title><link>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/opa/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/opa/</guid><description>&lt;h1 id="opa-过滤器-dgpfilterhttpopa"&gt;OPA 过滤器 (dgp.filter.http.opa)&lt;/h1&gt;
&lt;hr&gt;
&lt;h2 id="中文"&gt;中文&lt;/h2&gt;
&lt;h3 id="概述"&gt;概述&lt;/h3&gt;
&lt;p&gt;&lt;code&gt;dgp.filter.http.opa&lt;/code&gt; 过滤器通过 Rego 策略将授权决策委托给 Open Policy Agent (OPA)。该过滤器评估每个 HTTP 请求并根据 Rego 策略决定是否允许或拒绝请求。策略通过内联 Rego 模块加载，并使用 OPA 的内置查询引擎进行评估。&lt;/p&gt;
&lt;h3 id="实际行为"&gt;实际行为&lt;/h3&gt;
&lt;ul&gt;
&lt;li&gt;从配置项 &lt;code&gt;policy&lt;/code&gt; 读取 &lt;strong&gt;Rego 模块源码字符串&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;从配置项 &lt;code&gt;entrypoint&lt;/code&gt; 读取 &lt;strong&gt;Rego 查询字符串&lt;/strong&gt;。&lt;/li&gt;
&lt;li&gt;每次请求构造 &lt;code&gt;input&lt;/code&gt; 对象（见下），并评估该查询。&lt;/li&gt;
&lt;li&gt;如果查询结果为 &lt;code&gt;true&lt;/code&gt;，则放行请求；否则拒绝请求。&lt;/li&gt;
&lt;/ul&gt;
&lt;blockquote&gt;
&lt;p&gt;目前过滤器&lt;strong&gt;不支持&lt;/strong&gt;：外部文件或 URI 加载、自定义拒绝状态码或返回自定义错误体等。&lt;/p&gt;
&lt;/blockquote&gt;
&lt;h3 id="配置结构"&gt;配置结构&lt;/h3&gt;
&lt;p&gt;将过滤器添加到 HTTP 连接管理器的 &lt;code&gt;http_filters&lt;/code&gt; 列表中：&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre tabindex="0" style="color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"&gt;&lt;code class="language-yaml" data-lang="yaml"&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#268bd2"&gt;filters&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;name&lt;/span&gt;: dgp.filter.httpconnectionmanager
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;route_config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#586e75"&gt;# ... 你的路由&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;http_filters&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;name&lt;/span&gt;: dgp.filter.http.opa
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;policy&lt;/span&gt;: |&lt;span style="color:#2aa198"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#2aa198"&gt; package http.authz
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#2aa198"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#2aa198"&gt; default allow = false
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#2aa198"&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#2aa198"&gt; allow {
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#2aa198"&gt; input.method == &amp;#34;GET&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#2aa198"&gt; input.path == &amp;#34;/status&amp;#34;
&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt;&lt;span style="color:#2aa198"&gt; }&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;entrypoint&lt;/span&gt;: &lt;span style="color:#2aa198"&gt;&amp;#34;data.http.authz.allow&amp;#34;&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#586e75"&gt;# HTTP proxy 过滤器应该在OPA 过滤器之后&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; - &lt;span style="color:#268bd2"&gt;name&lt;/span&gt;: dgp.filter.http.proxy
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; &lt;span style="color:#268bd2"&gt;config&lt;/span&gt;:
&lt;/span&gt;&lt;/span&gt;&lt;span style="display:flex;"&gt;&lt;span&gt; 	&lt;span style="color:#586e75"&gt;# ... proxy config&lt;/span&gt;
&lt;/span&gt;&lt;/span&gt;&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;h4 id="字段说明"&gt;字段说明&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;policy&lt;/code&gt;&lt;/strong&gt;（字符串，必填）
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;含义：&lt;/strong&gt; &lt;strong&gt;Rego 模块源码&lt;/strong&gt;（内联字符串）。通过 &lt;code&gt;rego.Module(&amp;quot;policy.rego&amp;quot;, policy)&lt;/code&gt; 加载。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据类型：&lt;/strong&gt; &lt;code&gt;string&lt;/code&gt;（建议使用 YAML 多行格式 &lt;code&gt;|&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;说明：&lt;/strong&gt; 当前版本不支持外部文件路径或 bundle URI。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;&lt;code&gt;entrypoint&lt;/code&gt;&lt;/strong&gt;（字符串，必填）
&lt;ul&gt;
&lt;li&gt;&lt;strong&gt;含义：&lt;/strong&gt; 传给 &lt;code&gt;rego.Query(...)&lt;/code&gt; 的 &lt;strong&gt;Rego 查询字符串&lt;/strong&gt;，应为合法查询，如 &lt;code&gt;data.&amp;lt;package&amp;gt;.&amp;lt;rule&amp;gt;&lt;/code&gt;（如 &lt;code&gt;data.http.authz.allow&lt;/code&gt;）。&lt;/li&gt;
&lt;li&gt;&lt;strong&gt;数据类型：&lt;/strong&gt; &lt;code&gt;string&lt;/code&gt;。&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h4 id="判定约定"&gt;判定约定&lt;/h4&gt;
&lt;ul&gt;
&lt;li&gt;如果查询结果集合非空且首个表达式值为 &lt;strong&gt;&lt;code&gt;true&lt;/code&gt;&lt;/strong&gt;，则请求放行。&lt;/li&gt;
&lt;li&gt;否则（空结果或值≠&lt;code&gt;true&lt;/code&gt;），请求被拒绝。&lt;/li&gt;
&lt;/ul&gt;
&lt;h3 id="策略输入input"&gt;策略输入（&lt;code&gt;input&lt;/code&gt;）&lt;/h3&gt;
&lt;p&gt;过滤器将 HTTP 请求转换为以下键值对（与当前实现一致，策略编写时请进行空值检查）：&lt;/p&gt;</description></item><item><title>RateLimiter 介绍</title><link>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/ratelimit/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/ratelimit/</guid><description>&lt;p&gt;欢迎认领补充此文档。&lt;/p&gt;</description></item><item><title>断路器介绍</title><link>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/hystrix/</link><pubDate>Mon, 01 Jan 0001 00:00:00 +0000</pubDate><guid>https://cn.dubbo.apache.org/zh-cn/overview/reference/pixiu/other/user/httpfilter/hystrix/</guid><description>&lt;p&gt;欢迎认领补充此文档。&lt;/p&gt;</description></item></channel></rss>