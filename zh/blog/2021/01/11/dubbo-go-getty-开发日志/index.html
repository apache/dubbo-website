<!doctype html><html lang=zh class=no-js><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=generator content="Hugo 0.80.0"><meta name=ROBOTS content="INDEX, FOLLOW"><link rel="shortcut icon" href=/favicons/favicon.ico><link rel=apple-touch-icon href=/favicons/apple-touch-icon-180x180.png sizes=180x180><link rel=icon type=image/png href=/favicons/favicon-16x16.png sizes=16x16><link rel=icon type=image/png href=/favicons/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=/favicons/android-36x36.png sizes=36x36><link rel=icon type=image/png href=/favicons/android-48x48.png sizes=48x48><link rel=icon type=image/png href=/favicons/android-72x72.png sizes=72x72><link rel=icon type=image/png href=/favicons/android-96x96.png sizes=96x96><link rel=icon type=image/png href=/favicons/android-144x144.png sizes=144x144><link rel=icon type=image/png href=/favicons/android-192x192.png sizes=192x192><title>Dubbo Go Getty å¼€å‘æ—¥å¿— | Apache Dubbo</title><meta property="og:title" content="Dubbo Go Getty å¼€å‘æ—¥å¿—"><meta property="og:description" content="æœ¬æ–‡è®°å½•äº†äºé›¨å¼€å‘ dubbo-go ç½‘ç»œåº“ getty çš„å†ç¨‹"><meta property="og:type" content="article"><meta property="og:url" content="http://dubbo.apache.org/zh/blog/2021/01/11/dubbo-go-getty-%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/"><meta property="article:published_time" content="2021-01-11T00:00:00+00:00"><meta property="article:modified_time" content="2021-01-28T18:54:43+08:00"><meta property="og:site_name" content="Apache Dubbo"><meta itemprop=name content="Dubbo Go Getty å¼€å‘æ—¥å¿—"><meta itemprop=description content="æœ¬æ–‡è®°å½•äº†äºé›¨å¼€å‘ dubbo-go ç½‘ç»œåº“ getty çš„å†ç¨‹"><meta itemprop=datePublished content="2021-01-11T00:00:00+00:00"><meta itemprop=dateModified content="2021-01-28T18:54:43+08:00"><meta itemprop=wordCount content="873"><meta itemprop=keywords content><meta name=twitter:card content="summary"><meta name=twitter:title content="Dubbo Go Getty å¼€å‘æ—¥å¿—"><meta name=twitter:description content="æœ¬æ–‡è®°å½•äº†äºé›¨å¼€å‘ dubbo-go ç½‘ç»œåº“ getty çš„å†ç¨‹"><script type=application/javascript>var doNotTrack=false;if(!doNotTrack){window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;ga('create','UA-112489517-1','auto');ga('send','pageview');}</script><script async src=https://www.google-analytics.com/analytics.js></script><link rel=preload href=/scss/main.min.8b180b4f9c3e92478ac4794f7583d0b2a7c043e9717486d0407c2dfdf725043f.css as=style><link href=/scss/main.min.8b180b4f9c3e92478ac4794f7583d0b2a7c043e9717486d0407c2dfdf725043f.css rel=stylesheet integrity><script src=/js/jquery-3.5.1.min.js integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin=anonymous></script><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/docsearch.js@2/dist/cdn/docsearch.min.css></head><body class="td-page td-blog"><header><nav class="js-navbar-scroll navbar navbar-expand navbar-dark flex-column flex-md-row td-navbar"><a class=navbar-brand href=/zh/><span class=navbar-logo><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 321.39 78.54"><title id="title19">DUBBO LOGO</title><path class="cls-1" d="M68.46 50.38c0 14.06 11.39 22.11 25.45 22.11s25.45-8.05 25.45-22.11V7.25H68.46zm21.24-28h8.6V31H89.7zm0 22.25h8.6v8.6H89.7zM33.24 7.25H4.06v64H33.24c10.95.0 19.3-7.18 23.29-17.15a45.12 45.12.0 002.38-14.87A45.12 45.12.0 0056.53 24.4C52.84 14.62 44.19 7.25 33.24 7.25zm.43 14.63H30.34a3.44 3.44.0 00-3.44 3.44V53.23a3.44 3.44.0 003.44 3.44h3.33v4.63h-8.3a6.87 6.87.0 01-6.87-6.87V24.12a6.87 6.87.0 016.87-6.87h8.3zM285.51 6.06c-17.05.0-30.88 10.28-30.88 33.21s13.83 33.21 30.88 33.21 30.88-10.28 30.88-33.21S302.56 6.06 285.51 6.06zm7.59 48.36a6.87 6.87.0 01-6.87 6.87h-8.3V56.67h3.33a3.44 3.44.0 003.44-3.44V25.31a3.44 3.44.0 00-3.44-3.44h-3.33V17.25h8.3a6.87 6.87.0 016.87 6.87zm-53.4-17.56A17.39 17.39.0 00227.31 7.25H195.1v64h32.21a19.44 19.44.0 0012.38-34.44zM211.63 61.29h-6.08l18.68-44h6.08zM177 36.85A17.39 17.39.0 00164.65 7.25H132.43v64h32.21A19.44 19.44.0 00177 36.85zM149 61.29h-6.08l18.68-44h6.08z" style="fill:#fff;fill-opacity:1"/></svg></span><span class="text-uppercase font-weight-bold">Apache Dubbo</span></a><div class="td-navbar-nav-scroll ml-md-auto" id=main_navbar><ul class="navbar-nav mt-2 mt-lg-0"><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/docs/><span>æ–‡æ¡£</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class="nav-link active" href=/zh/blog/><span class=active>åšå®¢</span></a></li><li class="nav-item mr-4 mb-2 mb-lg-0"><a class=nav-link href=/zh/community/><span>ç¤¾åŒº</span></a></li><li class="nav-item dropdown d-none d-lg-block"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>ä¸­æ–‡</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></li></ul></div><div class="navbar-nav d-none d-lg-block"><input type=search class="form-control td-search-input" placeholder="&#xf002 ç«™å†…æœç´¢â€¦" aria-label=ç«™å†…æœç´¢â€¦ autocomplete=off></div></nav></header><div class="container-fluid td-outer"><div class=td-main><div class="row flex-xl-nowrap"><div class="col-12 col-md-3 col-xl-2 td-sidebar d-print-none"><div id=td-sidebar-menu class=td-sidebar__inner><div id=content-mobile><form class="td-sidebar__search d-flex align-items-center"><input type=search class="form-control td-search-input" placeholder="&#xf002 ç«™å†…æœç´¢â€¦" aria-label=ç«™å†…æœç´¢â€¦ autocomplete=off>
<button class="btn btn-link td-sidebar__toggle d-md-none p-0 ml-3 fas fa-bars" type=button data-toggle=collapse data-target=#td-section-nav aria-controls=td-docs-nav aria-expanded=false aria-label="Toggle section navigation"></button></form></div><div id=content-desktop></div><nav class="collapse td-sidebar-nav" id=td-section-nav><div class="nav-item dropdown d-block d-lg-none"><a class="nav-link dropdown-toggle" href=# id=navbarDropdown role=button data-toggle=dropdown aria-haspopup=true aria-expanded=false>ä¸­æ–‡</a><div class=dropdown-menu aria-labelledby=navbarDropdownMenuLink><a class=dropdown-item href=/en/>English</a></div></div><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/blog/ class="align-left pl-0 pr-2 td-sidebar-link td-sidebar-link__section">åšå®¢</a></li><ul><li class="collapse show" id=zhblog><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/blog/news/ class="align-left pl-0 pr-2 active td-sidebar-link td-sidebar-link__section">æŠ€æœ¯åˆ†äº«</a></li><ul><li class="collapse show" id=zhblognews><a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210115dubbo-goe6ba90e7a081e7ac94e8aeb0e4ba8ce5aea2e688b7e7abafe8b083e794a8e8bf87e7a88b href=/zh/blog/2021/01/15/dubbo-go%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0%E4%BA%8C%E5%AE%A2%E6%88%B7%E7%AB%AF%E8%B0%83%E7%94%A8%E8%BF%87%E7%A8%8B/>dubbo-goæºç ç¬”è®°ï¼ˆäºŒï¼‰å®¢æˆ·ç«¯è°ƒç”¨è¿‡ç¨‹</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210115dubbogo-30e789b5e6898b-grpc-e8b5b0e59091e4ba91e58e9fe7949fe697b6e4bba3 href=/zh/blog/2021/01/15/dubbogo-3.0%E7%89%B5%E6%89%8B-grpc-%E8%B5%B0%E5%90%91%E4%BA%91%E5%8E%9F%E7%94%9F%E6%97%B6%E4%BB%A3/>dubbogo 3.0ï¼šç‰µæ‰‹ gRPC èµ°å‘äº‘åŸç”Ÿæ—¶ä»£</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210115e58886e5b883e5bc8fe4ba8be58aa1e6a186e69eb6-seata-golang-e9809ae4bfa1e6a8a1e59e8be8afa6e8a7a3 href=/zh/blog/2021/01/15/%E5%88%86%E5%B8%83%E5%BC%8F%E4%BA%8B%E5%8A%A1%E6%A1%86%E6%9E%B6-seata-golang-%E9%80%9A%E4%BF%A1%E6%A8%A1%E5%9E%8B%E8%AF%A6%E8%A7%A3/>åˆ†å¸ƒå¼äº‹åŠ¡æ¡†æ¶ seata-golang é€šä¿¡æ¨¡å‹è¯¦è§£</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-go-e4b8ad-rest-e58d8fe8aeaee5ae9ee78eb0 href=/zh/blog/2021/01/14/dubbo-go-%E4%B8%AD-rest-%E5%8D%8F%E8%AE%AE%E5%AE%9E%E7%8E%B0/>dubbo-go ä¸­ REST åè®®å®ç°</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-go-e4b8ade5b086-kubernets-e58e9fe4bd9ce4b8bae6b3a8e5868ce4b8ade79a84e8aebee8aea1e5928ce5ae9ee78eb0 href=/zh/blog/2021/01/14/dubbo-go-%E4%B8%AD%E5%B0%86-kubernets-%E5%8E%9F%E4%BD%9C%E4%B8%BA%E6%B3%A8%E5%86%8C%E4%B8%AD%E7%9A%84%E8%AE%BE%E8%AE%A1%E5%92%8C%E5%AE%9E%E7%8E%B0/>dubbo-go ä¸­å°† Kubernets åŸâ½£ä½œä¸ºæ³¨å†Œä¸­â¼¼çš„è®¾è®¡å’Œå®ç°</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-go-e58fafe4bfa1e8b083e794a8e5ae9ee78eb0 href=/zh/blog/2021/01/14/dubbo-go-%E5%8F%AF%E4%BF%A1%E8%B0%83%E7%94%A8%E5%AE%9E%E7%8E%B0/>dubbo-go å¯ä¿¡è°ƒç”¨å®ç°</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-go-e6ba90e7a081e7ac94e8aeb0e4b880server-e7abafe5bc80e590afe69c8de58aa1e8bf87e7a88b href=/zh/blog/2021/01/14/dubbo-go-%E6%BA%90%E7%A0%81%E7%AC%94%E8%AE%B0%E4%B8%80server-%E7%AB%AF%E5%BC%80%E5%90%AF%E6%9C%8D%E5%8A%A1%E8%BF%87%E7%A8%8B/>Dubbo-go æºç ç¬”è®°ï¼ˆä¸€ï¼‰Server ç«¯å¼€å¯æœåŠ¡è¿‡ç¨‹</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-goe5ba94e794a8e7bbb4e5baa6e6b3a8e5868ce6a8a1e59e8b href=/zh/blog/2021/01/14/dubbo-go%E5%BA%94%E7%94%A8%E7%BB%B4%E5%BA%A6%E6%B3%A8%E5%86%8C%E6%A8%A1%E5%9E%8B/>Dubbo-goåº”ç”¨ç»´åº¦æ³¨å†Œæ¨¡å‹</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114go-e78988e69cace585a5-dubbo-e7949fe68081e4b880e591a8e5b9b4 href=/zh/blog/2021/01/14/go-%E7%89%88%E6%9C%AC%E5%85%A5-dubbo-%E7%94%9F%E6%80%81%E4%B8%80%E5%91%A8%E5%B9%B4/>Go ç‰ˆæœ¬å…¥ Dubbo ç”Ÿæ€ä¸€å‘¨å¹´</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114e5bfabe9809fe4b88ae6898b-dubbo-go href=/zh/blog/2021/01/14/%E5%BF%AB%E9%80%9F%E4%B8%8A%E6%89%8B-dubbo-go/>å¿«é€Ÿä¸Šæ‰‹ dubbo-go</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114e6b682e9b8a6e699bae883bd-dubbo-go-e4babfe7baa7e6b581e9878fe79a84e5ae9ee8b7b5e4b88ee68ea2e7b4a2 href=/zh/blog/2021/01/14/%E6%B6%82%E9%B8%A6%E6%99%BA%E8%83%BD-dubbo-go-%E4%BA%BF%E7%BA%A7%E6%B5%81%E9%87%8F%E7%9A%84%E5%AE%9E%E8%B7%B5%E4%B8%8E%E6%8E%A2%E7%B4%A2/>æ¶‚é¸¦æ™ºèƒ½ dubbo-go äº¿çº§æµé‡çš„å®è·µä¸æ¢ç´¢</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114e8a7a3e69e84-dubbo-go-e79a84e6a0b8e5bf83e6b3a8e5868ce5bc95e6938e-nacos href=/zh/blog/2021/01/14/%E8%A7%A3%E6%9E%84-dubbo-go-%E7%9A%84%E6%A0%B8%E5%BF%83%E6%B3%A8%E5%86%8C%E5%BC%95%E6%93%8E-nacos/>è§£æ„ Dubbo-go çš„æ ¸å¿ƒæ³¨å†Œå¼•æ“ Nacos</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114e8aeb0e4b880e6aca1e59ca8-mosn-e5afb9-dubbodubbo-go-hessian2-e79a84e680a7e883bde4bc98e58c96 href=/zh/blog/2021/01/14/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%9C%A8-mosn-%E5%AF%B9-dubbodubbo-go-hessian2-%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>è®°ä¸€æ¬¡åœ¨ mosn å¯¹ dubboã€dubbo-go-hessian2 çš„æ€§èƒ½ä¼˜åŒ–</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114e983bde5b7b2e7bb8fe58d81e5b281e79a84-apache-dubboe8bf98e883bde5868de4b998e9a38ee7a0b4e6b5aae59097 href=/zh/blog/2021/01/14/%E9%83%BD%E5%B7%B2%E7%BB%8F%E5%8D%81%E5%B2%81%E7%9A%84-apache-dubbo%E8%BF%98%E8%83%BD%E5%86%8D%E4%B9%98%E9%A3%8E%E7%A0%B4%E6%B5%AA%E5%90%97/>éƒ½å·²ç»åå²çš„ Apache Dubboï¼Œè¿˜èƒ½å†ä¹˜é£ç ´æµªå—ï¼Ÿ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210112dubbo-go-e4b8ade5a682e4bd95e5ae9ee78eb0e8b7afe794b1e8a784e58899e58a9fe883bd href=/zh/blog/2021/01/12/dubbo-go-%E4%B8%AD%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%B7%AF%E7%94%B1%E8%A7%84%E5%88%99%E5%8A%9F%E8%83%BD/>dubbo-go ä¸­å¦‚ä½•å®ç°è·¯ç”±è§„åˆ™åŠŸèƒ½</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210112e8aeb0e4b880e6aca1e5afb9-dubbo-go-hessian2-e79a84e680a7e883bde4bc98e58c96 href=/zh/blog/2021/01/12/%E8%AE%B0%E4%B8%80%E6%AC%A1%E5%AF%B9-dubbo-go-hessian2-%E7%9A%84%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96/>è®°ä¸€æ¬¡å¯¹ dubbo-go-hessian2 çš„æ€§èƒ½ä¼˜åŒ–</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111dubbo-go-e4b8ad-metrics-e79a84e8aebee8aea1 href=/zh/blog/2021/01/11/dubbo-go-%E4%B8%AD-metrics-%E7%9A%84%E8%AE%BE%E8%AE%A1/>Dubbo Go ä¸­ metrics çš„è®¾è®¡</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111e586b2e4b88ae4ba91e58e9fe7949fdubbo-e58f91e5b883-go-e78988e69cac href=/zh/blog/2021/01/11/%E5%86%B2%E4%B8%8A%E4%BA%91%E5%8E%9F%E7%94%9Fdubbo-%E5%8F%91%E5%B8%83-go-%E7%89%88%E6%9C%AC/>Dubbo Go å‘å¸ƒ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111dubbo-go-e59b9ee9a1bee4b88ee5b195e69c9b href=/zh/blog/2021/01/11/dubbo-go-%E5%9B%9E%E9%A1%BE%E4%B8%8E%E5%B1%95%E6%9C%9B/>Dubbo Go å›é¡¾ä¸å±•æœ›</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111dubbo-go-e5bfabe9809fe5bc80e5a78b href=/zh/blog/2021/01/11/dubbo-go-%E5%BF%AB%E9%80%9F%E5%BC%80%E5%A7%8B/>Dubbo Go å¿«é€Ÿå¼€å§‹</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111dubbo-go-e79a84e5898de4b896e4bb8ae7949f href=/zh/blog/2021/01/11/dubbo-go-%E7%9A%84%E5%89%8D%E4%B8%96%E4%BB%8A%E7%94%9F/>Dubbo Go çš„å‰ä¸–ä»Šç”Ÿ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111dubbo-go-e8b8a9e59d91e8aeb0 href=/zh/blog/2021/01/11/dubbo-go-%E8%B8%A9%E5%9D%91%E8%AE%B0/>Dubbo Go è¸©å‘è®°</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111dubbo-go-e4b8ade79a84-tps-limit-e8aebee8aea1e4b88ee5ae9ee78eb0 href=/zh/blog/2021/01/11/dubbo-go-%E4%B8%AD%E7%9A%84-tps-limit-%E8%AE%BE%E8%AE%A1%E4%B8%8E%E5%AE%9E%E7%8E%B0/>dubbo-go tps limit</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111dubbo-go-e4b8ade5a682e4bd95e5ae9ee78eb0e8bf9ce7a88be9858de7bdaee7aea1e79086 href=/zh/blog/2021/01/11/dubbo-go-%E4%B8%AD%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8B%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/>dubbo-go ä¸­å¦‚ä½•å®ç°è¿œç¨‹é…ç½®ç®¡ç†ï¼Ÿ</a>
<a class="td-sidebar-link td-sidebar-link__page active" id=m-zhblog20210111dubbo-go-getty-e5bc80e58f91e697a5e5bf97 href=/zh/blog/2021/01/11/dubbo-go-getty-%E5%BC%80%E5%8F%91%E6%97%A5%E5%BF%97/>getty å¼€å‘æ—¥å¿—</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111e59ca8dubbo-goe4b8ade4bdbfe794a8sentinel href=/zh/blog/2021/01/11/%E5%9C%A8dubbo-go%E4%B8%AD%E4%BD%BF%E7%94%A8sentinel/>åœ¨dubbo-goä¸­ä½¿ç”¨sentinel</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210111e697a0e7bc9de8a194e68ea5-grpc-e4b88e-dubbo-go href=/zh/blog/2021/01/11/%E6%97%A0%E7%BC%9D%E8%A1%94%E6%8E%A5-grpc-%E4%B8%8E-dubbo-go/>æ— ç¼è¡”æ¥ gRPC ä¸ dubbo-go</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20201222dubbo-api-docs-apache-dubboe69687e6a1a3e5b195e7a4bae6b58be8af95e5b7a5e585b7 href=/zh/blog/2020/12/22/dubbo-api-docs-apache-dubbo%E6%96%87%E6%A1%A3%E5%B1%95%E7%A4%BA%E6%B5%8B%E8%AF%95%E5%B7%A5%E5%85%B7/>Dubbo-Api-Docs -- Apache Dubboæ–‡æ¡£å±•ç¤º&æµ‹è¯•å·¥å…·</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20200511e4bb8e-2019-e588b0-2020apache-dubbo-e5b9b4e5baa6e59b9ee9a1bee4b88ee680bbe7bb93 href=/zh/blog/2020/05/11/%E4%BB%8E-2019-%E5%88%B0-2020apache-dubbo-%E5%B9%B4%E5%BA%A6%E5%9B%9E%E9%A1%BE%E4%B8%8E%E6%80%BB%E7%BB%93/>ä» 2019 åˆ° 2020ï¼ŒApache Dubbo å¹´åº¦å›é¡¾ä¸æ€»ç»“</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20191202dubboe6b58be8af95e9aa8ce8af81 href=/zh/blog/2019/12/02/dubbo%E6%B5%8B%E8%AF%95%E9%AA%8C%E8%AF%81/>Dubboæµ‹è¯•éªŒè¯</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20191130dubbo-e59ca8-service-mesh-e4b88be79a84e6809de88083e5928ce696b9e6a188 href=/zh/blog/2019/11/30/dubbo-%E5%9C%A8-service-mesh-%E4%B8%8B%E7%9A%84%E6%80%9D%E8%80%83%E5%92%8C%E6%96%B9%E6%A1%88/>Dubbo åœ¨ Service Mesh ä¸‹çš„æ€è€ƒå’Œæ–¹æ¡ˆ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20191102dubboe69c8de58aa1e7abafe5bc82e6ada5e68ea5e58fa3e79a84e5ae9ee78eb0e8838ce699afe5928ce5ae9ee8b7b5 href=/zh/blog/2019/11/02/dubbo%E6%9C%8D%E5%8A%A1%E7%AB%AF%E5%BC%82%E6%AD%A5%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%83%8C%E6%99%AF%E5%92%8C%E5%AE%9E%E8%B7%B5/>DubboæœåŠ¡ç«¯å¼‚æ­¥æ¥å£çš„å®ç°èƒŒæ™¯å’Œå®è·µ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20191101dubboe5aea2e688b7e7abafe5bc82e6ada5e68ea5e58fa3e79a84e5ae9ee78eb0e8838ce699afe5928ce5ae9ee8b7b5 href=/zh/blog/2019/11/01/dubbo%E5%AE%A2%E6%88%B7%E7%AB%AF%E5%BC%82%E6%AD%A5%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%AE%9E%E7%8E%B0%E8%83%8C%E6%99%AF%E5%92%8C%E5%AE%9E%E8%B7%B5/>Dubboå®¢æˆ·ç«¯å¼‚æ­¥æ¥å£çš„å®ç°èƒŒæ™¯å’Œå®è·µ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20191028dubbo-e59ca8e8b7a8e8afade8a880e5928ce58d8fe8aeaee7a9bfe9808fe680a7e696b9e59091e4b88ae79a84e68ea2e7b4a2e694afe68c81-http2-grpc-e5928c-protobuf href=/zh/blog/2019/10/28/dubbo-%E5%9C%A8%E8%B7%A8%E8%AF%AD%E8%A8%80%E5%92%8C%E5%8D%8F%E8%AE%AE%E7%A9%BF%E9%80%8F%E6%80%A7%E6%96%B9%E5%90%91%E4%B8%8A%E7%9A%84%E6%8E%A2%E7%B4%A2%E6%94%AF%E6%8C%81-http/2-grpc-%E5%92%8C-protobuf/>æ”¯æŒ HTTP/2 gRPC å’Œ Protobuf</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20191022e69cace59cb0e5ad98e6a0b9e5928ce69cace59cb0e4bcaae8a385 href=/zh/blog/2019/10/22/%E6%9C%AC%E5%9C%B0%E5%AD%98%E6%A0%B9%E5%92%8C%E6%9C%AC%E5%9C%B0%E4%BC%AA%E8%A3%85/>æœ¬åœ°å­˜æ ¹å’Œæœ¬åœ°ä¼ªè£…</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20191017dubbo-e4b8ade79a84-url-e7bb9fe4b880e6a8a1e59e8b href=/zh/blog/2019/10/17/dubbo-%E4%B8%AD%E7%9A%84-url-%E7%BB%9F%E4%B8%80%E6%A8%A1%E5%9E%8B/>Dubbo ä¸­çš„ URL ç»Ÿä¸€æ¨¡å‹</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20191001e7a094e7a9b6-dubbo-e7bd91e58da1e59cb0e59d80e6b3a8e5868ce697b6e79a84e4b880e782b9e6809de88083 href=/zh/blog/2019/10/01/%E7%A0%94%E7%A9%B6-dubbo-%E7%BD%91%E5%8D%A1%E5%9C%B0%E5%9D%80%E6%B3%A8%E5%86%8C%E6%97%B6%E7%9A%84%E4%B8%80%E7%82%B9%E6%80%9D%E8%80%83/>ç ”ç©¶ Dubbo ç½‘å¡åœ°å€æ³¨å†Œæ—¶çš„ä¸€ç‚¹æ€è€ƒ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190826service-test href=/zh/blog/2019/08/26/service-test/>Dubbo AdminæœåŠ¡æµ‹è¯•åŠŸèƒ½</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190811e4bdbfe794a8apache-skywalking-incubator-e5819ae58886e5b883e5bc8fe8b79fe8b8aa href=/zh/blog/2019/08/11/%E4%BD%BF%E7%94%A8apache-skywalking-incubator-%E5%81%9A%E5%88%86%E5%B8%83%E5%BC%8F%E8%B7%9F%E8%B8%AA/>ä½¿ç”¨Apache Skywalking (Incubator) åšåˆ†å¸ƒå¼è·Ÿè¸ª</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190811e69cace59cb0e8b083e794a8 href=/zh/blog/2019/08/11/%E6%9C%AC%E5%9C%B0%E8%B0%83%E7%94%A8/>æœ¬åœ°è°ƒç”¨</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190726e59ca8-dubbo-e4b8ade4bdbfe794a8-rest href=/zh/blog/2019/07/26/%E5%9C%A8-dubbo-%E4%B8%AD%E4%BD%BF%E7%94%A8-rest/>åœ¨ Dubbo ä¸­ä½¿ç”¨ REST</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190622e4bdbfe794a8-dubbo-e8bf9ee68ea5e5bc82e69e84e5beaee69c8de58aa1e4bd93e7b3bb href=/zh/blog/2019/06/22/%E4%BD%BF%E7%94%A8-dubbo-%E8%BF%9E%E6%8E%A5%E5%BC%82%E6%9E%84%E5%BE%AE%E6%9C%8D%E5%8A%A1%E4%BD%93%E7%B3%BB/>ä½¿ç”¨ Dubbo è¿æ¥å¼‚æ„å¾®æœåŠ¡ä½“ç³»</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190502dubboe58fafe689a9e5b195e69cbae588b6e6ba90e7a081e8a7a3e69e90 href=/zh/blog/2019/05/02/dubbo%E5%8F%AF%E6%89%A9%E5%B1%95%E6%9C%BA%E5%88%B6%E6%BA%90%E7%A0%81%E8%A7%A3%E6%9E%90/>Dubboå¯æ‰©å±•æœºåˆ¶æºç è§£æ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190501dubbo-e4b880e887b4e680a7hashe8b49fe8bdbde59d87e8a1a1e5ae9ee78eb0e58996e69e90 href=/zh/blog/2019/05/01/dubbo-%E4%B8%80%E8%87%B4%E6%80%A7hash%E8%B4%9F%E8%BD%BD%E5%9D%87%E8%A1%A1%E5%AE%9E%E7%8E%B0%E5%89%96%E6%9E%90/>Dubbo ä¸€è‡´æ€§Hashè´Ÿè½½å‡è¡¡å®ç°å‰–æ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190425dubboe58fafe689a9e5b195e69cbae588b6e5ae9ee68898 href=/zh/blog/2019/04/25/dubbo%E5%8F%AF%E6%89%A9%E5%B1%95%E6%9C%BA%E5%88%B6%E5%AE%9E%E6%88%98/>Dubboå¯æ‰©å±•æœºåˆ¶å®æˆ˜</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190203e68f90e5898dife588a4e696ade5b8aee58aa9cpue58886e694afe9a284e6b58b href=/zh/blog/2019/02/03/%E6%8F%90%E5%89%8Dif%E5%88%A4%E6%96%AD%E5%B8%AE%E5%8A%A9cpu%E5%88%86%E6%94%AF%E9%A2%84%E6%B5%8B/>æå‰ifåˆ¤æ–­å¸®åŠ©CPUåˆ†æ”¯é¢„æµ‹</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190202e5bd93dubboe98187e4b88aarthase68e92e69fa5e997aee9a298e79a84e5ae9ee8b7b5 href=/zh/blog/2019/02/02/%E5%BD%93dubbo%E9%81%87%E4%B8%8Aarthas%E6%8E%92%E6%9F%A5%E9%97%AE%E9%A2%98%E7%9A%84%E5%AE%9E%E8%B7%B5/>å½“Dubboé‡ä¸ŠArthasï¼šæ’æŸ¥é—®é¢˜çš„å®è·µ</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190126e98187e8a781dubbo href=/zh/blog/2019/01/26/%E9%81%87%E8%A7%81dubbo/>é‡è§Dubbo</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190117e5a682e4bd95e4bdbfe794a8seatae4bf9de8af81dubboe5beaee69c8de58aa1e997b4e79a84e4b880e887b4e680a7 href=/zh/blog/2019/01/17/%E5%A6%82%E4%BD%95%E4%BD%BF%E7%94%A8seata%E4%BF%9D%E8%AF%81dubbo%E5%BE%AE%E6%9C%8D%E5%8A%A1%E9%97%B4%E7%9A%84%E4%B8%80%E8%87%B4%E6%80%A7/>å¦‚ä½•ä½¿ç”¨Seataä¿è¯Dubboå¾®æœåŠ¡é—´çš„ä¸€è‡´æ€§</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20190107e696b0e78988-dubbo-admin-e4bb8be7bb8d href=/zh/blog/2019/01/07/%E6%96%B0%E7%89%88-dubbo-admin-%E4%BB%8B%E7%BB%8D/>æ–°ç‰ˆ Dubbo Admin ä»‹ç»</a></li></ul></ul><ul class="td-sidebar-nav__section pr-md-3"><li class=td-sidebar-nav__section-title><a href=/zh/blog/releases/ class="align-left pl-0 pr-2 collapsed td-sidebar-link td-sidebar-link__section">ç‰ˆæœ¬å‘å¸ƒ</a></li><ul><li class=collapse id=zhblogreleases><a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-go-150 href=/zh/blog/2021/01/14/dubbo-go-1.5.0/>dubbo-go 1.5.0</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-go-151 href=/zh/blog/2021/01/14/dubbo-go-1.5.1/>dubbo-go 1.5.1</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-go-hessian2-v160 href=/zh/blog/2021/01/14/dubbo-go-hessian2-v1.6.0/>dubbo-go-hessian2 v1.6.0</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210114dubbo-go-hessian2-v170 href=/zh/blog/2021/01/14/dubbo-go-hessian2-v1.7.0/>dubbo-go-hessian2 v1.7.0</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20210112dubbo-go-140 href=/zh/blog/2021/01/12/dubbo-go-1.4.0/>dubbo-go 1.4.0</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20200518275-e58a9fe883bde8a7a3e69e90 href=/zh/blog/2020/05/18/2.7.5-%E5%8A%9F%E8%83%BD%E8%A7%A3%E6%9E%90/>2.7.5</a>
<a class="td-sidebar-link td-sidebar-link__page" id=m-zhblog20200518e8bf87e5be80e78988e69cac href=/zh/blog/2020/05/18/%E8%BF%87%E5%BE%80%E7%89%88%E6%9C%AC/>è¿‡å¾€ç‰ˆæœ¬</a></li></ul></ul></li></ul></ul></nav></div></div><div class="d-none d-xl-block col-xl-2 td-toc d-print-none"><div class="td-page-meta ml-2 pb-1 pt-2 mb-0"><a href=https://github.com/apache/dubbo-website/edit/master/content/zh/blog/news/dubbo-go-getty.md target=_blank><i class="fa fa-edit fa-fw"></i>ç¼–è¾‘æ­¤é¡µ</a>
<a href="https://github.com/apache/dubbo-website/new/master/content/zh/blog/news/dubbo-go-getty.md?filename=change-me.md&value=---%0Atitle%3A+%22Long+Page+Title%22%0AlinkTitle%3A+%22Short+Nav+Title%22%0Aweight%3A+100%0Adescription%3A+%3E-%0A+++++Page+description+for+heading+and+indexes.%0A---%0A%0A%23%23+Heading%0A%0AEdit+this+template+to+create+your+new+page.%0A%0A%2A+Give+it+a+good+name%2C+ending+in+%60.md%60+-+e.g.+%60getting-started.md%60%0A%2A+Edit+the+%22front+matter%22+section+at+the+top+of+the+page+%28weight+controls+how+its+ordered+amongst+other+pages+in+the+same+directory%3B+lowest+number+first%29.%0A%2A+Add+a+good+commit+message+at+the+bottom+of+the+page+%28%3C80+characters%3B+use+the+extended+description+field+for+more+detail%29.%0A%2A+Create+a+new+branch+so+you+can+preview+your+new+file+and+request+a+review+via+Pull+Request.%0A" target=_blank><i class="fa fa-edit fa-fw"></i>æ·»åŠ å­é¡µé¢</a>
<a href="https://github.com/apache/dubbo-website/issues/new?title=Dubbo%20Go%20Getty%20%e5%bc%80%e5%8f%91%e6%97%a5%e5%bf%97" target=_blank><i class="fab fa-github fa-fw"></i>æäº¤æ–‡æ¡£é—®é¢˜</a>
<a href=https://github.com/apache/dubbo/issues/new target=_blank><i class="fas fa-tasks fa-fw"></i>æäº¤é¡¹ç›®é—®é¢˜</a></div><nav id=TableOfContents><ul><li><ul><li><a href=#0-è¯´æ˜>0 è¯´æ˜</a></li><li><a href=#1-udp-connection>1 UDP connection</a></li><li><a href=#2-compression>2 Compression</a></li><li><a href=#a-name33-unix-socketa><a name=3>3 unix socket</a></a></li><li><a href=#a-name44-goroutine-poola><a name=4>4 Goroutine Pool</a></a></li><li><a href=#a-name4141-å›ºå®šå¤§å°-gr-poola><a name=4.1>4.1 å›ºå®šå¤§å° Gr Pool</a></a></li></ul></li><li><a href=#æ€»ç»“>æ€»ç»“</a></li><li><a href=#å‚è€ƒæ–‡æ¡£>å‚è€ƒæ–‡æ¡£</a></li></ul></nav></div><main class="col-12 col-md-9 col-xl-8 pl-md-5 pr-md-4" role=main><a class="btn btn-lg -bg-orange td-rss-button d-none d-lg-block" href=http://dubbo.apache.org/zh/blog/news/index.xml target=_blank>RSS <i class="fa fa-rss ml-2"></i></a><div class=td-content><h1>Dubbo Go Getty å¼€å‘æ—¥å¿—</h1><div class=lead>æœ¬æ–‡è®°å½•äº†äºé›¨å¼€å‘ dubbo-go ç½‘ç»œåº“ getty çš„å†ç¨‹</div><div class="td-byline mb-4"><time datetime=2021-01-11 class=text-muted>Monday, January 11, 2021</time></div><h3 id=0-è¯´æ˜>0 è¯´æ˜</h3><p><a href=https://github.com/alexstocks/getty>getty</a>æ˜¯ä¸€ä¸ªgoè¯­è¨€å®ç°çš„ç½‘ç»œå±‚å¼•æ“ï¼Œå¯ä»¥å¤„ç†TCP/UDP/websocketä¸‰ç§ç½‘ç»œåè®®ã€‚</p><p>2016å¹´6æœˆæˆ‘åœ¨ä¸Šæµ·åšä¸€ä¸ªå³æ—¶é€šè®¯é¡¹ç›®æ—¶ï¼Œæ¥å£å±‚çš„åº•å±‚ç½‘ç»œé©±åŠ¨æ˜¯å½“æ—¶çš„åŒäº‹<a href=https://github.com/sanbit>sanbit</a>å†™çš„ï¼ŒåŸå§‹ç½‘ç»œå±‚å®ç°äº†TCP
Serverï¼Œå…¶å‘½åè§„èŒƒå­¦ä¹ äº†è‘—åçš„nettyã€‚å½“æ—¶è¿™ä¸ªå¼•æ“æ¯”è¾ƒç®€æ´ï¼Œéšç€æˆ‘å¯¹è¿™ä¸ªé¡¹ç›®çš„æ”¹è¿›è¿™ä¸ªç½‘ç»œå±‚å¼•æ“ä¹Ÿå°±éšä¹‹è¿›åŒ–äº†ï¼ˆæ·»åŠ äº†TCP Clientã€æŠ½è±¡å‡ºäº† TCP connection å’Œ TCP
sessionï¼‰ï¼Œè‡³2016å¹´8æœˆä»½ï¼ˆåˆæ·»åŠ äº†websocketï¼‰å…¶ä¸åŸå§‹å®ç°å·²ç»å¤§å¼‚å…¶è¶£äº†ï¼Œå¾å¾—åŸä½œè€…å’Œç›¸å…³é¢†å¯¼åŒæ„åå°±æ”¾åˆ°äº†githubä¸Šã€‚</p><p>å°†è¿‘ä¸¤å¹´çš„æ—¶é—´æˆ‘ä¸é—´æ–­åœ°å¯¹å…¶è¿›è¡Œæ”¹è¿›ï¼Œå¹´é½¿æ¸å¢ä½†è®°å¿†é€Ÿè¡°ï¼Œè§‰å¾—æœ‰å¿…è¦è®°å½•ä¸‹ä¸€äº›å¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„é—®é¢˜ä»¥åŠè§£å†³æ–¹æ³•ï¼Œä»¥å¤‡å°†æ¥å›å¿†ä¹‹å‚è€ƒã€‚</p><h3 id=1-udp-connection>1 UDP connection</h3><p>2018å¹´3æœˆ5æ—¥ èµ·ç»™ getty æ·»åŠ äº†UDPæ”¯æŒã€‚</p><h4 id=11-udp-connect>1.1 UDP connect</h4><p>UDPè‡ªèº«åˆ†ä¸ºunconnected UDPå’Œconnected UDPä¸¤ç§ï¼Œconnected UDPçš„åº•å±‚åŸç†è§ä¸‹å›¾ã€‚</p><p><img src=/imgs/blog/dubbo-go/connected_udp_socket.gif alt></p><p>å½“ä¸€ç«¯çš„UDP endpointè°ƒç”¨connectä¹‹åï¼Œoså°±ä¼šåœ¨å†…éƒ¨çš„routing tableä¸ŠæŠŠudp socketå’Œå¦ä¸€ä¸ªendpointçš„åœ°å€å…³è”èµ·æ¥ï¼Œåœ¨å‘èµ·connectçš„udp
endpointç«¯å»ºç«‹èµ·ä¸€ä¸ªå•å‘çš„è¿æ¥å››å…ƒç»„ï¼šå‘å‡ºçš„datagram packetåªèƒ½å‘å¾€è¿™ä¸ªendpointï¼ˆä¸ç®¡sendtoçš„æ—¶å€™æ˜¯å¦æŒ‡å®šäº†åœ°å€ï¼‰ä¸”åªèƒ½æ¥æ”¶è¿™ä¸ªendpointå‘æ¥çš„udp datagram
packetï¼ˆå¦‚å›¾???å‘æ¥çš„åŒ…ä¼šè¢«OSä¸¢å¼ƒï¼‰ã€‚</p><p>UDP endpointå‘èµ·connectåï¼ŒOSå¹¶ä¸ä¼šè¿›è¡ŒTCPå¼çš„ä¸‰æ¬¡æ¡æ‰‹ï¼Œæ“ä½œç³»ç»Ÿå…±ä»…ä»…è®°å½•ä¸‹UDP socketçš„peer udp endpoint åœ°å€åå°±ç†è§£è¿”å›ï¼Œä»…ä»…ä¼šæ ¸æŸ¥å¯¹ç«¯åœ°å€æ˜¯å¦å­˜åœ¨ç½‘ç»œä¸­ã€‚</p><p>è‡³äºå¦ä¸€ä¸ªudp endpointæ˜¯å¦ä¸ºconnected udpåˆ™æ— å…³ç´§è¦ï¼Œæ‰€ä»¥ç§°udp connectionæ˜¯å•å‘çš„è¿æ¥ã€‚å¦‚æœconnectçš„å¯¹ç«¯ä¸å­˜åœ¨æˆ–è€…å¯¹ç«¯ç«¯å£æ²¡æœ‰è¿›ç¨‹ç›‘å¬ï¼Œåˆ™å‘åŒ…åå¯¹ç«¯ä¼šè¿”å›ICMP â€œport
unreachableâ€ é”™è¯¯ã€‚</p><p>å¦‚æœä¸€ä¸ªPOSIXç³»ç»Ÿçš„è¿›ç¨‹å‘èµ·UDP writeæ—¶æ²¡æœ‰æŒ‡å®špeer UDP addressï¼Œåˆ™ä¼šæ”¶åˆ°ENOTCONNé”™è¯¯ï¼Œè€ŒéEDESTADDRREQã€‚</p><p><img src=/imgs/blog/dubbo-go/dns_udp.gif alt></p><p>ä¸€èˆ¬å‘èµ·connectçš„ä¸º UDP clientï¼Œå…¸å‹çš„åœºæ™¯æ˜¯DNSç³»ç»Ÿï¼ŒDNS clientæ ¹æ®/etc/resolv.confé‡Œé¢æŒ‡å®šçš„DNS serverè¿›è¡ŒconnectåŠ¨ä½œã€‚</p><p>è‡³äº UDP server å‘èµ·connectçš„æƒ…å½¢æœ‰ TFTPï¼ŒUDP client å’Œ UDP server éœ€è¦è¿›è¡Œé•¿æ—¶é—´çš„é€šä¿¡ï¼Œ client å’Œ server éƒ½éœ€è¦è°ƒç”¨ connect æˆä¸º connected UDPã€‚</p><p>å¦‚æœä¸€ä¸ª connected UDP éœ€è¦æ›´æ¢ peer endpoint addressï¼Œåªéœ€è¦é‡æ–° connect å³å¯ã€‚</p><h4 id=12-connected-udp-çš„æ€§èƒ½>1.2 connected UDP çš„æ€§èƒ½</h4><p>connected UDP çš„ä¼˜åŠ¿è¯¦è§å‚è€ƒæ–‡æ¡£1ã€‚å‡è®¾æœ‰ä¸¤ä¸ª datagram éœ€è¦å‘é€ï¼Œunconnected UDP çš„è¿›è¡Œ write æ—¶å‘é€è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>Connect the socket</li><li>Output the first datagram</li><li>Unconnect the socket</li><li>Connect the socket</li><li>Output the second datagram</li><li>Unconnect the socket</li></ul><p>æ¯å‘é€ä¸€ä¸ªåŒ…éƒ½éœ€è¦è¿›è¡Œ connectï¼Œæ“ä½œç³»ç»Ÿåˆ° routine table cache ä¸­åˆ¤æ–­æœ¬æ¬¡ç›®çš„åœ°åœ°å€æ˜¯å¦ä¸ä¸Šæ¬¡ä¸€è‡´ï¼Œå¦‚æœä¸ä¸€è‡´è¿˜éœ€è¦ä¿®æ”¹ routine tableã€‚</p><p>connected UDP çš„ä¸¤æ¬¡å‘é€è¿‡ç¨‹å¦‚ä¸‹ï¼š</p><ul><li>Connect the socket</li><li>Output first datagram</li><li>Output second datagram</li></ul><p>è¿™ä¸ª case ä¸‹ï¼Œå†…æ ¸åªåœ¨ç¬¬ä¸€æ¬¡è®¾å®šä¸‹è™šæ‹Ÿé“¾æ¥çš„ peer addressï¼Œåé¢è¿›è¡Œè¿ç»­å‘é€å³å¯ã€‚æ‰€ä»¥ connected UDP çš„å‘é€è¿‡ç¨‹å‡å°‘äº† 1/3 çš„ç­‰å¾…æ—¶é—´ã€‚</p><p>2017å¹´5æœˆ7æ—¥ æˆ‘æ›¾ç”¨ <a href=https://github.com/alexStocks/python-practice/blob/master/tcp_udp_http_ws/udp/client.py>python ç¨‹åº</a>
å¯¹äºŒè€…ä¹‹é—´çš„æ€§èƒ½åšè¿‡æµ‹è¯•ï¼Œå¦‚æœ client å’Œ server éƒ½éƒ¨ç½²åœ¨æœ¬æœºï¼Œæµ‹è¯•ç»“æœæ˜¾ç¤ºå‘é€ 100 000 é‡çš„ UDP datagram packet æ—¶ï¼Œconnected UDP æ¯” unconnected UDP å°‘ç”¨äº† 2
/ 13 çš„æ—¶é—´ã€‚</p><p>è¿™ä¸ªæµ‹è¯•çš„å¦ä¸€ä¸ªç»“è®ºæ˜¯ï¼šä¸ç®¡æ˜¯ connected UDP è¿˜æ˜¯ unconnected UDPï¼Œå¦‚æœå¯ç”¨äº† SetTimeoutï¼Œåˆ™ä¼šå¢å¤§å‘é€å»¶è¿Ÿã€‚</p><h4 id=13-go-udp>1.3 Go UDP</h4><p>Go è¯­è¨€ UDP ç¼–ç¨‹ä¹Ÿå¯¹ connected UDP å’Œ unconnected UDP è¿›è¡Œäº†æ˜ç¡®åŒºåˆ†ï¼Œå‚è€ƒæ–‡æ¡£2 è¯¦ç»†åœ°åˆ—æ˜äº†å¦‚ä½•ä½¿ç”¨ç›¸å…³
APIï¼Œæ ¹æ®è¿™ç¯‡æ–‡æ¡£ä¸ªäººä¹Ÿå†™ä¸€ä¸ª <a href=https://github.com/alexstocks/go-practice/blob/master/udp-tcp-http/udp/connected-udp.go>ç¨‹åº</a> æµ‹è¯•è¿™äº›
APIï¼Œæµ‹è¯•ç»“è®ºå¦‚ä¸‹ï¼š</p><ul><li>connected UDP è¯»å†™æ–¹æ³•æ˜¯ Read å’Œ Writeï¼›</li><li>unconnected UDP è¯»å†™æ–¹æ³•æ˜¯ ReadFromUDP å’Œ WriteToUDPï¼ˆä»¥åŠ ReadFrom å’Œ WriteTo)ï¼›</li><li>unconnected UDP å¯ä»¥è°ƒç”¨ Readï¼Œåªæ˜¯æ— æ³•è·å– peer addrï¼›</li><li>connected UDP å¯ä»¥è°ƒç”¨ ReadFromUDPï¼ˆå¡«å†™çš„åœ°å€ä¼šè¢«å¿½ç•¥ï¼‰</li><li>connected UDP ä¸èƒ½è°ƒç”¨ WriteToUDPï¼Œâ€å³ä½¿æ˜¯ç›¸åŒçš„ç›®æ ‡åœ°å€ä¹Ÿä¸å¯ä»¥â€ï¼Œå¦åˆ™ä¼šå¾—åˆ°é”™è¯¯ â€œuse of WriteTo with pre-connected connectionâ€ï¼›</li><li>unconnected UDP ä¸èƒ½è°ƒç”¨ Write, â€œå› ä¸ºä¸çŸ¥é“ç›®æ ‡åœ°å€â€, error:â€write: destination address requiredsmallnestMBP:udp smallnestâ€ï¼›</li><li>connected UDP å¯ä»¥è°ƒç”¨ WriteMsgUDPï¼Œä½†æ˜¯åœ°å€å¿…é¡»ä¸º nilï¼›</li><li>unconnected UDP å¯ä»¥è°ƒç”¨ WriteMsgUDPï¼Œä½†æ˜¯å¿…é¡»å¡«å†™ peer endpoint addressã€‚</li></ul><p>ç»¼ä¸Šç»“è®ºï¼Œè¯»ç»Ÿä¸€ä½¿ç”¨ ReadFromUDPï¼Œå†™åˆ™ç»Ÿä¸€ä½¿ç”¨ WriteMsgUDPã€‚</p><h4 id=14-getty-udp>1.4 Getty UDP</h4><p>ç‰ˆæœ¬ v0.8.1 Getty ä¸­æ·»åŠ  connected UDP æ”¯æŒæ—¶ï¼Œå…¶è¿æ¥å‡½æ•° <a href=https://github.com/alexstocks/getty/blob/master/client.go#L141>dialUDP</a>
è¿™æ˜¯ç®€å•è°ƒç”¨äº† net.DialUDP å‡½æ•°ï¼Œå¯¼è‡´æ˜¨æ—¥ï¼ˆ20180318 22:19 pmï¼‰æµ‹è¯•çš„æ—¶å€™é‡åˆ°ä¸€ä¸ªæ€ªç°è±¡ï¼šæŠŠ peer UDP endpoint å…³é—­ï¼Œlocal udp endpoint è¿›è¡Œ connect æ—¶
net.DialUDP å‡½æ•°è¿”å›æˆåŠŸï¼Œç„¶å lsof å‘½ä»¤æŸ¥éªŒç»“æœæ—¶çœ‹åˆ°ç¡®å®å­˜åœ¨è¿™ä¸ªå•é“¾æ¥ï¼š</p><pre><code>COMMAND     PID USER   FD   TYPE             DEVICE SIZE/OFF NODE NAME
echo_clie 31729 alex    9u  IPv4 0xa5d288135c97569d      0t0  UDP localhost:63410-&gt;localhost:10000
</code></pre><p>ç„¶åå½“ net.UDPConn è¿›è¡Œ read åŠ¨ä½œçš„æ—¶å€™ï¼Œä¼šå¾—åˆ°é”™è¯¯ â€œread: connection refusedâ€ã€‚</p><p>äºæ˜¯æ¨¡ä»¿Cè¯­è¨€ä¸­å¯¹ TCP client connect æˆåŠŸä¸å¦åˆ¤æ–­æ–¹æ³•ï¼Œå¯¹ <a href=https://github.com/alexstocks/getty/blob/master/client.go#L141>dialUDP</a> æ”¹è¿›å¦‚ä¸‹ï¼š</p><ul><li>net.DialUDP æˆåŠŸä¹‹åï¼Œåˆ¤æ–­å…¶æ˜¯å¦æ˜¯è‡ªè¿æ¥ï¼Œæ˜¯åˆ™é€€å‡ºï¼›</li><li>connected UDP å‘å¯¹ç«¯å‘é€ä¸€ä¸ªæ— ç”¨çš„ datagram packetã€â€pingâ€å­—ç¬¦ä¸²ï¼Œå¯¹ç«¯ä¼šå› å…¶éæ­£ç¡® datagram è€Œä¸¢å¼ƒã€‘ï¼Œå¤±è´¥åˆ™é€€å‡ºï¼›</li><li>connected UDP å‘èµ·è¯»æ“ä½œï¼Œå¦‚æœå¯¹ç«¯è¿”å› â€œread: connection refusedâ€ åˆ™é€€å‡ºï¼Œå¦åˆ™å°±åˆ¤æ–­ä¸º connect æˆåŠŸã€‚</li></ul><h3 id=2-compression>2 Compression</h3><p>å»å¹´ç»™ getty æ·»åŠ äº† TCP/Websocket compression æ”¯æŒï¼ŒWebsocket
åº“ä½¿ç”¨çš„æ˜¯ <a href=https://github.com/gorilla/websocket/>gorilla/websocket</a>ï¼Œ<a href=https://godoc.org/golang.org/x/net/websocket>Go
å®˜ç½‘</a>ä¹Ÿæ¨èè¿™ä¸ªåº“ï¼Œå› ä¸ºè‡ª <code>This package("golang.org/x/net/websocket") currently lacks some features</code>
ã€‚</p><h4 id=21-tcp-compression>2.1 TCP compression</h4><p>æœ€è¿‘åœ¨å¯¹ Websocket compression è¿›è¡Œæµ‹è¯•çš„æ—¶å€™ï¼Œå‘ç° CPU å¾ˆå®¹æ˜“å°±è·‘åˆ° 100%ï¼Œä¸”ç¨‹åºå¯åŠ¨åå¾ˆå¿«å°± panic é€€å‡ºäº†ã€‚</p><p>æ ¹æ® panic ä¿¡æ¯æç¤ºæŸ¥åˆ° <a href=https://github.com/gorilla/websocket/blob/master/conn.go#L1018>gorilla/websocket/conn.go:ReadMsg</a>
å‡½æ•°è°ƒç”¨ <a href=https://github.com/gorilla/websocket/blob/master/conn.go#L928>gorilla/websocket/conn.go:NextReader</a> åå°±ç«‹å³ panic
é€€å‡ºäº†ã€‚panic çš„ <code>è¡¨å±‚åŸå› </code> åˆ°æ˜¯å¾ˆå®¹æ˜“æŸ¥æ˜ï¼š</p><ul><li><a href=https://github.com/gorilla/websocket/blob/master/conn.go#L768>gorrilla/websocket:Conn::advanceFrame</a> é‡åˆ°è¯»è¶…æ—¶é”™è¯¯ï¼ˆio
timeoutï¼‰;</li><li><a href=https://github.com/gorilla/websocket/blob/master/conn.go#L941>gorrilla/websocket:ConnConn.readErr</a>è®°å½•è¿™ä¸ªerrorï¼›</li><li><a href=https://github.com/gorilla/websocket/blob/master/conn.go#L959>gorilla/websocket/conn.go:Conn::NextReader</a>å¼€å§‹è¯»å–ä¹‹å‰åˆ™<a href=https://github.com/gorilla/websocket/blob/master/conn.go#L938>æ£€æŸ¥è¿™ä¸ªé”™è¯¯</a>ï¼Œå¦‚ä»¥å‰å‘ç”Ÿè¿‡é”™è¯¯åˆ™ä¸å†è¯»å–
websocket
frameï¼Œå¹¶å¯¹<a href=https://github.com/gorilla/websocket/blob/master/conn.go#L957>gorrilla/websocket:ConnConn.readErrç´¯ç§¯è®¡æ•°</a>ï¼›</li><li><a href=https://github.com/gorilla/websocket/blob/master/conn.go#L958>å½“gorrilla/websocket:ConnConn.readErræ•°å€¼å¤§äº 1000</a>
çš„æ—¶å€™ï¼Œç¨‹åºå°±ä¼španic é€€å‡ºã€‚</li></ul><p>ä½†æ˜¯ä¸ºä½•å‘ç”Ÿè¯»è¶…æ—¶é”™è¯¯åˆ™æ¯«æ— å¤´ç»ªã€‚</p><p>2018/03/07 æ—¥æµ‹è¯• TCP compression çš„æ—¶å€™å‘ç°å¯åŠ¨ compression åï¼Œç¨‹åº CPU ä¹Ÿä¼šå¾ˆå¿«è·‘åˆ°
100%ï¼Œè¿›ä¸€æ­¥è¿½æŸ¥åå‘ç°å‡½æ•° <a href=https://github.com/alexstocks/getty/blob/master/conn.go#L228>getty/conn.go:gettyTCPConn::read</a> é‡Œé¢çš„ log
æœ‰å¾ˆå¤š â€œio timeoutâ€ errorã€‚å½“æ—¶æŸ¥åˆ°è¿™ä¸ªé”™è¯¯å¾ˆç–‘æƒ‘ï¼Œå› ä¸ºæˆ‘å·²ç»åœ¨ TCP read ä¹‹å‰è¿›è¡Œäº†è¶…æ—¶è®¾ç½®ã€SetReadDeadlineã€‘ï¼Œéš¾é“å¯åŠ¨ compression
ä¼šå¯¼è‡´è¶…æ—¶è®¾ç½®å¤±æ•ˆä½¿å¾—socketæˆäº†éé˜»å¡çš„socketï¼Ÿ</p><p>äºæ˜¯åœ¨ <a href=https://github.com/alexstocks/getty/blob/master/conn.go#L228>getty/conn.go:gettyTCPConn::read</a> ä¸­æ·»åŠ äº†ä¸€ä¸ªé€»è¾‘ï¼šå¯ç”¨ TCP
compression çš„æ—¶ä¸å†è®¾ç½®è¶…æ—¶æ—¶é—´ã€é»˜è®¤æƒ…å†µä¸‹tcp connectionæ˜¯æ°¸ä¹…é˜»å¡çš„ã€‘ï¼ŒCPU 100% çš„é—®é¢˜å¾ˆå¿«å°±å¾—åˆ°äº†è§£å†³ã€‚</p><p>è‡³äºä¸ºä½• <code>å¯ç”¨ TCP compression ä¼šå¯¼è‡´ SetDeadline å¤±æ•ˆä½¿å¾—socketæˆäº†éé˜»å¡çš„socket</code>ï¼Œå›¿äºä¸ªäººèƒ½åŠ›å’Œç²¾åŠ›ï¼Œå¾…å°†æ¥è¿½æŸ¥å‡ºç»“æœåå†åœ¨æ­¤è¡¥å……ä¹‹ã€‚</p><h4 id=22-websocket-compression>2.2 Websocket compression</h4><p>TCP compression çš„é—®é¢˜è§£å†³åï¼Œä¸ªäººçŒœæƒ³ Websocket compression
ç¨‹åºé‡åˆ°çš„é—®é¢˜æˆ–è®¸ä¹Ÿè·Ÿ <code>å¯ç”¨ TCP compression ä¼šå¯¼è‡´ SetDeadline å¤±æ•ˆä½¿å¾—socketæˆäº†éé˜»å¡çš„socket</code> æœ‰å…³ã€‚</p><p>äºæ˜¯å€Ÿé‰´ TCP çš„è§£å†³æ–¹æ³•ï¼Œåœ¨ <a href=https://github.com/alexstocks/getty/blob/master/conn.go#L527>getty/conn.go:gettyWSConn::read</a>
ç›´æ¥æŠŠè¶…æ—¶è®¾ç½®å…³é—­ï¼Œç„¶å CPU 100% è¢«è§£å†³ï¼Œä¸”ç¨‹åºè¿è½¬æ­£å¸¸ã€‚</p><h3 id=a-name33-unix-socketa><a name=3>3 unix socket</a></h3><p>æœ¬èŠ‚ä¸ getty æ— å…³ï¼Œä»…ä»…æ˜¯åœ¨ä½¿ç”¨ unix socket è¿‡ç¨‹ä¸­é‡åˆ°ä¸€äº› keypoint çš„è®°å½•ã€‚</p><h4 id=31-reliable>3.1 reliable</h4><p>unix socket datagram å½¢å¼çš„åŒ…ä¹Ÿæ˜¯å¯é çš„ï¼Œæ¯æ¬¡å†™å¿…ç„¶è¦æ±‚å¯¹åº”ä¸€æ¬¡è¯»ï¼Œå¦åˆ™å†™æ–¹ä¼šè¢«é˜»å¡ã€‚å¦‚æœæ˜¯ stream å½¢å¼ï¼Œåˆ™ buffer æ²¡æœ‰æ»¡ä¹‹å‰ï¼Œå†™è€…æ˜¯ä¸ä¼šè¢«é˜»å¡çš„ã€‚datagram çš„ä¼˜åŠ¿åœ¨äº api ç®€å•ã€‚</p><blockquote><p>Unix sockets are reliable. If the reader doesn&rsquo;t read, the writer blocks. If the socket is a datagram socket, each write is paired with a read. If the socket is a stream socket, the kernel may buffer some bytes between the writer and the reader, but when the buffer is full, the writer will block. Data is never discarded, except for buffered data if the reader closes the connection before reading the buffer. &mdash;<a href=https://unix.stackexchange.com/questions/283323/do-unix-domain-sockets-overflow>Do UNIX Domain Sockets Overflow?</a></p></blockquote><blockquote><p>On most UNIX implementations, UNIX domain datagram sockets are always reliable and don&rsquo;t reorder datagrams. &mdash;<a href=http://www.man7.org/linux/man-pages/man7/unix.7.html>man 7 socketpair</a></p></blockquote><h4 id=32--buffer-size>3.2 buffer size</h4><p>datagram å½¢å¼çš„ unix socket çš„å•ä¸ª datagram åŒ…æœ€å¤§é•¿åº¦æ˜¯ 130688 Bã€‚</p><blockquote><p>AF_UNIX SOCK_DATAGRAM/SOCK_SEQPACKET datagrams need contiguous memory. Contiguous physical memory is hard to find, and the allocation fails. The max size actually is 130688 B. &mdash; <a href=https://stackoverflow.com/questions/4729315/what-is-the-max-size-of-af-unix-datagram-message-that-can-be-sent-in-linux>the max size of AF_UNIX datagram message that can be sent in linux</a></p></blockquote><blockquote><p>It looks like AF_UNIX sockets don&rsquo;t support scatter/gather on current Linux. it is a fixed size 130688 B. &mdash; <a href=https://stackoverflow.com/questions/13953912/difference-between-unix-domain-stream-and-datagram-sockets>Difference between UNIX domain STREAM and DATAGRAM sockets?</a></p></blockquote><h3 id=a-name44-goroutine-poola><a name=4>4 Goroutine Pool</a></h3><p>éšç€ <a href=https://github.com/dubbogo/getty>dubbogo/getty</a> è¢« <a href=https://github.com/apache/dubbo-go/>apache/dubbo-go</a> ç”¨ä½œåº•å±‚ tcp çš„ transport å¼•æ“ï¼Œå¤„äºæé«˜ç³»ç»Ÿååçš„éœ€è¦ï¼Œ<a href=https://github.com/dubbogo/getty>dubbogo/getty</a> é¢ä¸´ç€ä¸‹ä¸€æ­¥çš„è¿›åŒ–è¦æ±‚ï¼š<a href=https://www.oschina.net/question/3820517_2306822><strong>é’ˆå¯¹
dubbo-go å’Œ Getty çš„ç½‘ç»œ I/O ä¸çº¿ç¨‹æ´¾å‘è¿™ä¸€éƒ¨åˆ†è¿›è¡Œè¿›ä¸€æ­¥ä¼˜åŒ–</strong></a>ã€‚å…¶ä¸­çš„å…³é”®å°±æ˜¯æ·»åŠ  Goroutine Poolã€ä¸‹æ–‡ç®€ç§° gr poolã€‘ï¼Œä»¥åˆ†ç¦»ç½‘ç»œ I/O å’Œ é€»è¾‘å¤„ç†ã€‚</p><p>Gr Pool æˆå‘˜æœ‰ä»»åŠ¡é˜Ÿåˆ—ã€å…¶æ•°ç›®ä¸º Mã€‘å’Œ Gr æ•°ç»„ã€å…¶æ•°ç›®ä¸º Nã€‘ä»¥åŠä»»åŠ¡ã€æˆ–è€…ç§°ä¹‹ä¸ºæ¶ˆæ¯ã€‘ï¼Œæ ¹æ® N çš„æ•°ç›®å˜åŒ–å…¶ç±»å‹åˆ†ä¸ºå¯ä¼¸ç¼©ä¸å›ºå®šå¤§å°ï¼Œå¯ä¼¸ç¼© Gr Pool å¥½å¤„æ˜¯å¯ä»¥éšç€ä»»åŠ¡æ•°ç›®å˜åŒ–å¢å‡ N ä»¥èŠ‚çº¦ CPU
å’Œå†…å­˜èµ„æºï¼Œä½†ä¸€èˆ¬ä¸ç”šå¸¸ç”¨ï¼Œæ¯”äººä»¥å‰æ’¸è¿‡ä¸€ä¸ªåå°±èººåœ¨æˆ‘çš„ <a href=https://github.com/alexstocks/goext/blob/master/sync/pool/worker_pool.go>github repo</a> é‡Œé¢äº†ã€‚</p><p><a href=https://github.com/dubbogo/getty>dubbogo/getty</a> åªå…³æ³¨ N å€¼å›ºå®šå¤§å°çš„ gr poolï¼Œä¸”ä¸è€ƒè™‘æ”¶åˆ°åŒ…åçš„å¤„ç†é¡ºåºã€‚è­¬å¦‚ï¼Œ<a href=https://github.com/dubbogo/getty>dubbogo/getty</a> æœåŠ¡ç«¯æ”¶åˆ°äº†å®¢æˆ·ç«¯å‘æ¥çš„ A å’Œ B ä¸¤ä¸ªç½‘ç»œåŒ…ï¼Œä¸è€ƒè™‘å¤„ç†é¡ºåºçš„ gr pool
æ¨¡å‹å¯èƒ½é€ æˆå®¢æˆ·ç«¯å…ˆæ”¶åˆ° B åŒ…çš„ responseï¼Œåæ‰æ”¶åˆ° A åŒ…çš„ responseã€‚</p><p>å¦‚æœå®¢æˆ·ç«¯çš„æ¯æ¬¡è¯·æ±‚éƒ½æ˜¯ç‹¬ç«‹çš„ï¼Œæ²¡æœ‰å‰åé¡ºåºå…³ç³»ï¼Œåˆ™å¸¦æœ‰ gr pool ç‰¹æ€§çš„ <a href=https://github.com/dubbogo/getty>dubbogo/getty</a> ä¸è€ƒè™‘é¡ºåºå…³ç³»æ˜¯æ²¡æœ‰é—®é¢˜çš„ã€‚å¦‚æœä¸Šå±‚ç”¨æˆ·å…³æ³¨ A å’Œ B è¯·æ±‚å¤„ç†çš„å‰åé¡ºåºï¼Œåˆ™å¯ä»¥æŠŠ A å’Œ B
ä¸¤ä¸ªè¯·æ±‚åˆå¹¶ä¸ºä¸€ä¸ªè¯·æ±‚ï¼Œæˆ–è€…æŠŠ gr pool ç‰¹æ€§å…³é—­ã€‚</p><h3 id=a-name4141-å›ºå®šå¤§å°-gr-poola><a name=4.1>4.1 å›ºå®šå¤§å° Gr Pool</a></h3><p>æŒ‰ç…§ M ä¸ N çš„æ¯”ä¾‹ï¼Œå›ºå®šå¤§å° Gr Pool åˆåŒºåˆ†ä¸º 1:1ã€1:Nã€M:N ä¸‰ç±»ã€‚</p><p>1:N ç±»å‹çš„ Gr Pool æœ€æ˜“å®ç°ï¼Œä¸ªäºº 2017 å¹´åœ¨é¡¹ç›® <a href=https://github.com/AlexStocks/kafka-connect-elasticsearch>kafka-connect-elasticsearch</a> ä¸­å®ç°è¿‡æ­¤ç±»å‹çš„ <a href=https://github.com/AlexStocks/kafka-connect-elasticsearch/blob/master/app/worker.go>Gr Pool</a>ï¼šä½œä¸ºæ¶ˆè´¹è€…ä» kafka è¯»å–æ•°æ®ç„¶åæ”¾å…¥æ¶ˆæ¯é˜Ÿåˆ—ï¼Œç„¶åå„ä¸ª
worker gr ä»æ­¤é˜Ÿåˆ—ä¸­å–å‡ºä»»åŠ¡è¿›è¡Œæ¶ˆè´¹å¤„ç†ã€‚</p><p>å‘ <a href=https://github.com/dubbogo/getty>dubbogo/getty</a> ä¸­æ·»åŠ  gr pool æ—¶ä¹Ÿæ›¾å®ç°è¿‡è¿™ä¸ªç‰ˆæœ¬çš„ <a href=https://github.com/dubbogo/getty/pull/6/commits/4b32c61e65858b3eea9d88d8f1c154ab730c32f1>gr pool</a>ã€‚è¿™ç§æ¨¡å‹çš„ gr pool æ•´ä¸ª pool åªåˆ›å»ºä¸€ä¸ª chanï¼Œ æ‰€æœ‰ gr å»è¯»å–è¿™ä¸€ä¸ª
chanï¼Œå…¶ç¼ºç‚¹æ˜¯ï¼šé˜Ÿåˆ—è¯»å†™æ¨¡å‹æ˜¯ ä¸€å†™å¤šè¯»ï¼Œå› ä¸º go channel çš„ä½æ•ˆç‡ã€æ•´ä½“ä½¿ç”¨ä¸€ä¸ª mutex lockã€‘é€ æˆç«äº‰æ¿€çƒˆï¼Œå½“ç„¶å…¶ç½‘ç»œåŒ…å¤„ç†é¡ºåºæ›´æ— ä»ä¿è¯ã€‚</p><p><a href=https://github.com/dubbogo/getty>dubbogo/getty</a> åˆå§‹ç‰ˆæœ¬çš„ <a href=https://github.com/dubbogo/getty/pull/6/files/c4d06e2a329758a6c65c46abe464a90a3002e428#diff-9922b38d89e2ff9f820f2ce62f254162>gr pool</a> æ¨¡å‹ä¸º 1:1ï¼Œæ¯ä¸ª gr å¤šæœ‰è‡ªå·±çš„ chanï¼Œå…¶è¯»å†™æ¨¡å‹æ˜¯ä¸€å†™ä¸€è¯»ï¼Œå…¶ä¼˜ç‚¹æ˜¯å¯ä¿è¯ç½‘ç»œåŒ…å¤„ç†é¡ºåºæ€§ï¼Œ å¦‚è¯»å– kafka æ¶ˆæ¯æ—¶å€™ï¼ŒæŒ‰ç…§ kafka
message çš„ key çš„ hash å€¼ä»¥å–ä½™æ–¹å¼ã€hash(message key) % Nã€‘å°†å…¶æŠ•é€’åˆ°æŸä¸ª task queueï¼Œåˆ™åŒä¸€ key çš„æ¶ˆæ¯éƒ½å¯ä»¥ä¿è¯å¤„ç†æœ‰åºã€‚ä½† <a href=10>æœ›å“¥</a>
æŒ‡å‡ºäº†è¿™ç§æ¨¡å‹çš„ç¼ºé™·ï¼šæ¯ä¸ªtaskå¤„ç†è¦æœ‰æ—¶é—´ï¼Œæ­¤æ–¹æ¡ˆä¼šé€ æˆæŸä¸ª gr çš„ chan é‡Œé¢æœ‰ task å µå¡ï¼Œå°±ç®—å…¶ä»– gr é—²ç€ï¼Œä¹Ÿæ²¡åŠæ³•å¤„ç†ä¹‹ã€ä»»åŠ¡å¤„ç†â€œé¥¥é¥¿â€ã€‘ã€‚</p><p><a href=https://github.com/wenweihu86>wenwei86</a> ç»™å‡ºäº†æ›´è¿›ä¸€æ­¥çš„ 1:1 æ¨¡å‹çš„æ”¹è¿›æ–¹æ¡ˆï¼šæ¯ä¸ª gr ä¸€ä¸ª chanï¼Œå¦‚æœ gr å‘ç°è‡ªå·±çš„ chan æ²¡æœ‰è¯·æ±‚ï¼Œå°±å»æ‰¾åˆ«çš„ chanï¼Œå‘é€æ–¹ä¹Ÿå°½é‡å‘å¾€æ¶ˆè´¹å¿«çš„åç¨‹ã€‚è¿™ä¸ªæ–¹æ¡ˆç±»ä¼¼äº go runtime å†…éƒ¨çš„
MPG è°ƒåº¦ç®—æ³•ï¼Œä½†æ˜¯å¯¹æˆ‘ä¸ªäººæ¥è¯´ç®—æ³•å’Œå®ç°å‡å¤ªå¤æ‚ï¼Œæ•…è€Œæ²¡æœ‰é‡‡ç”¨ã€‚</p><p><a href=https://github.com/dubbogo/getty>dubbogo/getty</a> ç›®å‰é‡‡ç”¨äº† M:N æ¨¡å‹ç‰ˆæœ¬çš„ <a href=https://github.com/dubbogo/getty/pull/6/commits/1991056b300ba9804de0554dbb49b5eb04560c4b>gr pool</a>ï¼Œæ¯ä¸ª task queue è¢« N/M ä¸ª gr æ¶ˆè´¹ï¼Œè¿™ç§æ¨¡å‹çš„ä¼˜ç‚¹æ˜¯å…¼é¡¾å¤„ç†æ•ˆç‡å’Œé”å‹åŠ›å¹³è¡¡ï¼Œå¯ä»¥åšåˆ°æ€»ä½“å±‚é¢çš„ä»»åŠ¡å¤„ç†å‡è¡¡ã€‚æ­¤ç‰ˆæœ¬ä¸‹
Task æ´¾å‘é‡‡ç”¨ RoundRobin æ–¹å¼ã€‚</p><h2 id=æ€»ç»“>æ€»ç»“</h2><p>æœ¬æ–‡æ€»ç»“äº† <a href=https://github.com/alexstocks/getty>getty</a> è¿‘æœŸå¼€å‘è¿‡ç¨‹ä¸­é‡åˆ°çš„ä¸€äº›é—®é¢˜ï¼Œå›¿äºä¸ªäººæ°´å¹³åªèƒ½ç»™å‡ºç›®å‰è‡ªè®¤ä¸ºæœ€å¥½çš„è§£å†³æ–¹æ³•ã€å¦‚ä½•ä½ æœ‰æ›´å¥½çš„å®ç°ï¼Œè¯·ç•™è¨€ã€‘ã€‚</p><p>éšç€ <a href=https://github.com/alexstocks/getty>getty</a> è‹¥æœ‰æ–°çš„ improvement æˆ–è€…æ–° featureï¼Œæˆ‘ä¼šåŠæ—¶è¡¥åŠ æ­¤æ–‡ã€‚</p><p>æ­¤è®°ã€‚</p><h2 id=å‚è€ƒæ–‡æ¡£>å‚è€ƒæ–‡æ¡£</h2><ol><li><a href=http://www.masterraghu.com/subjects/np/introduction/unix_network_programming_v1.3/ch08lev1sec11.html>connect Function with UDP</a></li><li><a href=http://colobu.com/2016/10/19/Go-UDP-Programming/>æ·±å…¥Go UDPç¼–ç¨‹</a></li></ol><ul class="list-unstyled d-flex justify-content-between align-items-center mb-0 pt-5"><li><a href=/zh/blog/2021/01/11/%E5%9C%A8dubbo-go%E4%B8%AD%E4%BD%BF%E7%94%A8sentinel/ class="btn btn-primary"><span class=mr-1>â†</span> ä¸Šä¸€é¡µ</a></li><a href=/zh/blog/2021/01/11/dubbo-go-%E4%B8%AD%E5%A6%82%E4%BD%95%E5%AE%9E%E7%8E%B0%E8%BF%9C%E7%A8%8B%E9%85%8D%E7%BD%AE%E7%AE%A1%E7%90%86/ class="btn btn-primary">ä¸‹ä¸€é¡µ <span class=ml-1>â†’</span></a></li></ul></div></main></div></div><footer class="bg-dark py-5 row d-print-none"><div class="container-fluid mx-sm-5"><div class=row><div class="col-6 col-sm-4 text-xs-center order-sm-2"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Dubbo mailing list archive" aria-label="Dubbo mailing list archive"><a class=text-white target=_blank rel="noopener noreferrer" href=https://lists.apache.org/list.html?dev@dubbo.apache.org><i class="fa fa-envelope"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=Twitter aria-label=Twitter><a class=text-white target=_blank rel="noopener noreferrer" href=https://twitter.com/ApacheDubbo><i class="fab fa-twitter"></i></a></li></ul></div><div class="col-6 col-sm-4 text-right text-xs-center order-sm-3"><ul class="list-inline mb-0"><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title=GitHub aria-label=GitHub><a class=text-white target=_blank rel="noopener noreferrer" href=https://github.com/apache/dubbo><i class="fab fa-github"></i></a></li><li class="list-inline-item mx-2 h3" data-toggle=tooltip data-placement=top title="Subscribe to mailing list" aria-label="Subscribe to mailing list"><a class=text-white target=_blank rel="noopener noreferrer" href=mailto://dev-subscribe@dubbo.apache.org><i class="fa fa-envelope"></i></a></li></ul></div><div class="col-12 col-sm-4 text-center py-2 order-sm-2"><small class=text-white>&copy; 2021 The Apache Software Foundation. Apache and the Apache feather logo are trademarks of The Apache Software Foundation. All Rights Reserved</small></div></div></div></footer><div class="row pt-2 pb-2"><div class="container-fluid mx-sm-5"><div class=text-center id=my-footer><img style=float:left src=/imgs/apache_logo.png><ul><li><a href=http://www.apache.org>Foundation</a></li><li><a href=http://www.apache.org/licenses/>License</a></li><li><a href=https://www.apache.org/security/>Security</a></li><li><a href=http://www.apache.org/events/current-event>Events</a></li><li><a href=http://www.apache.org/foundation/sponsorship.html>Sponsorship</a></li><li><a href=http://www.apache.org/foundation/thanks.html>Thanks</a></li></ul></div></div></div></div><script src=/js/popper.min.js integrity=sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49 crossorigin=anonymous></script><script src=/js/bootstrap.min.js integrity=sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy crossorigin=anonymous></script><script src=/js/main.min.623110a0c86ccbbce7098af304cb142e92e4bf9860e8fee7857669f773b30be9.js integrity="sha256-YjEQoMhsy7znCYrzBMsULpLkv5hg6P7nhXZp93OzC+k=" crossorigin=anonymous></script><script src=https://cdn.jsdelivr.net/npm/docsearch.js@2.6.3/dist/cdn/docsearch.min.js></script><script>docsearch({apiKey:'38eff7758162fbf70f2b8484932e62ae',indexName:'apache_dubbo',inputSelector:'.td-search-input',debug:false,});</script></body></html>